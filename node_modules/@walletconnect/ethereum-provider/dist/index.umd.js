(function(_n,pr){typeof exports=="object"&&typeof module<"u"?pr(exports):typeof define=="function"&&define.amd?define(["exports"],pr):(_n=typeof globalThis<"u"?globalThis:_n||self,pr(_n["@walletconnect/ethereum-provider"]={}))})(this,function(_n){"use strict";var pr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Ui(t){var e=t.default;if(typeof e=="function"){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var br={exports:{}},Es=typeof Reflect=="object"?Reflect:null,fd=Es&&typeof Es.apply=="function"?Es.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Ua;Es&&typeof Es.ownKeys=="function"?Ua=Es.ownKeys:Object.getOwnPropertySymbols?Ua=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ua=function(e){return Object.getOwnPropertyNames(e)};function bw(t){console&&console.warn&&console.warn(t)}var dd=Number.isNaN||function(e){return e!==e};function _t(){_t.init.call(this)}br.exports=_t,br.exports.once=Cw,_t.EventEmitter=_t,_t.prototype._events=void 0,_t.prototype._eventsCount=0,_t.prototype._maxListeners=void 0;var pd=10;function ja(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return pd},set:function(t){if(typeof t!="number"||t<0||dd(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");pd=t}}),_t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_t.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||dd(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function gd(t){return t._maxListeners===void 0?_t.defaultMaxListeners:t._maxListeners}_t.prototype.getMaxListeners=function(){return gd(this)},_t.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var l=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw l.context=c,l}var h=o[e];if(h===void 0)return!1;if(typeof h=="function")fd(h,this,r);else for(var f=h.length,v=bd(h,f),n=0;n<f;++n)fd(v[n],this,r);return!0};function md(t,e,r,n){var i,o,c;if(ja(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),c=o[e]),c===void 0)c=o[e]=r,++t._eventsCount;else if(typeof c=="function"?c=o[e]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),i=gd(t),i>0&&c.length>i&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=c.length,bw(l)}return t}_t.prototype.addListener=function(e,r){return md(this,e,r,!1)},_t.prototype.on=_t.prototype.addListener,_t.prototype.prependListener=function(e,r){return md(this,e,r,!0)};function _w(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function wd(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=_w.bind(n);return i.listener=r,n.wrapFn=i,i}_t.prototype.once=function(e,r){return ja(r),this.on(e,wd(this,e,r)),this},_t.prototype.prependOnceListener=function(e,r){return ja(r),this.prependListener(e,wd(this,e,r)),this},_t.prototype.removeListener=function(e,r){var n,i,o,c,l;if(ja(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){l=n[c].listener,o=c;break}if(o<0)return this;o===0?n.shift():Ew(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,l||r)}return this},_t.prototype.off=_t.prototype.removeListener,_t.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),c;for(i=0;i<o.length;++i)c=o[i],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function vd(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?xw(i):bd(i,i.length)}_t.prototype.listeners=function(e){return vd(this,e,!0)},_t.prototype.rawListeners=function(e){return vd(this,e,!1)},_t.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):yd.call(t,e)},_t.prototype.listenerCount=yd;function yd(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?Ua(this._events):[]};function bd(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function Ew(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function xw(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function Cw(t,e){return new Promise(function(r,n){function i(c){t.removeListener(e,o),n(c)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}_d(t,e,o,{once:!0}),e!=="error"&&Iw(t,i,{once:!0})})}function Iw(t,e,r){typeof t.on=="function"&&_d(t,"error",e,r)}function _d(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ru={},Fa={},et={},Ed={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(l,h){var f=l>>>16&65535,v=l&65535,x=h>>>16&65535,_=h&65535;return v*_+(f*_+v*x<<16>>>0)|0}t.mul=Math.imul||e;function r(l,h){return l+h|0}t.add=r;function n(l,h){return l-h|0}t.sub=n;function i(l,h){return l<<h|l>>>32-h}t.rotl=i;function o(l,h){return l<<32-h|l>>>h}t.rotr=o;function c(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l}t.isInteger=Number.isInteger||c,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(l){return t.isInteger(l)&&l>=-t.MAX_SAFE_INTEGER&&l<=t.MAX_SAFE_INTEGER}})(Ed),Object.defineProperty(et,"__esModule",{value:!0});var xd=Ed;function Sw(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}et.readInt16BE=Sw;function Ow(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}et.readUint16BE=Ow;function Aw(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}et.readInt16LE=Aw;function Dw(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}et.readUint16LE=Dw;function Cd(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}et.writeUint16BE=Cd,et.writeInt16BE=Cd;function Id(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}et.writeUint16LE=Id,et.writeInt16LE=Id;function nu(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}et.readInt32BE=nu;function iu(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}et.readUint32BE=iu;function su(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}et.readInt32LE=su;function ou(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}et.readUint32LE=ou;function Ba(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}et.writeUint32BE=Ba,et.writeInt32BE=Ba;function ka(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}et.writeUint32LE=ka,et.writeInt32LE=ka;function $w(t,e){e===void 0&&(e=0);var r=nu(t,e),n=nu(t,e+4);return r*4294967296+n-(n>>31)*4294967296}et.readInt64BE=$w;function Pw(t,e){e===void 0&&(e=0);var r=iu(t,e),n=iu(t,e+4);return r*4294967296+n}et.readUint64BE=Pw;function Tw(t,e){e===void 0&&(e=0);var r=su(t,e),n=su(t,e+4);return n*4294967296+r-(r>>31)*4294967296}et.readInt64LE=Tw;function Nw(t,e){e===void 0&&(e=0);var r=ou(t,e),n=ou(t,e+4);return n*4294967296+r}et.readUint64LE=Nw;function Sd(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Ba(t/4294967296>>>0,e,r),Ba(t>>>0,e,r+4),e}et.writeUint64BE=Sd,et.writeInt64BE=Sd;function Od(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),ka(t>>>0,e,r),ka(t/4294967296>>>0,e,r+4),e}et.writeUint64LE=Od,et.writeInt64LE=Od;function Rw(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+r-1;o>=r;o--)n+=e[o]*i,i*=256;return n}et.readUintBE=Rw;function Lw(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+t/8;o++)n+=e[o]*i,i*=256;return n}et.readUintLE=Lw;function Mw(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!xd.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=t/8+n-1;o>=n;o--)r[o]=e/i&255,i*=256;return r}et.writeUintBE=Mw;function Uw(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!xd.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+t/8;o++)r[o]=e/i&255,i*=256;return r}et.writeUintLE=Uw;function jw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}et.readFloat32BE=jw;function Fw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}et.readFloat32LE=Fw;function Bw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}et.readFloat64BE=Bw;function kw(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}et.readFloat64LE=kw;function Hw(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}et.writeFloat32BE=Hw;function zw(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}et.writeFloat32LE=zw;function Ww(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}et.writeFloat64BE=Ww;function qw(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}et.writeFloat64LE=qw;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});function Vw(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Yr.wipe=Vw,Object.defineProperty(Fa,"__esModule",{value:!0});var Ir=et,au=Yr,Kw=20;function Gw(t,e,r){for(var n=1634760805,i=857760878,o=2036477234,c=1797285236,l=r[3]<<24|r[2]<<16|r[1]<<8|r[0],h=r[7]<<24|r[6]<<16|r[5]<<8|r[4],f=r[11]<<24|r[10]<<16|r[9]<<8|r[8],v=r[15]<<24|r[14]<<16|r[13]<<8|r[12],x=r[19]<<24|r[18]<<16|r[17]<<8|r[16],_=r[23]<<24|r[22]<<16|r[21]<<8|r[20],S=r[27]<<24|r[26]<<16|r[25]<<8|r[24],P=r[31]<<24|r[30]<<16|r[29]<<8|r[28],j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],H=e[7]<<24|e[6]<<16|e[5]<<8|e[4],Z=e[11]<<24|e[10]<<16|e[9]<<8|e[8],R=e[15]<<24|e[14]<<16|e[13]<<8|e[12],L=n,$=i,T=o,I=c,d=l,E=h,J=f,z=v,ee=x,de=_,me=S,O=P,U=j,ce=H,le=Z,re=R,ne=0;ne<Kw;ne+=2)L=L+d|0,U^=L,U=U>>>32-16|U<<16,ee=ee+U|0,d^=ee,d=d>>>32-12|d<<12,$=$+E|0,ce^=$,ce=ce>>>32-16|ce<<16,de=de+ce|0,E^=de,E=E>>>32-12|E<<12,T=T+J|0,le^=T,le=le>>>32-16|le<<16,me=me+le|0,J^=me,J=J>>>32-12|J<<12,I=I+z|0,re^=I,re=re>>>32-16|re<<16,O=O+re|0,z^=O,z=z>>>32-12|z<<12,T=T+J|0,le^=T,le=le>>>32-8|le<<8,me=me+le|0,J^=me,J=J>>>32-7|J<<7,I=I+z|0,re^=I,re=re>>>32-8|re<<8,O=O+re|0,z^=O,z=z>>>32-7|z<<7,$=$+E|0,ce^=$,ce=ce>>>32-8|ce<<8,de=de+ce|0,E^=de,E=E>>>32-7|E<<7,L=L+d|0,U^=L,U=U>>>32-8|U<<8,ee=ee+U|0,d^=ee,d=d>>>32-7|d<<7,L=L+E|0,re^=L,re=re>>>32-16|re<<16,me=me+re|0,E^=me,E=E>>>32-12|E<<12,$=$+J|0,U^=$,U=U>>>32-16|U<<16,O=O+U|0,J^=O,J=J>>>32-12|J<<12,T=T+z|0,ce^=T,ce=ce>>>32-16|ce<<16,ee=ee+ce|0,z^=ee,z=z>>>32-12|z<<12,I=I+d|0,le^=I,le=le>>>32-16|le<<16,de=de+le|0,d^=de,d=d>>>32-12|d<<12,T=T+z|0,ce^=T,ce=ce>>>32-8|ce<<8,ee=ee+ce|0,z^=ee,z=z>>>32-7|z<<7,I=I+d|0,le^=I,le=le>>>32-8|le<<8,de=de+le|0,d^=de,d=d>>>32-7|d<<7,$=$+J|0,U^=$,U=U>>>32-8|U<<8,O=O+U|0,J^=O,J=J>>>32-7|J<<7,L=L+E|0,re^=L,re=re>>>32-8|re<<8,me=me+re|0,E^=me,E=E>>>32-7|E<<7;Ir.writeUint32LE(L+n|0,t,0),Ir.writeUint32LE($+i|0,t,4),Ir.writeUint32LE(T+o|0,t,8),Ir.writeUint32LE(I+c|0,t,12),Ir.writeUint32LE(d+l|0,t,16),Ir.writeUint32LE(E+h|0,t,20),Ir.writeUint32LE(J+f|0,t,24),Ir.writeUint32LE(z+v|0,t,28),Ir.writeUint32LE(ee+x|0,t,32),Ir.writeUint32LE(de+_|0,t,36),Ir.writeUint32LE(me+S|0,t,40),Ir.writeUint32LE(O+P|0,t,44),Ir.writeUint32LE(U+j|0,t,48),Ir.writeUint32LE(ce+H|0,t,52),Ir.writeUint32LE(le+Z|0,t,56),Ir.writeUint32LE(re+R|0,t,60)}function Ad(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,c;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),c=o.length-e.length,o.set(e,c)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,c=i}for(var l=new Uint8Array(64),h=0;h<r.length;h+=64){Gw(l,o,t);for(var f=h;f<h+64&&f<r.length;f++)n[f]=r[f]^l[f-h];Yw(o,0,c)}return au.wipe(l),i===0&&au.wipe(o),n}Fa.streamXOR=Ad;function Zw(t,e,r,n){return n===void 0&&(n=0),au.wipe(r),Ad(t,e,r,r,n)}Fa.stream=Zw;function Yw(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}var Dd={},li={};Object.defineProperty(li,"__esModule",{value:!0});function Jw(t,e,r){return~(t-1)&e|t-1&r}li.select=Jw;function Xw(t,e){return(t|0)-(e|0)-1>>>31&1}li.lessOrEqual=Xw;function $d(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}li.compare=$d;function Qw(t,e){return t.length===0||e.length===0?!1:$d(t,e)!==0}li.equal=Qw,function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=li,r=Yr;t.DIGEST_LENGTH=16;var n=function(){function c(l){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=l[0]|l[1]<<8;this._r[0]=h&8191;var f=l[2]|l[3]<<8;this._r[1]=(h>>>13|f<<3)&8191;var v=l[4]|l[5]<<8;this._r[2]=(f>>>10|v<<6)&7939;var x=l[6]|l[7]<<8;this._r[3]=(v>>>7|x<<9)&8191;var _=l[8]|l[9]<<8;this._r[4]=(x>>>4|_<<12)&255,this._r[5]=_>>>1&8190;var S=l[10]|l[11]<<8;this._r[6]=(_>>>14|S<<2)&8191;var P=l[12]|l[13]<<8;this._r[7]=(S>>>11|P<<5)&8065;var j=l[14]|l[15]<<8;this._r[8]=(P>>>8|j<<8)&8191,this._r[9]=j>>>5&127,this._pad[0]=l[16]|l[17]<<8,this._pad[1]=l[18]|l[19]<<8,this._pad[2]=l[20]|l[21]<<8,this._pad[3]=l[22]|l[23]<<8,this._pad[4]=l[24]|l[25]<<8,this._pad[5]=l[26]|l[27]<<8,this._pad[6]=l[28]|l[29]<<8,this._pad[7]=l[30]|l[31]<<8}return c.prototype._blocks=function(l,h,f){for(var v=this._fin?0:2048,x=this._h[0],_=this._h[1],S=this._h[2],P=this._h[3],j=this._h[4],H=this._h[5],Z=this._h[6],R=this._h[7],L=this._h[8],$=this._h[9],T=this._r[0],I=this._r[1],d=this._r[2],E=this._r[3],J=this._r[4],z=this._r[5],ee=this._r[6],de=this._r[7],me=this._r[8],O=this._r[9];f>=16;){var U=l[h+0]|l[h+1]<<8;x+=U&8191;var ce=l[h+2]|l[h+3]<<8;_+=(U>>>13|ce<<3)&8191;var le=l[h+4]|l[h+5]<<8;S+=(ce>>>10|le<<6)&8191;var re=l[h+6]|l[h+7]<<8;P+=(le>>>7|re<<9)&8191;var ne=l[h+8]|l[h+9]<<8;j+=(re>>>4|ne<<12)&8191,H+=ne>>>1&8191;var ae=l[h+10]|l[h+11]<<8;Z+=(ne>>>14|ae<<2)&8191;var ie=l[h+12]|l[h+13]<<8;R+=(ae>>>11|ie<<5)&8191;var Ae=l[h+14]|l[h+15]<<8;L+=(ie>>>8|Ae<<8)&8191,$+=Ae>>>5|v;var ge=0,Be=ge;Be+=x*T,Be+=_*(5*O),Be+=S*(5*me),Be+=P*(5*de),Be+=j*(5*ee),ge=Be>>>13,Be&=8191,Be+=H*(5*z),Be+=Z*(5*J),Be+=R*(5*E),Be+=L*(5*d),Be+=$*(5*I),ge+=Be>>>13,Be&=8191;var ye=ge;ye+=x*I,ye+=_*T,ye+=S*(5*O),ye+=P*(5*me),ye+=j*(5*de),ge=ye>>>13,ye&=8191,ye+=H*(5*ee),ye+=Z*(5*z),ye+=R*(5*J),ye+=L*(5*E),ye+=$*(5*d),ge+=ye>>>13,ye&=8191;var Me=ge;Me+=x*d,Me+=_*I,Me+=S*T,Me+=P*(5*O),Me+=j*(5*me),ge=Me>>>13,Me&=8191,Me+=H*(5*de),Me+=Z*(5*ee),Me+=R*(5*z),Me+=L*(5*J),Me+=$*(5*E),ge+=Me>>>13,Me&=8191;var X=ge;X+=x*E,X+=_*d,X+=S*I,X+=P*T,X+=j*(5*O),ge=X>>>13,X&=8191,X+=H*(5*me),X+=Z*(5*de),X+=R*(5*ee),X+=L*(5*z),X+=$*(5*J),ge+=X>>>13,X&=8191;var Y=ge;Y+=x*J,Y+=_*E,Y+=S*d,Y+=P*I,Y+=j*T,ge=Y>>>13,Y&=8191,Y+=H*(5*O),Y+=Z*(5*me),Y+=R*(5*de),Y+=L*(5*ee),Y+=$*(5*z),ge+=Y>>>13,Y&=8191;var W=ge;W+=x*z,W+=_*J,W+=S*E,W+=P*d,W+=j*I,ge=W>>>13,W&=8191,W+=H*T,W+=Z*(5*O),W+=R*(5*me),W+=L*(5*de),W+=$*(5*ee),ge+=W>>>13,W&=8191;var w=ge;w+=x*ee,w+=_*z,w+=S*J,w+=P*E,w+=j*d,ge=w>>>13,w&=8191,w+=H*I,w+=Z*T,w+=R*(5*O),w+=L*(5*me),w+=$*(5*de),ge+=w>>>13,w&=8191;var F=ge;F+=x*de,F+=_*ee,F+=S*z,F+=P*J,F+=j*E,ge=F>>>13,F&=8191,F+=H*d,F+=Z*I,F+=R*T,F+=L*(5*O),F+=$*(5*me),ge+=F>>>13,F&=8191;var we=ge;we+=x*me,we+=_*de,we+=S*ee,we+=P*z,we+=j*J,ge=we>>>13,we&=8191,we+=H*E,we+=Z*d,we+=R*I,we+=L*T,we+=$*(5*O),ge+=we>>>13,we&=8191;var ve=ge;ve+=x*O,ve+=_*me,ve+=S*de,ve+=P*ee,ve+=j*z,ge=ve>>>13,ve&=8191,ve+=H*J,ve+=Z*E,ve+=R*d,ve+=L*I,ve+=$*T,ge+=ve>>>13,ve&=8191,ge=(ge<<2)+ge|0,ge=ge+Be|0,Be=ge&8191,ge=ge>>>13,ye+=ge,x=Be,_=ye,S=Me,P=X,j=Y,H=W,Z=w,R=F,L=we,$=ve,h+=16,f-=16}this._h[0]=x,this._h[1]=_,this._h[2]=S,this._h[3]=P,this._h[4]=j,this._h[5]=H,this._h[6]=Z,this._h[7]=R,this._h[8]=L,this._h[9]=$},c.prototype.finish=function(l,h){h===void 0&&(h=0);var f=new Uint16Array(10),v,x,_,S;if(this._leftover){for(S=this._leftover,this._buffer[S++]=1;S<16;S++)this._buffer[S]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(v=this._h[1]>>>13,this._h[1]&=8191,S=2;S<10;S++)this._h[S]+=v,v=this._h[S]>>>13,this._h[S]&=8191;for(this._h[0]+=v*5,v=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=v,v=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=v,f[0]=this._h[0]+5,v=f[0]>>>13,f[0]&=8191,S=1;S<10;S++)f[S]=this._h[S]+v,v=f[S]>>>13,f[S]&=8191;for(f[9]-=8192,x=(v^1)-1,S=0;S<10;S++)f[S]&=x;for(x=~x,S=0;S<10;S++)this._h[S]=this._h[S]&x|f[S];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,_=this._h[0]+this._pad[0],this._h[0]=_&65535,S=1;S<8;S++)_=(this._h[S]+this._pad[S]|0)+(_>>>16)|0,this._h[S]=_&65535;return l[h+0]=this._h[0]>>>0,l[h+1]=this._h[0]>>>8,l[h+2]=this._h[1]>>>0,l[h+3]=this._h[1]>>>8,l[h+4]=this._h[2]>>>0,l[h+5]=this._h[2]>>>8,l[h+6]=this._h[3]>>>0,l[h+7]=this._h[3]>>>8,l[h+8]=this._h[4]>>>0,l[h+9]=this._h[4]>>>8,l[h+10]=this._h[5]>>>0,l[h+11]=this._h[5]>>>8,l[h+12]=this._h[6]>>>0,l[h+13]=this._h[6]>>>8,l[h+14]=this._h[7]>>>0,l[h+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(l){var h=0,f=l.length,v;if(this._leftover){v=16-this._leftover,v>f&&(v=f);for(var x=0;x<v;x++)this._buffer[this._leftover+x]=l[h+x];if(f-=v,h+=v,this._leftover+=v,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(f>=16&&(v=f-f%16,this._blocks(l,h,v),h+=v,f-=v),f){for(var x=0;x<f;x++)this._buffer[this._leftover+x]=l[h+x];this._leftover+=f}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var l=new Uint8Array(16);return this.finish(l),l},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();t.Poly1305=n;function i(c,l){var h=new n(c);h.update(l);var f=h.digest();return h.clean(),f}t.oneTimeAuth=i;function o(c,l){return c.length!==t.DIGEST_LENGTH||l.length!==t.DIGEST_LENGTH?!1:e.equal(c,l)}t.equal=o}(Dd),function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Fa,r=Dd,n=Yr,i=et,o=li;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var c=new Uint8Array(16),l=function(){function h(f){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,f.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(f)}return h.prototype.seal=function(f,v,x,_){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var S=new Uint8Array(16);S.set(f,S.length-f.length);var P=new Uint8Array(32);e.stream(this._key,S,P,4);var j=v.length+this.tagLength,H;if(_){if(_.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");H=_}else H=new Uint8Array(j);return e.streamXOR(this._key,S,v,H,4),this._authenticate(H.subarray(H.length-this.tagLength,H.length),P,H.subarray(0,H.length-this.tagLength),x),n.wipe(S),H},h.prototype.open=function(f,v,x,_){if(f.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(v.length<this.tagLength)return null;var S=new Uint8Array(16);S.set(f,S.length-f.length);var P=new Uint8Array(32);e.stream(this._key,S,P,4);var j=new Uint8Array(this.tagLength);if(this._authenticate(j,P,v.subarray(0,v.length-this.tagLength),x),!o.equal(j,v.subarray(v.length-this.tagLength,v.length)))return null;var H=v.length-this.tagLength,Z;if(_){if(_.length!==H)throw new Error("ChaCha20Poly1305: incorrect destination length");Z=_}else Z=new Uint8Array(H);return e.streamXOR(this._key,S,v.subarray(0,v.length-this.tagLength),Z,4),n.wipe(S),Z},h.prototype.clean=function(){return n.wipe(this._key),this},h.prototype._authenticate=function(f,v,x,_){var S=new r.Poly1305(v);_&&(S.update(_),_.length%16>0&&S.update(c.subarray(_.length%16))),S.update(x),x.length%16>0&&S.update(c.subarray(x.length%16));var P=new Uint8Array(8);_&&i.writeUint64LE(_.length,P),S.update(P),i.writeUint64LE(x.length,P),S.update(P);for(var j=S.digest(),H=0;H<j.length;H++)f[H]=j[H];S.clean(),n.wipe(j),n.wipe(P)},h}();t.ChaCha20Poly1305=l}(ru);var Pd={},bo={},cu={};Object.defineProperty(cu,"__esModule",{value:!0});function ev(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}cu.isSerializableHash=ev,Object.defineProperty(bo,"__esModule",{value:!0});var $n=cu,tv=li,rv=Yr,Td=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),$n.isSerializableHash(this._inner)&&$n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),rv.wipe(n)}return t.prototype.reset=function(){if(!$n.isSerializableHash(this._inner)||!$n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){$n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),$n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!$n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!$n.isSerializableHash(this._inner)||!$n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!$n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();bo.HMAC=Td;function nv(t,e,r){var n=new Td(t,e);n.update(r);var i=n.digest();return n.clean(),i}bo.hmac=nv,bo.equal=tv.equal,Object.defineProperty(Pd,"__esModule",{value:!0});var Nd=bo,Rd=Yr,iv=function(){function t(e,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var o=Nd.hmac(this._hash,n,r);this._hmac=new Nd.HMAC(e,o),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Rd.wipe(this._buffer),Rd.wipe(this._counter),this._bufpos=0},t}(),sv=Pd.HKDF=iv,xs={},Ha={},za={};Object.defineProperty(za,"__esModule",{value:!0}),za.BrowserRandomSource=void 0;const Ld=65536;class ov{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let n=0;n<r.length;n+=Ld)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Ld)));return r}}za.BrowserRandomSource=ov;function av(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wa={},cv={},lv=Object.freeze({__proto__:null,default:cv}),uv=Ui(lv);Object.defineProperty(Wa,"__esModule",{value:!0}),Wa.NodeRandomSource=void 0;const hv=Yr;class fv{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof av<"u"){const e=uv;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,hv.wipe)(r),n}}Wa.NodeRandomSource=fv,Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.SystemRandomSource=void 0;const dv=za,pv=Wa;class gv{constructor(){if(this.isAvailable=!1,this.name="",this._source=new dv.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new pv.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Ha.SystemRandomSource=gv,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=Ha,r=et,n=Yr;t.defaultRandomSource=new e.SystemRandomSource;function i(f,v=t.defaultRandomSource){return v.randomBytes(f)}t.randomBytes=i;function o(f=t.defaultRandomSource){const v=i(4,f),x=(0,r.readUint32LE)(v);return(0,n.wipe)(v),x}t.randomUint32=o;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function l(f,v=c,x=t.defaultRandomSource){if(v.length<2)throw new Error("randomString charset is too short");if(v.length>256)throw new Error("randomString charset is too long");let _="";const S=v.length,P=256-256%S;for(;f>0;){const j=i(Math.ceil(f*256/P),x);for(let H=0;H<j.length&&f>0;H++){const Z=j[H];Z<P&&(_+=v.charAt(Z%S),f--)}(0,n.wipe)(j)}return _}t.randomString=l;function h(f,v=c,x=t.defaultRandomSource){const _=Math.ceil(f/(Math.log(v.length)/Math.LN2));return l(_,v,x)}t.randomStringForEntropy=h}(xs);var qa={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=et,r=Yr;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var n=function(){function l(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},l.prototype.update=function(h,f){if(f===void 0&&(f=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var v=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&f>0;)this._buffer[this._bufferLength++]=h[v++],f--;this._bufferLength===this.blockSize&&(o(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(v=o(this._temp,this._state,h,v,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=h[v++],f--;return this},l.prototype.finish=function(h){if(!this._finished){var f=this._bytesHashed,v=this._bufferLength,x=f/536870912|0,_=f<<3,S=f%64<56?64:128;this._buffer[v]=128;for(var P=v+1;P<S-8;P++)this._buffer[P]=0;e.writeUint32BE(x,this._buffer,S-8),e.writeUint32BE(_,this._buffer,S-4),o(this._temp,this._state,this._buffer,0,S),this._finished=!0}for(var P=0;P<this.digestLength/4;P++)e.writeUint32BE(this._state[P],h,P*4);return this},l.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(h){r.wipe(h.state),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},l}();t.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function o(l,h,f,v,x){for(;x>=64;){for(var _=h[0],S=h[1],P=h[2],j=h[3],H=h[4],Z=h[5],R=h[6],L=h[7],$=0;$<16;$++){var T=v+$*4;l[$]=e.readUint32BE(f,T)}for(var $=16;$<64;$++){var I=l[$-2],d=(I>>>17|I<<32-17)^(I>>>19|I<<32-19)^I>>>10;I=l[$-15];var E=(I>>>7|I<<32-7)^(I>>>18|I<<32-18)^I>>>3;l[$]=(d+l[$-7]|0)+(E+l[$-16]|0)}for(var $=0;$<64;$++){var d=(((H>>>6|H<<26)^(H>>>11|H<<21)^(H>>>25|H<<7))+(H&Z^~H&R)|0)+(L+(i[$]+l[$]|0)|0)|0,E=((_>>>2|_<<32-2)^(_>>>13|_<<32-13)^(_>>>22|_<<32-22))+(_&S^_&P^S&P)|0;L=R,R=Z,Z=H,H=j+d|0,j=P,P=S,S=_,_=d+E|0}h[0]+=_,h[1]+=S,h[2]+=P,h[3]+=j,h[4]+=H,h[5]+=Z,h[6]+=R,h[7]+=L,v+=64,x-=64}return v}function c(l){var h=new n;h.update(l);var f=h.digest();return h.clean(),f}t.hash=c})(qa);var lu={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=xs,r=Yr;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function n($){const T=new Float64Array(16);if($)for(let I=0;I<$.length;I++)T[I]=$[I];return T}const i=new Uint8Array(32);i[0]=9;const o=n([56129,1]);function c($){let T=1;for(let I=0;I<16;I++){let d=$[I]+T+65535;T=Math.floor(d/65536),$[I]=d-T*65536}$[0]+=T-1+37*(T-1)}function l($,T,I){const d=~(I-1);for(let E=0;E<16;E++){const J=d&($[E]^T[E]);$[E]^=J,T[E]^=J}}function h($,T){const I=n(),d=n();for(let E=0;E<16;E++)d[E]=T[E];c(d),c(d),c(d);for(let E=0;E<2;E++){I[0]=d[0]-65517;for(let z=1;z<15;z++)I[z]=d[z]-65535-(I[z-1]>>16&1),I[z-1]&=65535;I[15]=d[15]-32767-(I[14]>>16&1);const J=I[15]>>16&1;I[14]&=65535,l(d,I,1-J)}for(let E=0;E<16;E++)$[2*E]=d[E]&255,$[2*E+1]=d[E]>>8}function f($,T){for(let I=0;I<16;I++)$[I]=T[2*I]+(T[2*I+1]<<8);$[15]&=32767}function v($,T,I){for(let d=0;d<16;d++)$[d]=T[d]+I[d]}function x($,T,I){for(let d=0;d<16;d++)$[d]=T[d]-I[d]}function _($,T,I){let d,E,J=0,z=0,ee=0,de=0,me=0,O=0,U=0,ce=0,le=0,re=0,ne=0,ae=0,ie=0,Ae=0,ge=0,Be=0,ye=0,Me=0,X=0,Y=0,W=0,w=0,F=0,we=0,ve=0,Ue=0,nt=0,at=0,Ge=0,Dt=0,$t=0,Je=I[0],He=I[1],ke=I[2],Ke=I[3],rt=I[4],je=I[5],Ze=I[6],b=I[7],p=I[8],m=I[9],D=I[10],B=I[11],K=I[12],Q=I[13],Ee=I[14],Ne=I[15];d=T[0],J+=d*Je,z+=d*He,ee+=d*ke,de+=d*Ke,me+=d*rt,O+=d*je,U+=d*Ze,ce+=d*b,le+=d*p,re+=d*m,ne+=d*D,ae+=d*B,ie+=d*K,Ae+=d*Q,ge+=d*Ee,Be+=d*Ne,d=T[1],z+=d*Je,ee+=d*He,de+=d*ke,me+=d*Ke,O+=d*rt,U+=d*je,ce+=d*Ze,le+=d*b,re+=d*p,ne+=d*m,ae+=d*D,ie+=d*B,Ae+=d*K,ge+=d*Q,Be+=d*Ee,ye+=d*Ne,d=T[2],ee+=d*Je,de+=d*He,me+=d*ke,O+=d*Ke,U+=d*rt,ce+=d*je,le+=d*Ze,re+=d*b,ne+=d*p,ae+=d*m,ie+=d*D,Ae+=d*B,ge+=d*K,Be+=d*Q,ye+=d*Ee,Me+=d*Ne,d=T[3],de+=d*Je,me+=d*He,O+=d*ke,U+=d*Ke,ce+=d*rt,le+=d*je,re+=d*Ze,ne+=d*b,ae+=d*p,ie+=d*m,Ae+=d*D,ge+=d*B,Be+=d*K,ye+=d*Q,Me+=d*Ee,X+=d*Ne,d=T[4],me+=d*Je,O+=d*He,U+=d*ke,ce+=d*Ke,le+=d*rt,re+=d*je,ne+=d*Ze,ae+=d*b,ie+=d*p,Ae+=d*m,ge+=d*D,Be+=d*B,ye+=d*K,Me+=d*Q,X+=d*Ee,Y+=d*Ne,d=T[5],O+=d*Je,U+=d*He,ce+=d*ke,le+=d*Ke,re+=d*rt,ne+=d*je,ae+=d*Ze,ie+=d*b,Ae+=d*p,ge+=d*m,Be+=d*D,ye+=d*B,Me+=d*K,X+=d*Q,Y+=d*Ee,W+=d*Ne,d=T[6],U+=d*Je,ce+=d*He,le+=d*ke,re+=d*Ke,ne+=d*rt,ae+=d*je,ie+=d*Ze,Ae+=d*b,ge+=d*p,Be+=d*m,ye+=d*D,Me+=d*B,X+=d*K,Y+=d*Q,W+=d*Ee,w+=d*Ne,d=T[7],ce+=d*Je,le+=d*He,re+=d*ke,ne+=d*Ke,ae+=d*rt,ie+=d*je,Ae+=d*Ze,ge+=d*b,Be+=d*p,ye+=d*m,Me+=d*D,X+=d*B,Y+=d*K,W+=d*Q,w+=d*Ee,F+=d*Ne,d=T[8],le+=d*Je,re+=d*He,ne+=d*ke,ae+=d*Ke,ie+=d*rt,Ae+=d*je,ge+=d*Ze,Be+=d*b,ye+=d*p,Me+=d*m,X+=d*D,Y+=d*B,W+=d*K,w+=d*Q,F+=d*Ee,we+=d*Ne,d=T[9],re+=d*Je,ne+=d*He,ae+=d*ke,ie+=d*Ke,Ae+=d*rt,ge+=d*je,Be+=d*Ze,ye+=d*b,Me+=d*p,X+=d*m,Y+=d*D,W+=d*B,w+=d*K,F+=d*Q,we+=d*Ee,ve+=d*Ne,d=T[10],ne+=d*Je,ae+=d*He,ie+=d*ke,Ae+=d*Ke,ge+=d*rt,Be+=d*je,ye+=d*Ze,Me+=d*b,X+=d*p,Y+=d*m,W+=d*D,w+=d*B,F+=d*K,we+=d*Q,ve+=d*Ee,Ue+=d*Ne,d=T[11],ae+=d*Je,ie+=d*He,Ae+=d*ke,ge+=d*Ke,Be+=d*rt,ye+=d*je,Me+=d*Ze,X+=d*b,Y+=d*p,W+=d*m,w+=d*D,F+=d*B,we+=d*K,ve+=d*Q,Ue+=d*Ee,nt+=d*Ne,d=T[12],ie+=d*Je,Ae+=d*He,ge+=d*ke,Be+=d*Ke,ye+=d*rt,Me+=d*je,X+=d*Ze,Y+=d*b,W+=d*p,w+=d*m,F+=d*D,we+=d*B,ve+=d*K,Ue+=d*Q,nt+=d*Ee,at+=d*Ne,d=T[13],Ae+=d*Je,ge+=d*He,Be+=d*ke,ye+=d*Ke,Me+=d*rt,X+=d*je,Y+=d*Ze,W+=d*b,w+=d*p,F+=d*m,we+=d*D,ve+=d*B,Ue+=d*K,nt+=d*Q,at+=d*Ee,Ge+=d*Ne,d=T[14],ge+=d*Je,Be+=d*He,ye+=d*ke,Me+=d*Ke,X+=d*rt,Y+=d*je,W+=d*Ze,w+=d*b,F+=d*p,we+=d*m,ve+=d*D,Ue+=d*B,nt+=d*K,at+=d*Q,Ge+=d*Ee,Dt+=d*Ne,d=T[15],Be+=d*Je,ye+=d*He,Me+=d*ke,X+=d*Ke,Y+=d*rt,W+=d*je,w+=d*Ze,F+=d*b,we+=d*p,ve+=d*m,Ue+=d*D,nt+=d*B,at+=d*K,Ge+=d*Q,Dt+=d*Ee,$t+=d*Ne,J+=38*ye,z+=38*Me,ee+=38*X,de+=38*Y,me+=38*W,O+=38*w,U+=38*F,ce+=38*we,le+=38*ve,re+=38*Ue,ne+=38*nt,ae+=38*at,ie+=38*Ge,Ae+=38*Dt,ge+=38*$t,E=1,d=J+E+65535,E=Math.floor(d/65536),J=d-E*65536,d=z+E+65535,E=Math.floor(d/65536),z=d-E*65536,d=ee+E+65535,E=Math.floor(d/65536),ee=d-E*65536,d=de+E+65535,E=Math.floor(d/65536),de=d-E*65536,d=me+E+65535,E=Math.floor(d/65536),me=d-E*65536,d=O+E+65535,E=Math.floor(d/65536),O=d-E*65536,d=U+E+65535,E=Math.floor(d/65536),U=d-E*65536,d=ce+E+65535,E=Math.floor(d/65536),ce=d-E*65536,d=le+E+65535,E=Math.floor(d/65536),le=d-E*65536,d=re+E+65535,E=Math.floor(d/65536),re=d-E*65536,d=ne+E+65535,E=Math.floor(d/65536),ne=d-E*65536,d=ae+E+65535,E=Math.floor(d/65536),ae=d-E*65536,d=ie+E+65535,E=Math.floor(d/65536),ie=d-E*65536,d=Ae+E+65535,E=Math.floor(d/65536),Ae=d-E*65536,d=ge+E+65535,E=Math.floor(d/65536),ge=d-E*65536,d=Be+E+65535,E=Math.floor(d/65536),Be=d-E*65536,J+=E-1+37*(E-1),E=1,d=J+E+65535,E=Math.floor(d/65536),J=d-E*65536,d=z+E+65535,E=Math.floor(d/65536),z=d-E*65536,d=ee+E+65535,E=Math.floor(d/65536),ee=d-E*65536,d=de+E+65535,E=Math.floor(d/65536),de=d-E*65536,d=me+E+65535,E=Math.floor(d/65536),me=d-E*65536,d=O+E+65535,E=Math.floor(d/65536),O=d-E*65536,d=U+E+65535,E=Math.floor(d/65536),U=d-E*65536,d=ce+E+65535,E=Math.floor(d/65536),ce=d-E*65536,d=le+E+65535,E=Math.floor(d/65536),le=d-E*65536,d=re+E+65535,E=Math.floor(d/65536),re=d-E*65536,d=ne+E+65535,E=Math.floor(d/65536),ne=d-E*65536,d=ae+E+65535,E=Math.floor(d/65536),ae=d-E*65536,d=ie+E+65535,E=Math.floor(d/65536),ie=d-E*65536,d=Ae+E+65535,E=Math.floor(d/65536),Ae=d-E*65536,d=ge+E+65535,E=Math.floor(d/65536),ge=d-E*65536,d=Be+E+65535,E=Math.floor(d/65536),Be=d-E*65536,J+=E-1+37*(E-1),$[0]=J,$[1]=z,$[2]=ee,$[3]=de,$[4]=me,$[5]=O,$[6]=U,$[7]=ce,$[8]=le,$[9]=re,$[10]=ne,$[11]=ae,$[12]=ie,$[13]=Ae,$[14]=ge,$[15]=Be}function S($,T){_($,T,T)}function P($,T){const I=n();for(let d=0;d<16;d++)I[d]=T[d];for(let d=253;d>=0;d--)S(I,I),d!==2&&d!==4&&_(I,I,T);for(let d=0;d<16;d++)$[d]=I[d]}function j($,T){const I=new Uint8Array(32),d=new Float64Array(80),E=n(),J=n(),z=n(),ee=n(),de=n(),me=n();for(let le=0;le<31;le++)I[le]=$[le];I[31]=$[31]&127|64,I[0]&=248,f(d,T);for(let le=0;le<16;le++)J[le]=d[le];E[0]=ee[0]=1;for(let le=254;le>=0;--le){const re=I[le>>>3]>>>(le&7)&1;l(E,J,re),l(z,ee,re),v(de,E,z),x(E,E,z),v(z,J,ee),x(J,J,ee),S(ee,de),S(me,E),_(E,z,E),_(z,J,de),v(de,E,z),x(E,E,z),S(J,E),x(z,ee,me),_(E,z,o),v(E,E,ee),_(z,z,E),_(E,ee,me),_(ee,J,d),S(J,de),l(E,J,re),l(z,ee,re)}for(let le=0;le<16;le++)d[le+16]=E[le],d[le+32]=z[le],d[le+48]=J[le],d[le+64]=ee[le];const O=d.subarray(32),U=d.subarray(16);P(O,O),_(U,U,O);const ce=new Uint8Array(32);return h(ce,U),ce}t.scalarMult=j;function H($){return j($,i)}t.scalarMultBase=H;function Z($){if($.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const T=new Uint8Array($);return{publicKey:H(T),secretKey:T}}t.generateKeyPairFromSeed=Z;function R($){const T=(0,e.randomBytes)(32,$),I=Z(T);return(0,r.wipe)(T),I}t.generateKeyPair=R;function L($,T,I=!1){if($.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(T.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const d=j($,T);if(I){let E=0;for(let J=0;J<d.length;J++)E|=d[J];if(E===0)throw new Error("X25519: invalid shared key")}return d}t.sharedKey=L})(lu);function uu(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function Md(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?uu(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hu(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));const r=Md(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return uu(r)}function mv(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var l=t.length,h=t.charAt(0),f=Math.log(l)/Math.log(256),v=Math.log(256)/Math.log(l);function x(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var j=0,H=0,Z=0,R=P.length;Z!==R&&P[Z]===0;)Z++,j++;for(var L=(R-Z)*v+1>>>0,$=new Uint8Array(L);Z!==R;){for(var T=P[Z],I=0,d=L-1;(T!==0||I<H)&&d!==-1;d--,I++)T+=256*$[d]>>>0,$[d]=T%l>>>0,T=T/l>>>0;if(T!==0)throw new Error("Non-zero carry");H=I,Z++}for(var E=L-H;E!==L&&$[E]===0;)E++;for(var J=h.repeat(j);E<L;++E)J+=t.charAt($[E]);return J}function _(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var j=0;if(P[j]!==" "){for(var H=0,Z=0;P[j]===h;)H++,j++;for(var R=(P.length-j)*f+1>>>0,L=new Uint8Array(R);P[j];){var $=r[P.charCodeAt(j)];if($===255)return;for(var T=0,I=R-1;($!==0||T<Z)&&I!==-1;I--,T++)$+=l*L[I]>>>0,L[I]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");Z=T,j++}if(P[j]!==" "){for(var d=R-Z;d!==R&&L[d]===0;)d++;for(var E=new Uint8Array(H+(R-d)),J=H;d!==R;)E[J++]=L[d++];return E}}}function S(P){var j=_(P);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:S}}var wv=mv,vv=wv;const Ud=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},yv=t=>new TextEncoder().encode(t),bv=t=>new TextDecoder().decode(t);class _v{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Ev{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return jd(this,e)}}class xv{constructor(e){this.decoders=e}or(e){return jd(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const jd=(t,e)=>new xv({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Cv{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new _v(e,r,n),this.decoder=new Ev(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Va=({name:t,prefix:e,encode:r,decode:n})=>new Cv(t,e,r,n),_o=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=vv(r,e);return Va({prefix:t,name:e,encode:n,decode:o=>Ud(i(o))})},Iv=(t,e,r,n)=>{const i={};for(let v=0;v<e.length;++v)i[e[v]]=v;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*r/8|0);let l=0,h=0,f=0;for(let v=0;v<o;++v){const x=i[t[v]];if(x===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|x,l+=r,l>=8&&(l-=8,c[f++]=255&h>>l)}if(l>=r||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return c},Sv=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let o="",c=0,l=0;for(let h=0;h<t.length;++h)for(l=l<<8|t[h],c+=8;c>r;)c-=r,o+=e[i&l>>c];if(c&&(o+=e[i&l<<r-c]),n)for(;o.length*r&7;)o+="=";return o},_r=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Va({prefix:e,name:t,encode(i){return Sv(i,n,r)},decode(i){return Iv(i,n,r,t)}}),Ov=Va({prefix:"\0",name:"identity",encode:t=>bv(t),decode:t=>yv(t)});var Av=Object.freeze({__proto__:null,identity:Ov});const Dv=_r({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $v=Object.freeze({__proto__:null,base2:Dv});const Pv=_r({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Tv=Object.freeze({__proto__:null,base8:Pv});const Nv=_o({prefix:"9",name:"base10",alphabet:"0123456789"});var Rv=Object.freeze({__proto__:null,base10:Nv});const Lv=_r({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Mv=_r({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Uv=Object.freeze({__proto__:null,base16:Lv,base16upper:Mv});const jv=_r({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Fv=_r({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Bv=_r({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kv=_r({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Hv=_r({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zv=_r({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Wv=_r({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qv=_r({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Vv=_r({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Kv=Object.freeze({__proto__:null,base32:jv,base32upper:Fv,base32pad:Bv,base32padupper:kv,base32hex:Hv,base32hexupper:zv,base32hexpad:Wv,base32hexpadupper:qv,base32z:Vv});const Gv=_o({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Zv=_o({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Yv=Object.freeze({__proto__:null,base36:Gv,base36upper:Zv});const Jv=_o({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Xv=_o({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Qv=Object.freeze({__proto__:null,base58btc:Jv,base58flickr:Xv});const ey=_r({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ty=_r({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ry=_r({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ny=_r({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var iy=Object.freeze({__proto__:null,base64:ey,base64pad:ty,base64url:ry,base64urlpad:ny});const Fd=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),sy=Fd.reduce((t,e,r)=>(t[r]=e,t),[]),oy=Fd.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function ay(t){return t.reduce((e,r)=>(e+=sy[r],e),"")}function cy(t){const e=[];for(const r of t){const n=oy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const ly=Va({prefix:"\u{1F680}",name:"base256emoji",encode:ay,decode:cy});var uy=Object.freeze({__proto__:null,base256emoji:ly}),hy=kd,Bd=128,fy=127,dy=~fy,py=Math.pow(2,31);function kd(t,e,r){e=e||[],r=r||0;for(var n=r;t>=py;)e[r++]=t&255|Bd,t/=128;for(;t&dy;)e[r++]=t&255|Bd,t>>>=7;return e[r]=t|0,kd.bytes=r-n+1,e}var gy=fu,my=128,Hd=127;function fu(t,n){var r=0,n=n||0,i=0,o=n,c,l=t.length;do{if(o>=l)throw fu.bytes=0,new RangeError("Could not decode varint");c=t[o++],r+=i<28?(c&Hd)<<i:(c&Hd)*Math.pow(2,i),i+=7}while(c>=my);return fu.bytes=o-n,r}var wy=Math.pow(2,7),vy=Math.pow(2,14),yy=Math.pow(2,21),by=Math.pow(2,28),_y=Math.pow(2,35),Ey=Math.pow(2,42),xy=Math.pow(2,49),Cy=Math.pow(2,56),Iy=Math.pow(2,63),Sy=function(t){return t<wy?1:t<vy?2:t<yy?3:t<by?4:t<_y?5:t<Ey?6:t<xy?7:t<Cy?8:t<Iy?9:10},Oy={encode:hy,decode:gy,encodingLength:Sy},zd=Oy;const Wd=(t,e,r=0)=>(zd.encode(t,e,r),e),qd=t=>zd.encodingLength(t),du=(t,e)=>{const r=e.byteLength,n=qd(t),i=n+qd(r),o=new Uint8Array(i+r);return Wd(t,o,0),Wd(r,o,n),o.set(e,i),new Ay(t,r,e,o)};class Ay{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Vd=({name:t,code:e,encode:r})=>new Dy(t,e,r);class Dy{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?du(this.code,r):r.then(n=>du(this.code,n))}else throw Error("Unknown type, must be binary type")}}const Kd=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),$y=Vd({name:"sha2-256",code:18,encode:Kd("SHA-256")}),Py=Vd({name:"sha2-512",code:19,encode:Kd("SHA-512")});var Ty=Object.freeze({__proto__:null,sha256:$y,sha512:Py});const Gd=0,Ny="identity",Zd=Ud;var Ry=Object.freeze({__proto__:null,identity:{code:Gd,name:Ny,encode:Zd,digest:t=>du(Gd,Zd(t))}});new TextEncoder,new TextDecoder;const Yd={...Av,...$v,...Tv,...Rv,...Uv,...Kv,...Yv,...Qv,...iy,...uy};({...Ty,...Ry});function Jd(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Xd=Jd("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),pu=Jd("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Md(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Qd={utf8:Xd,"utf-8":Xd,hex:Yd.base16,latin1:pu,ascii:pu,binary:pu,...Yd};function Hr(t,e="utf8"){const r=Qd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?uu(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function Dr(t,e="utf8"){const r=Qd[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var e1=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Ly=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),My=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Uy=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),jy=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Fy=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),By=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ky=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,t1=3,Hy=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",By]],r1=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function zy(t){return t?n1(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Fy:typeof navigator<"u"?n1(navigator.userAgent):Vy()}function Wy(t){return t!==""&&Hy.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function n1(t){var e=Wy(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new jy;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<t1&&(i=e1(e1([],i,!0),Ky(t1-i.length),!0)):i=[];var o=i.join("."),c=qy(t),l=ky.exec(t);return l&&l[1]?new Uy(r,o,c,l[1]):new Ly(r,o,c)}function qy(t){for(var e=0,r=r1.length;e<r;e++){var n=r1[e],i=n[0],o=n[1],c=o.exec(t);if(c)return i}return null}function Vy(){var t=typeof process<"u"&&process.version;return t?new My(process.version.slice(1)):null}function Ky(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var De={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var gu=function(t,e){return gu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},gu(t,e)};function Gy(t,e){gu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var mu=function(){return mu=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mu.apply(this,arguments)};function Zy(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Yy(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(i<3?c(o):i>3?c(e,r,o):c(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function Jy(t,e){return function(r,n){e(r,n,t)}}function Xy(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Qy(t,e,r,n){function i(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function l(v){try{f(n.next(v))}catch(x){c(x)}}function h(v){try{f(n.throw(v))}catch(x){c(x)}}function f(v){v.done?o(v.value):i(v.value).then(l,h)}f((n=n.apply(t,e||[])).next())})}function e5(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(v){return h([f,v])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(v){f=[6,v],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function t5(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function r5(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function wu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i1(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function n5(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i1(arguments[e]));return t}function i5(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,i++)n[i]=o[c];return n}function Eo(t){return this instanceof Eo?(this.v=t,this):new Eo(t)}function s5(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(_){n[_]&&(i[_]=function(S){return new Promise(function(P,j){o.push([_,S,P,j])>1||l(_,S)})})}function l(_,S){try{h(n[_](S))}catch(P){x(o[0][3],P)}}function h(_){_.value instanceof Eo?Promise.resolve(_.value.v).then(f,v):x(o[0][2],_)}function f(_){l("next",_)}function v(_){l("throw",_)}function x(_,S){_(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function o5(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(c){return(r=!r)?{value:Eo(t[i](c)),done:i==="return"}:o?o(c):c}:o}}function a5(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof wu=="function"?wu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(l,h){c=t[o](c),i(l,h,c.done,c.value)})}}function i(o,c,l,h){Promise.resolve(h).then(function(f){o({value:f,done:l})},c)}}function c5(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function l5(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function u5(t){return t&&t.__esModule?t:{default:t}}function h5(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function f5(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var d5=Object.freeze({__proto__:null,__extends:Gy,get __assign(){return mu},__rest:Zy,__decorate:Yy,__param:Jy,__metadata:Xy,__awaiter:Qy,__generator:e5,__createBinding:t5,__exportStar:r5,__values:wu,__read:i1,__spread:n5,__spreadArrays:i5,__await:Eo,__asyncGenerator:s5,__asyncDelegator:o5,__asyncValues:a5,__makeTemplateObject:c5,__importStar:l5,__importDefault:u5,__classPrivateFieldGet:h5,__classPrivateFieldSet:f5}),Ka=Ui(d5),vu={},xo={},s1;function p5(){if(s1)return xo;s1=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return xo.delay=t,xo}var ji={},yu={},Fi={},o1;function g5(){return o1||(o1=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.ONE_THOUSAND=Fi.ONE_HUNDRED=void 0,Fi.ONE_HUNDRED=100,Fi.ONE_THOUSAND=1e3),Fi}var bu={},a1;function m5(){return a1||(a1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(bu)),bu}var c1;function l1(){return c1||(c1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ka;e.__exportStar(g5(),t),e.__exportStar(m5(),t)}(yu)),yu}var u1;function w5(){if(u1)return ji;u1=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.fromMiliseconds=ji.toMiliseconds=void 0;const t=l1();function e(n){return n*t.ONE_THOUSAND}ji.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return ji.fromMiliseconds=r,ji}var h1;function v5(){return h1||(h1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ka;e.__exportStar(p5(),t),e.__exportStar(w5(),t)}(vu)),vu}var Cs={},f1;function y5(){if(f1)return Cs;f1=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Cs.Watch=t,Cs.default=t,Cs}var _u={},Co={},d1;function b5(){if(d1)return Co;d1=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.IWatch=void 0;class t{}return Co.IWatch=t,Co}var p1;function _5(){return p1||(p1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Ka.__exportStar(b5(),t)}(_u)),_u}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Ka;e.__exportStar(v5(),t),e.__exportStar(y5(),t),e.__exportStar(_5(),t),e.__exportStar(l1(),t)})(De);var At={};Object.defineProperty(At,"__esModule",{value:!0}),At.getLocalStorage=At.getLocalStorageOrThrow=At.getCrypto=At.getCryptoOrThrow=m1=At.getLocation=At.getLocationOrThrow=Eu=At.getNavigator=At.getNavigatorOrThrow=g1=At.getDocument=At.getDocumentOrThrow=At.getFromWindowOrThrow=At.getFromWindow=void 0;function Bi(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}At.getFromWindow=Bi;function Is(t){const e=Bi(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}At.getFromWindowOrThrow=Is;function E5(){return Is("document")}At.getDocumentOrThrow=E5;function x5(){return Bi("document")}var g1=At.getDocument=x5;function C5(){return Is("navigator")}At.getNavigatorOrThrow=C5;function I5(){return Bi("navigator")}var Eu=At.getNavigator=I5;function S5(){return Is("location")}At.getLocationOrThrow=S5;function O5(){return Bi("location")}var m1=At.getLocation=O5;function A5(){return Is("crypto")}At.getCryptoOrThrow=A5;function D5(){return Bi("crypto")}At.getCrypto=D5;function $5(){return Is("localStorage")}At.getLocalStorageOrThrow=$5;function P5(){return Bi("localStorage")}At.getLocalStorage=P5;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});var w1=xu.getWindowMetadata=void 0;const v1=At;function T5(){let t,e;try{t=v1.getDocumentOrThrow(),e=v1.getLocationOrThrow()}catch{return null}function r(){const x=t.getElementsByTagName("link"),_=[];for(let S=0;S<x.length;S++){const P=x[S],j=P.getAttribute("rel");if(j&&j.toLowerCase().indexOf("icon")>-1){const H=P.getAttribute("href");if(H)if(H.toLowerCase().indexOf("https:")===-1&&H.toLowerCase().indexOf("http:")===-1&&H.indexOf("//")!==0){let Z=e.protocol+"//"+e.host;if(H.indexOf("/")===0)Z+=H;else{const R=e.pathname.split("/");R.pop();const L=R.join("/");Z+=L+"/"+H}_.push(Z)}else if(H.indexOf("//")===0){const Z=e.protocol+H;_.push(Z)}else _.push(H)}}return _}function n(...x){const _=t.getElementsByTagName("meta");for(let S=0;S<_.length;S++){const P=_[S],j=["itemprop","property","name"].map(H=>P.getAttribute(H)).filter(H=>H?x.includes(H):!1);if(j.length&&j){const H=P.getAttribute("content");if(H)return H}}return""}function i(){let x=n("name","og:site_name","og:title","twitter:title");return x||(x=t.title),x}function o(){return n("description","og:description","twitter:description","keywords")}const c=i(),l=o(),h=e.origin,f=r();return{description:l,url:h,icons:f,name:c}}w1=xu.getWindowMetadata=T5;var Io={},N5=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),y1="%[a-f0-9]{2}",b1=new RegExp("("+y1+")|([^%]+?)","gi"),_1=new RegExp("("+y1+")+","gi");function Cu(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],Cu(r),Cu(n))}function R5(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(b1)||[],r=1;r<e.length;r++)t=Cu(e,r).join(""),e=t.match(b1)||[];return t}}function L5(t){for(var e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=_1.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var n=R5(r[0]);n!==r[0]&&(e[r[0]]=n)}r=_1.exec(t)}e["%C2"]="\uFFFD";for(var i=Object.keys(e),o=0;o<i.length;o++){var c=i[o];t=t.replace(new RegExp(c,"g"),e[c])}return t}var M5=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return L5(t)}},U5=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},j5=function(t,e){for(var r={},n=Object.keys(t),i=Array.isArray(e),o=0;o<n.length;o++){var c=n[o],l=t[c];(i?e.indexOf(c)!==-1:e(c,l,t))&&(r[c]=l)}return r};(function(t){const e=N5,r=M5,n=U5,i=j5,o=R=>R==null,c=Symbol("encodeFragmentIdentifier");function l(R){switch(R.arrayFormat){case"index":return L=>($,T)=>{const I=$.length;return T===void 0||R.skipNull&&T===null||R.skipEmptyString&&T===""?$:T===null?[...$,[v(L,R),"[",I,"]"].join("")]:[...$,[v(L,R),"[",v(I,R),"]=",v(T,R)].join("")]};case"bracket":return L=>($,T)=>T===void 0||R.skipNull&&T===null||R.skipEmptyString&&T===""?$:T===null?[...$,[v(L,R),"[]"].join("")]:[...$,[v(L,R),"[]=",v(T,R)].join("")];case"colon-list-separator":return L=>($,T)=>T===void 0||R.skipNull&&T===null||R.skipEmptyString&&T===""?$:T===null?[...$,[v(L,R),":list="].join("")]:[...$,[v(L,R),":list=",v(T,R)].join("")];case"comma":case"separator":case"bracket-separator":{const L=R.arrayFormat==="bracket-separator"?"[]=":"=";return $=>(T,I)=>I===void 0||R.skipNull&&I===null||R.skipEmptyString&&I===""?T:(I=I===null?"":I,T.length===0?[[v($,R),L,v(I,R)].join("")]:[[T,v(I,R)].join(R.arrayFormatSeparator)])}default:return L=>($,T)=>T===void 0||R.skipNull&&T===null||R.skipEmptyString&&T===""?$:T===null?[...$,v(L,R)]:[...$,[v(L,R),"=",v(T,R)].join("")]}}function h(R){let L;switch(R.arrayFormat){case"index":return($,T,I)=>{if(L=/\[(\d*)\]$/.exec($),$=$.replace(/\[\d*\]$/,""),!L){I[$]=T;return}I[$]===void 0&&(I[$]={}),I[$][L[1]]=T};case"bracket":return($,T,I)=>{if(L=/(\[\])$/.exec($),$=$.replace(/\[\]$/,""),!L){I[$]=T;return}if(I[$]===void 0){I[$]=[T];return}I[$]=[].concat(I[$],T)};case"colon-list-separator":return($,T,I)=>{if(L=/(:list)$/.exec($),$=$.replace(/:list$/,""),!L){I[$]=T;return}if(I[$]===void 0){I[$]=[T];return}I[$]=[].concat(I[$],T)};case"comma":case"separator":return($,T,I)=>{const d=typeof T=="string"&&T.includes(R.arrayFormatSeparator),E=typeof T=="string"&&!d&&x(T,R).includes(R.arrayFormatSeparator);T=E?x(T,R):T;const J=d||E?T.split(R.arrayFormatSeparator).map(z=>x(z,R)):T===null?T:x(T,R);I[$]=J};case"bracket-separator":return($,T,I)=>{const d=/(\[\])$/.test($);if($=$.replace(/\[\]$/,""),!d){I[$]=T&&x(T,R);return}const E=T===null?[]:T.split(R.arrayFormatSeparator).map(J=>x(J,R));if(I[$]===void 0){I[$]=E;return}I[$]=[].concat(I[$],E)};default:return($,T,I)=>{if(I[$]===void 0){I[$]=T;return}I[$]=[].concat(I[$],T)}}}function f(R){if(typeof R!="string"||R.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function v(R,L){return L.encode?L.strict?e(R):encodeURIComponent(R):R}function x(R,L){return L.decode?r(R):R}function _(R){return Array.isArray(R)?R.sort():typeof R=="object"?_(Object.keys(R)).sort((L,$)=>Number(L)-Number($)).map(L=>R[L]):R}function S(R){const L=R.indexOf("#");return L!==-1&&(R=R.slice(0,L)),R}function P(R){let L="";const $=R.indexOf("#");return $!==-1&&(L=R.slice($)),L}function j(R){R=S(R);const L=R.indexOf("?");return L===-1?"":R.slice(L+1)}function H(R,L){return L.parseNumbers&&!Number.isNaN(Number(R))&&typeof R=="string"&&R.trim()!==""?R=Number(R):L.parseBooleans&&R!==null&&(R.toLowerCase()==="true"||R.toLowerCase()==="false")&&(R=R.toLowerCase()==="true"),R}function Z(R,L){L=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},L),f(L.arrayFormatSeparator);const $=h(L),T=Object.create(null);if(typeof R!="string"||(R=R.trim().replace(/^[?#&]/,""),!R))return T;for(const I of R.split("&")){if(I==="")continue;let[d,E]=n(L.decode?I.replace(/\+/g," "):I,"=");E=E===void 0?null:["comma","separator","bracket-separator"].includes(L.arrayFormat)?E:x(E,L),$(x(d,L),E,T)}for(const I of Object.keys(T)){const d=T[I];if(typeof d=="object"&&d!==null)for(const E of Object.keys(d))d[E]=H(d[E],L);else T[I]=H(d,L)}return L.sort===!1?T:(L.sort===!0?Object.keys(T).sort():Object.keys(T).sort(L.sort)).reduce((I,d)=>{const E=T[d];return E&&typeof E=="object"&&!Array.isArray(E)?I[d]=_(E):I[d]=E,I},Object.create(null))}t.extract=j,t.parse=Z,t.stringify=(R,L)=>{if(!R)return"";L=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},L),f(L.arrayFormatSeparator);const $=E=>L.skipNull&&o(R[E])||L.skipEmptyString&&R[E]==="",T=l(L),I={};for(const E of Object.keys(R))$(E)||(I[E]=R[E]);const d=Object.keys(I);return L.sort!==!1&&d.sort(L.sort),d.map(E=>{const J=R[E];return J===void 0?"":J===null?v(E,L):Array.isArray(J)?J.length===0&&L.arrayFormat==="bracket-separator"?v(E,L)+"[]":J.reduce(T(E),[]).join("&"):v(E,L)+"="+v(J,L)}).filter(E=>E.length>0).join("&")},t.parseUrl=(R,L)=>{L=Object.assign({decode:!0},L);const[$,T]=n(R,"#");return Object.assign({url:$.split("?")[0]||"",query:Z(j(R),L)},L&&L.parseFragmentIdentifier&&T?{fragmentIdentifier:x(T,L)}:{})},t.stringifyUrl=(R,L)=>{L=Object.assign({encode:!0,strict:!0,[c]:!0},L);const $=S(R.url).split("?")[0]||"",T=t.extract(R.url),I=t.parse(T,{sort:!1}),d=Object.assign(I,R.query);let E=t.stringify(d,L);E&&(E=`?${E}`);let J=P(R.url);return R.fragmentIdentifier&&(J=`#${L[c]?v(R.fragmentIdentifier,L):R.fragmentIdentifier}`),`${$}${E}${J}`},t.pick=(R,L,$)=>{$=Object.assign({parseFragmentIdentifier:!0,[c]:!1},$);const{url:T,query:I,fragmentIdentifier:d}=t.parseUrl(R,$);return t.stringifyUrl({url:T,query:i(I,L),fragmentIdentifier:d},$)},t.exclude=(R,L,$)=>{const T=Array.isArray(L)?I=>!L.includes(I):(I,d)=>!L(I,d);return t.pick(R,T,$)}})(Io);const F5={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function B5(t,e=[]){const r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;const i=t[n];r.push(...i.accounts)}),r}function E1(t,e){return t.includes(":")?[t]:e.chains||[]}const x1="base10",$r="base16",Iu="base64pad",Su="utf8",C1=0,ki=1,k5=0,I1=1,Ou=12,Au=32;function H5(){const t=lu.generateKeyPair();return{privateKey:Dr(t.secretKey,$r),publicKey:Dr(t.publicKey,$r)}}function Du(){const t=xs.randomBytes(Au);return Dr(t,$r)}function z5(t,e){const r=lu.sharedKey(Hr(t,$r),Hr(e,$r)),n=new sv(qa.SHA256,r).expand(Au);return Dr(n,$r)}function W5(t){const e=qa.hash(Hr(t,$r));return Dr(e,$r)}function Ss(t){const e=qa.hash(Hr(t,Su));return Dr(e,$r)}function q5(t){return Hr(`${t}`,x1)}function So(t){return Number(Dr(t,x1))}function V5(t){const e=q5(typeof t.type<"u"?t.type:C1);if(So(e)===ki&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Hr(t.senderPublicKey,$r):void 0,n=typeof t.iv<"u"?Hr(t.iv,$r):xs.randomBytes(Ou),i=new ru.ChaCha20Poly1305(Hr(t.symKey,$r)).seal(n,Hr(t.message,Su));return G5({type:e,sealed:i,iv:n,senderPublicKey:r})}function K5(t){const e=new ru.ChaCha20Poly1305(Hr(t.symKey,$r)),{sealed:r,iv:n}=Ga(t.encoded),i=e.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Dr(i,Su)}function G5(t){if(So(t.type)===ki){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Dr(hu([t.type,t.senderPublicKey,t.iv,t.sealed]),Iu)}return Dr(hu([t.type,t.iv,t.sealed]),Iu)}function Ga(t){const e=Hr(t,Iu),r=e.slice(k5,I1),n=I1;if(So(r)===ki){const l=n+Au,h=l+Ou,f=e.slice(n,l),v=e.slice(l,h),x=e.slice(h);return{type:r,sealed:x,iv:v,senderPublicKey:f}}const i=n+Ou,o=e.slice(n,i),c=e.slice(i);return{type:r,sealed:c,iv:o}}function Z5(t,e){const r=Ga(t);return S1({type:So(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Dr(r.senderPublicKey,$r):void 0,receiverPublicKey:e?.receiverPublicKey})}function S1(t){const e=t?.type||C1;if(e===ki){if(typeof t?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof t?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t?.senderPublicKey,receiverPublicKey:t?.receiverPublicKey}}function O1(t){return t.type===ki&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Y5=Object.defineProperty,A1=Object.getOwnPropertySymbols,J5=Object.prototype.hasOwnProperty,X5=Object.prototype.propertyIsEnumerable,D1=(t,e,r)=>e in t?Y5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$1=(t,e)=>{for(var r in e||(e={}))J5.call(e,r)&&D1(t,r,e[r]);if(A1)for(var r of A1(e))X5.call(e,r)&&D1(t,r,e[r]);return t};const Q5="ReactNative",ui={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},eb="js";function $u(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function P1(){return!g1()&&!!Eu()&&navigator.product===Q5}function Pu(){return!$u()&&!!Eu()}function Tu(){return P1()?ui.reactNative:$u()?ui.node:Pu()?ui.browser:ui.unknown}function tb(t,e){let r=Io.parse(t);return r=$1($1({},r),e),t=Io.stringify(r),t}function rb(){return w1()||{name:"",description:"",url:"",icons:[""]}}function nb(){if(Tu()===ui.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=zy();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function ib(){var t;const e=Tu();return e===ui.browser?[e,((t=m1())==null?void 0:t.host)||"unknown"].join(":"):e}function sb(t,e,r){const n=nb(),i=ib();return[[t,e].join("-"),[eb,r].join("-"),n,i].join("/")}function ob({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:o,useOnCloseEvent:c}){const l=r.split("?"),h=sb(t,e,n),f={auth:i,ua:h,projectId:o,useOnCloseEvent:c||void 0},v=tb(l[1]||"",f);return l[0]+"?"+v}function Hi(t,e){return t.filter(r=>e.includes(r)).length===t.length}function T1(t){return Object.fromEntries(t.entries())}function N1(t){return new Map(Object.entries(t))}function Os(t=De.FIVE_MINUTES,e){const r=De.toMiliseconds(t||De.FIVE_MINUTES);let n,i,o;return{resolve:c=>{o&&n&&(clearTimeout(o),n(c))},reject:c=>{o&&i&&(clearTimeout(o),i(c))},done:()=>new Promise((c,l)=>{o=setTimeout(()=>{l(new Error(e))},r),n=c,i=l})}}function Za(t,e,r){return new Promise(async(n,i)=>{const o=setTimeout(()=>i(new Error(r)),e);try{const c=await t;n(c)}catch(c){i(c)}clearTimeout(o)})}function R1(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function ab(t){return R1("topic",t)}function cb(t){return R1("id",t)}function L1(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function En(t,e){return De.fromMiliseconds((e||Date.now())+De.toMiliseconds(t))}function hi(t){return Date.now()>=De.toMiliseconds(t)}function rr(t,e){return`${t}${e?`:${e}`:""}`}function Nu(t=[],e=[]){return[...new Set([...t,...e])]}async function lb({id:t,topic:e,wcDeepLink:r}){try{if(!r)return;const n=typeof r=="string"?JSON.parse(r):r;let i=n?.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const o=`${i}/wc?requestId=${t}&sessionTopic=${e}`,c=Tu();c===ui.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):c===ui.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(n){console.error(n)}}const ub="irn";function Ru(t){return t?.relay||{protocol:ub}}function Ya(t){const e=F5[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var hb=Object.defineProperty,M1=Object.getOwnPropertySymbols,fb=Object.prototype.hasOwnProperty,db=Object.prototype.propertyIsEnumerable,U1=(t,e,r)=>e in t?hb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,pb=(t,e)=>{for(var r in e||(e={}))fb.call(e,r)&&U1(t,r,e[r]);if(M1)for(var r of M1(e))db.call(e,r)&&U1(t,r,e[r]);return t};function gb(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const o=i.replace(n,""),c=t[i];r[o]=c}}),r}function mb(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),o=typeof r<"u"?t.substring(r):"",c=Io.parse(o);return{protocol:n,topic:wb(i[0]),version:parseInt(i[1],10),symKey:c.symKey,relay:gb(c)}}function wb(t){return t.startsWith("//")?t.substring(2):t}function vb(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const o=r+e+i;t[i]&&(n[o]=t[i])}),n}function yb(t){return`${t.protocol}:${t.topic}@${t.version}?`+Io.stringify(pb({symKey:t.symKey},vb(t.relay)))}function As(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function bb(t){const e=[];return Object.values(t).forEach(r=>{e.push(...As(r.accounts))}),e}function _b(t,e){const r=[];return Object.values(t).forEach(n=>{As(n.accounts).includes(e)&&r.push(...n.methods)}),r}function Eb(t,e){const r=[];return Object.values(t).forEach(n=>{As(n.accounts).includes(e)&&r.push(...n.events)}),r}function xb(t,e){const r=Qa(t,e);if(r)throw new Error(r.message);const n={};for(const[i,o]of Object.entries(t))n[i]={methods:o.methods,events:o.events,chains:o.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return n}function Lu(t){return t.includes(":")}function Ja(t){return Lu(t)?t.split(":")[0]:t}const Cb={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Ib={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function _e(t,e){const{message:r,code:n}=Ib[t];return{message:e?`${r} ${e}`:r,code:n}}function Yt(t,e){const{message:r,code:n}=Cb[t];return{message:e?`${r} ${e}`:r,code:n}}function Pn(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function Ds(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Pr(t){return typeof t>"u"}function gr(t,e){return e&&Pr(t)?!0:typeof t=="string"&&!!t.trim().length}function Mu(t,e){return e&&Pr(t)?!0:typeof t=="number"&&!isNaN(t)}function Sb(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let o=!0;return Hi(i,n)?(n.forEach(c=>{const{accounts:l,methods:h,events:f}=t.namespaces[c],v=As(l),x=r[c];(!Hi(E1(c,x),v)||!Hi(x.methods,h)||!Hi(x.events,f))&&(o=!1)}),o):!1}function Xa(t){return gr(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function Ob(t){if(gr(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Xa(r)}}return!1}function Ab(t){if(gr(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function Db(t){var e;return(e=t?.proposer)==null?void 0:e.publicKey}function $b(t){return t?.topic}function Pb(t,e){let r=null;return gr(t?.publicKey,!1)||(r=_e("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function j1(t){let e=!0;return Pn(t)?t.length&&(e=t.every(r=>gr(r,!1))):e=!1,e}function Tb(t,e,r){let n=null;return Pn(e)&&e.length?e.forEach(i=>{n||Xa(i)||(n=Yt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Xa(t)||(n=Yt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function Nb(t,e,r){let n=null;return Object.entries(t).forEach(([i,o])=>{if(n)return;const c=Tb(i,E1(i,o),`${e} ${r}`);c&&(n=c)}),n}function Rb(t,e){let r=null;return Pn(t)?t.forEach(n=>{r||Ob(n)||(r=Yt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=Yt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Lb(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Rb(n?.accounts,`${e} namespace`);i&&(r=i)}),r}function Mb(t,e){let r=null;return j1(t?.methods)?j1(t?.events)||(r=Yt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Yt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function F1(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=Mb(n,`${e}, namespace`);i&&(r=i)}),r}function Ub(t,e,r){let n=null;if(t&&Ds(t)){const i=F1(t,e);i&&(n=i);const o=Nb(t,e,r);o&&(n=o)}else n=_e("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Qa(t,e){let r=null;if(t&&Ds(t)){const n=F1(t,e);n&&(r=n);const i=Lb(t,e);i&&(r=i)}else r=_e("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function B1(t){return gr(t.protocol,!0)}function jb(t,e){let r=!1;return e&&!t?r=!0:t&&Pn(t)&&t.length&&t.forEach(n=>{r=B1(n)}),r}function Fb(t){return typeof t=="number"}function zr(t){return typeof t<"u"&&typeof t!==null}function Bb(t){return!(!t||typeof t!="object"||!t.code||!Mu(t.code,!1)||!t.message||!gr(t.message,!1))}function kb(t){return!(Pr(t)||!gr(t.method,!1))}function Hb(t){return!(Pr(t)||Pr(t.result)&&Pr(t.error)||!Mu(t.id,!1)||!gr(t.jsonrpc,!1))}function zb(t){return!(Pr(t)||!gr(t.name,!1))}function k1(t,e){return!(!Xa(e)||!bb(t).includes(e))}function Wb(t,e,r){return gr(r,!1)?_b(t,e).includes(r):!1}function qb(t,e,r){return gr(r,!1)?Eb(t,e).includes(r):!1}function H1(t,e,r){let n=null;const i=Vb(t),o=Kb(e),c=Object.keys(i),l=Object.keys(o),h=z1(Object.keys(t)),f=z1(Object.keys(e)),v=h.filter(x=>!f.includes(x));return v.length&&(n=_e("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${v.toString()}
      Received: ${Object.keys(e).toString()}`)),Hi(c,l)||(n=_e("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${l.toString()}`)),Object.keys(e).forEach(x=>{if(!x.includes(":")||n)return;const _=As(e[x].accounts);_.includes(x)||(n=_e("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${x}
        Required: ${x}
        Approved: ${_.toString()}`))}),c.forEach(x=>{n||(Hi(i[x].methods,o[x].methods)?Hi(i[x].events,o[x].events)||(n=_e("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${x}`)):n=_e("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${x}`))}),n}function Vb(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function z1(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Kb(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=As(t[r].accounts);n?.forEach(i=>{e[i]={accounts:t[r].accounts.filter(o=>o.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Gb(t,e){return Mu(t,!1)&&t<=e.max&&t>=e.min}var ec={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Uu=function(t,e){return Uu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Uu(t,e)};function Zb(t,e){Uu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var ju=function(){return ju=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ju.apply(this,arguments)};function Yb(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function Jb(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(i<3?c(o):i>3?c(e,r,o):c(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function Xb(t,e){return function(r,n){e(r,n,t)}}function Qb(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function e6(t,e,r,n){function i(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function l(v){try{f(n.next(v))}catch(x){c(x)}}function h(v){try{f(n.throw(v))}catch(x){c(x)}}function f(v){v.done?o(v.value):i(v.value).then(l,h)}f((n=n.apply(t,e||[])).next())})}function t6(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(v){return h([f,v])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(v){f=[6,v],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function r6(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function n6(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Fu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function W1(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function i6(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(W1(arguments[e]));return t}function s6(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,i++)n[i]=o[c];return n}function Oo(t){return this instanceof Oo?(this.v=t,this):new Oo(t)}function o6(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(_){n[_]&&(i[_]=function(S){return new Promise(function(P,j){o.push([_,S,P,j])>1||l(_,S)})})}function l(_,S){try{h(n[_](S))}catch(P){x(o[0][3],P)}}function h(_){_.value instanceof Oo?Promise.resolve(_.value.v).then(f,v):x(o[0][2],_)}function f(_){l("next",_)}function v(_){l("throw",_)}function x(_,S){_(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function a6(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(c){return(r=!r)?{value:Oo(t[i](c)),done:i==="return"}:o?o(c):c}:o}}function c6(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Fu=="function"?Fu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(l,h){c=t[o](c),i(l,h,c.done,c.value)})}}function i(o,c,l,h){Promise.resolve(h).then(function(f){o({value:f,done:l})},c)}}function l6(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function u6(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function h6(t){return t&&t.__esModule?t:{default:t}}function f6(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function d6(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var p6=Object.freeze({__proto__:null,__extends:Zb,get __assign(){return ju},__rest:Yb,__decorate:Jb,__param:Xb,__metadata:Qb,__awaiter:e6,__generator:t6,__createBinding:r6,__exportStar:n6,__values:Fu,__read:W1,__spread:i6,__spreadArrays:s6,__await:Oo,__asyncGenerator:o6,__asyncDelegator:a6,__asyncValues:c6,__makeTemplateObject:l6,__importStar:u6,__importDefault:h6,__classPrivateFieldGet:f6,__classPrivateFieldSet:d6}),q1=Ui(p6),Ao={};Object.defineProperty(Ao,"__esModule",{value:!0});function g6(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}Ao.safeJsonParse=g6;function m6(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}Ao.safeJsonStringify=m6;var Do={exports:{}},V1;function w6(){return V1||(V1=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof pr<"u"&&pr.localStorage?Do.exports=pr.localStorage:typeof window<"u"&&window.localStorage?Do.exports=window.localStorage:Do.exports=new e}()),Do.exports}var Bu={},$o={},K1;function v6(){if(K1)return $o;K1=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.IKeyValueStorage=void 0;class t{}return $o.IKeyValueStorage=t,$o}var Po={},G1;function y6(){if(G1)return Po;G1=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.parseEntry=void 0;const t=Ao;function e(r){var n;return[r[0],t.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return Po.parseEntry=e,Po}var Z1;function b6(){return Z1||(Z1=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=q1;e.__exportStar(v6(),t),e.__exportStar(y6(),t)}(Bu)),Bu}Object.defineProperty(ec,"__esModule",{value:!0}),ec.KeyValueStorage=void 0;const $s=q1,Y1=Ao,_6=$s.__importDefault(w6()),E6=b6();class J1{constructor(){this.localStorage=_6.default}getKeys(){return $s.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return $s.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(E6.parseEntry)})}getItem(e){return $s.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return Y1.safeJsonParse(r)})}setItem(e,r){return $s.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,Y1.safeJsonStringify(r))})}removeItem(e){return $s.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}ec.KeyValueStorage=J1;var x6=ec.default=J1,Ps={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var ku=function(t,e){return ku=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},ku(t,e)};function C6(t,e){ku(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Hu=function(){return Hu=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Hu.apply(this,arguments)};function I6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function S6(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(i<3?c(o):i>3?c(e,r,o):c(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function O6(t,e){return function(r,n){e(r,n,t)}}function A6(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function D6(t,e,r,n){function i(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function l(v){try{f(n.next(v))}catch(x){c(x)}}function h(v){try{f(n.throw(v))}catch(x){c(x)}}function f(v){v.done?o(v.value):i(v.value).then(l,h)}f((n=n.apply(t,e||[])).next())})}function $6(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(v){return h([f,v])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(v){f=[6,v],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function P6(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function T6(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function zu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function X1(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function N6(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(X1(arguments[e]));return t}function R6(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,i++)n[i]=o[c];return n}function To(t){return this instanceof To?(this.v=t,this):new To(t)}function L6(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(_){n[_]&&(i[_]=function(S){return new Promise(function(P,j){o.push([_,S,P,j])>1||l(_,S)})})}function l(_,S){try{h(n[_](S))}catch(P){x(o[0][3],P)}}function h(_){_.value instanceof To?Promise.resolve(_.value.v).then(f,v):x(o[0][2],_)}function f(_){l("next",_)}function v(_){l("throw",_)}function x(_,S){_(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function M6(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(c){return(r=!r)?{value:To(t[i](c)),done:i==="return"}:o?o(c):c}:o}}function U6(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof zu=="function"?zu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(l,h){c=t[o](c),i(l,h,c.done,c.value)})}}function i(o,c,l,h){Promise.resolve(h).then(function(f){o({value:f,done:l})},c)}}function j6(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function F6(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function B6(t){return t&&t.__esModule?t:{default:t}}function k6(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function H6(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var z6=Object.freeze({__proto__:null,__extends:C6,get __assign(){return Hu},__rest:I6,__decorate:S6,__param:O6,__metadata:A6,__awaiter:D6,__generator:$6,__createBinding:P6,__exportStar:T6,__values:zu,__read:X1,__spread:N6,__spreadArrays:R6,__await:To,__asyncGenerator:L6,__asyncDelegator:M6,__asyncValues:U6,__makeTemplateObject:j6,__importStar:F6,__importDefault:B6,__classPrivateFieldGet:k6,__classPrivateFieldSet:H6}),tc=Ui(z6),No={},Wu={},Ro={};class zi{}var W6=Object.freeze({__proto__:null,IEvents:zi}),q6=Ui(W6),Q1;function V6(){if(Q1)return Ro;Q1=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.IHeartBeat=void 0;const t=q6;class e extends t.IEvents{constructor(n){super()}}return Ro.IHeartBeat=e,Ro}var ep;function tp(){return ep||(ep=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tc.__exportStar(V6(),t)}(Wu)),Wu}var qu={},Wi={},rp;function K6(){if(rp)return Wi;rp=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.HEARTBEAT_EVENTS=Wi.HEARTBEAT_INTERVAL=void 0;const t=De;return Wi.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,Wi.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Wi}var np;function ip(){return np||(np=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),tc.__exportStar(K6(),t)}(qu)),qu}var sp;function G6(){if(sp)return No;sp=1,Object.defineProperty(No,"__esModule",{value:!0}),No.HeartBeat=void 0;const t=tc,e=br.exports,r=De,n=tp(),i=ip();class o extends n.IHeartBeat{constructor(l){super(l),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=l?.interval||i.HEARTBEAT_INTERVAL}static init(l){return t.__awaiter(this,void 0,void 0,function*(){const h=new o(l);return yield h.init(),h})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(l,h){this.events.on(l,h)}once(l,h){this.events.once(l,h)}off(l,h){this.events.off(l,h)}removeListener(l,h){this.events.removeListener(l,h)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return No.HeartBeat=o,No}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=tc;e.__exportStar(G6(),t),e.__exportStar(tp(),t),e.__exportStar(ip(),t)})(Ps);var pt={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var Vu=function(t,e){return Vu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Vu(t,e)};function Z6(t,e){Vu(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Ku=function(){return Ku=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ku.apply(this,arguments)};function Y6(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function J6(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(i<3?c(o):i>3?c(e,r,o):c(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function X6(t,e){return function(r,n){e(r,n,t)}}function Q6(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function e4(t,e,r,n){function i(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function l(v){try{f(n.next(v))}catch(x){c(x)}}function h(v){try{f(n.throw(v))}catch(x){c(x)}}function f(v){v.done?o(v.value):i(v.value).then(l,h)}f((n=n.apply(t,e||[])).next())})}function t4(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(v){return h([f,v])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(v){f=[6,v],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function r4(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function n4(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Gu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function op(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function i4(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(op(arguments[e]));return t}function s4(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,i++)n[i]=o[c];return n}function Lo(t){return this instanceof Lo?(this.v=t,this):new Lo(t)}function o4(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(_){n[_]&&(i[_]=function(S){return new Promise(function(P,j){o.push([_,S,P,j])>1||l(_,S)})})}function l(_,S){try{h(n[_](S))}catch(P){x(o[0][3],P)}}function h(_){_.value instanceof Lo?Promise.resolve(_.value.v).then(f,v):x(o[0][2],_)}function f(_){l("next",_)}function v(_){l("throw",_)}function x(_,S){_(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function a4(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(c){return(r=!r)?{value:Lo(t[i](c)),done:i==="return"}:o?o(c):c}:o}}function c4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Gu=="function"?Gu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(l,h){c=t[o](c),i(l,h,c.done,c.value)})}}function i(o,c,l,h){Promise.resolve(h).then(function(f){o({value:f,done:l})},c)}}function l4(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function u4(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function h4(t){return t&&t.__esModule?t:{default:t}}function f4(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function d4(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var p4=Object.freeze({__proto__:null,__extends:Z6,get __assign(){return Ku},__rest:Y6,__decorate:J6,__param:X6,__metadata:Q6,__awaiter:e4,__generator:t4,__createBinding:r4,__exportStar:n4,__values:Gu,__read:op,__spread:i4,__spreadArrays:s4,__await:Lo,__asyncGenerator:o4,__asyncDelegator:a4,__asyncValues:c4,__makeTemplateObject:l4,__importStar:u4,__importDefault:h4,__classPrivateFieldGet:f4,__classPrivateFieldSet:d4}),g4=Ui(p4),Zu,ap;function m4(){if(ap)return Zu;ap=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}Zu=e;function e(r,n,i){var o=i&&i.stringify||t,c=1;if(typeof r=="object"&&r!==null){var l=n.length+c;if(l===1)return r;var h=new Array(l);h[0]=o(r);for(var f=1;f<l;f++)h[f]=o(n[f]);return h.join(" ")}if(typeof r!="string")return r;var v=n.length;if(v===0)return r;for(var x="",_=1-c,S=-1,P=r&&r.length||0,j=0;j<P;){if(r.charCodeAt(j)===37&&j+1<P){switch(S=S>-1?S:0,r.charCodeAt(j+1)){case 100:case 102:if(_>=v||n[_]==null)break;S<j&&(x+=r.slice(S,j)),x+=Number(n[_]),S=j+2,j++;break;case 105:if(_>=v||n[_]==null)break;S<j&&(x+=r.slice(S,j)),x+=Math.floor(Number(n[_])),S=j+2,j++;break;case 79:case 111:case 106:if(_>=v||n[_]===void 0)break;S<j&&(x+=r.slice(S,j));var H=typeof n[_];if(H==="string"){x+="'"+n[_]+"'",S=j+2,j++;break}if(H==="function"){x+=n[_].name||"<anonymous>",S=j+2,j++;break}x+=o(n[_]),S=j+2,j++;break;case 115:if(_>=v)break;S<j&&(x+=r.slice(S,j)),x+=String(n[_]),S=j+2,j++;break;case 37:S<j&&(x+=r.slice(S,j)),x+="%",S=j+2,j++,_--;break}++_}++j}return S===-1?r:(S<P&&(x+=r.slice(S)),x)}return Zu}var Yu,cp;function w4(){if(cp)return Yu;cp=1;const t=m4();Yu=i;const e=T().console||{},r={mapHttpRequest:P,mapHttpResponse:P,wrapRequestSerializer:j,wrapResponseSerializer:j,wrapErrorSerializer:j,req:P,res:P,err:_};function n(I,d){return Array.isArray(I)?I.filter(function(J){return J!=="!stdSerializers.err"}):I===!0?Object.keys(d):!1}function i(I){I=I||{},I.browser=I.browser||{};const d=I.browser.transmit;if(d&&typeof d.send!="function")throw Error("pino: transmit option must have a send function");const E=I.browser.write||e;I.browser.write&&(I.browser.asObject=!0);const J=I.serializers||{},z=n(I.browser.serialize,J);let ee=I.browser.serialize;Array.isArray(I.browser.serialize)&&I.browser.serialize.indexOf("!stdSerializers.err")>-1&&(ee=!1);const de=["error","fatal","warn","info","debug","trace"];typeof E=="function"&&(E.error=E.fatal=E.warn=E.info=E.debug=E.trace=E),I.enabled===!1&&(I.level="silent");const me=I.level||"info",O=Object.create(E);O.log||(O.log=H),Object.defineProperty(O,"levelVal",{get:ce}),Object.defineProperty(O,"level",{get:le,set:re});const U={transmit:d,serialize:z,asObject:I.browser.asObject,levels:de,timestamp:S(I)};O.levels=i.levels,O.level=me,O.setMaxListeners=O.getMaxListeners=O.emit=O.addListener=O.on=O.prependListener=O.once=O.prependOnceListener=O.removeListener=O.removeAllListeners=O.listeners=O.listenerCount=O.eventNames=O.write=O.flush=H,O.serializers=J,O._serialize=z,O._stdErrSerialize=ee,O.child=ne,d&&(O._logEvent=x());function ce(){return this.level==="silent"?1/0:this.levels.values[this.level]}function le(){return this._level}function re(ae){if(ae!=="silent"&&!this.levels.values[ae])throw Error("unknown level "+ae);this._level=ae,o(U,O,"error","log"),o(U,O,"fatal","error"),o(U,O,"warn","error"),o(U,O,"info","log"),o(U,O,"debug","log"),o(U,O,"trace","log")}function ne(ae,ie){if(!ae)throw new Error("missing bindings for child Pino");ie=ie||{},z&&ae.serializers&&(ie.serializers=ae.serializers);const Ae=ie.serializers;if(z&&Ae){var ge=Object.assign({},J,Ae),Be=I.browser.serialize===!0?Object.keys(ge):z;delete ae.serializers,h([ae],Be,ge,this._stdErrSerialize)}function ye(Me){this._childLevel=(Me._childLevel|0)+1,this.error=f(Me,ae,"error"),this.fatal=f(Me,ae,"fatal"),this.warn=f(Me,ae,"warn"),this.info=f(Me,ae,"info"),this.debug=f(Me,ae,"debug"),this.trace=f(Me,ae,"trace"),ge&&(this.serializers=ge,this._serialize=Be),d&&(this._logEvent=x([].concat(Me._logEvent.bindings,ae)))}return ye.prototype=this,new ye(this)}return O}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:Z,epochTime:R,unixTime:L,isoTime:$});function o(I,d,E,J){const z=Object.getPrototypeOf(d);d[E]=d.levelVal>d.levels.values[E]?H:z[E]?z[E]:e[E]||e[J]||H,c(I,d,E)}function c(I,d,E){!I.transmit&&d[E]===H||(d[E]=function(J){return function(){const ee=I.timestamp(),de=new Array(arguments.length),me=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var O=0;O<de.length;O++)de[O]=arguments[O];if(I.serialize&&!I.asObject&&h(de,this._serialize,this.serializers,this._stdErrSerialize),I.asObject?J.call(me,l(this,E,de,ee)):J.apply(me,de),I.transmit){const U=I.transmit.level||d.level,ce=i.levels.values[U],le=i.levels.values[E];if(le<ce)return;v(this,{ts:ee,methodLevel:E,methodValue:le,transmitLevel:U,transmitValue:i.levels.values[I.transmit.level||d.level],send:I.transmit.send,val:d.levelVal},de)}}}(d[E]))}function l(I,d,E,J){I._serialize&&h(E,I._serialize,I.serializers,I._stdErrSerialize);const z=E.slice();let ee=z[0];const de={};J&&(de.time=J),de.level=i.levels.values[d];let me=(I._childLevel|0)+1;if(me<1&&(me=1),ee!==null&&typeof ee=="object"){for(;me--&&typeof z[0]=="object";)Object.assign(de,z.shift());ee=z.length?t(z.shift(),z):void 0}else typeof ee=="string"&&(ee=t(z.shift(),z));return ee!==void 0&&(de.msg=ee),de}function h(I,d,E,J){for(const z in I)if(J&&I[z]instanceof Error)I[z]=i.stdSerializers.err(I[z]);else if(typeof I[z]=="object"&&!Array.isArray(I[z]))for(const ee in I[z])d&&d.indexOf(ee)>-1&&ee in E&&(I[z][ee]=E[ee](I[z][ee]))}function f(I,d,E){return function(){const J=new Array(1+arguments.length);J[0]=d;for(var z=1;z<J.length;z++)J[z]=arguments[z-1];return I[E].apply(this,J)}}function v(I,d,E){const J=d.send,z=d.ts,ee=d.methodLevel,de=d.methodValue,me=d.val,O=I._logEvent.bindings;h(E,I._serialize||Object.keys(I.serializers),I.serializers,I._stdErrSerialize===void 0?!0:I._stdErrSerialize),I._logEvent.ts=z,I._logEvent.messages=E.filter(function(U){return O.indexOf(U)===-1}),I._logEvent.level.label=ee,I._logEvent.level.value=de,J(ee,I._logEvent,me),I._logEvent=x(O)}function x(I){return{ts:0,messages:[],bindings:I||[],level:{label:"",value:0}}}function _(I){const d={type:I.constructor.name,msg:I.message,stack:I.stack};for(const E in I)d[E]===void 0&&(d[E]=I[E]);return d}function S(I){return typeof I.timestamp=="function"?I.timestamp:I.timestamp===!1?Z:R}function P(){return{}}function j(I){return I}function H(){}function Z(){return!1}function R(){return Date.now()}function L(){return Math.round(Date.now()/1e3)}function $(){return new Date(Date.now()).toISOString()}function T(){function I(d){return typeof d<"u"&&d}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return I(self)||I(window)||I(this)||{}}}return Yu}var qi={},lp;function up(){return lp||(lp=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.PINO_CUSTOM_CONTEXT_KEY=qi.PINO_LOGGER_DEFAULTS=void 0,qi.PINO_LOGGER_DEFAULTS={level:"info"},qi.PINO_CUSTOM_CONTEXT_KEY="custom_context"),qi}var Tr={},hp;function v4(){if(hp)return Tr;hp=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.generateChildLogger=Tr.formatChildLoggerContext=Tr.getLoggerContext=Tr.setBrowserLoggerContext=Tr.getBrowserLoggerContext=Tr.getDefaultLoggerOptions=void 0;const t=up();function e(l){return Object.assign(Object.assign({},l),{level:l?.level||t.PINO_LOGGER_DEFAULTS.level})}Tr.getDefaultLoggerOptions=e;function r(l,h=t.PINO_CUSTOM_CONTEXT_KEY){return l[h]||""}Tr.getBrowserLoggerContext=r;function n(l,h,f=t.PINO_CUSTOM_CONTEXT_KEY){return l[f]=h,l}Tr.setBrowserLoggerContext=n;function i(l,h=t.PINO_CUSTOM_CONTEXT_KEY){let f="";return typeof l.bindings>"u"?f=r(l,h):f=l.bindings().context||"",f}Tr.getLoggerContext=i;function o(l,h,f=t.PINO_CUSTOM_CONTEXT_KEY){const v=i(l,f);return v.trim()?`${v}/${h}`:h}Tr.formatChildLoggerContext=o;function c(l,h,f=t.PINO_CUSTOM_CONTEXT_KEY){const v=o(l,h,f),x=l.child({context:v});return n(x,v,f)}return Tr.generateChildLogger=c,Tr}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=g4,r=e.__importDefault(w4());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(up(),t),e.__exportStar(v4(),t)})(pt);class y4 extends zi{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class b4 extends zi{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class _4{constructor(e,r){this.logger=e,this.core=r}}class E4 extends zi{constructor(e,r){super(),this.relayer=e,this.logger=r}}class x4 extends zi{constructor(e){super()}}class C4{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}}class I4 extends zi{constructor(e,r){super(),this.relayer=e,this.logger=r}}class S4 extends zi{constructor(e,r){super(),this.core=e,this.logger=r}}class O4{constructor(e,r){this.projectId=e,this.logger=r}}class A4{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class D4{constructor(e){this.client=e}}const $4=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),P4=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ju(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return P4(t)}catch{return t}}function Mo(t){return typeof t=="string"?t:$4(t)||""}var Xu={},fp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=et,r=Yr;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var n=function(){function l(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return l.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},l.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},l.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},l.prototype.update=function(h,f){if(f===void 0&&(f=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var v=0;if(this._bytesHashed+=f,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&f>0;)this._buffer[this._bufferLength++]=h[v++],f--;this._bufferLength===this.blockSize&&(o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(f>=this.blockSize&&(v=o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,v,f),f%=this.blockSize);f>0;)this._buffer[this._bufferLength++]=h[v++],f--;return this},l.prototype.finish=function(h){if(!this._finished){var f=this._bytesHashed,v=this._bufferLength,x=f/536870912|0,_=f<<3,S=f%128<112?128:256;this._buffer[v]=128;for(var P=v+1;P<S-8;P++)this._buffer[P]=0;e.writeUint32BE(x,this._buffer,S-8),e.writeUint32BE(_,this._buffer,S-4),o(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,S),this._finished=!0}for(var P=0;P<this.digestLength/8;P++)e.writeUint32BE(this._stateHi[P],h,P*8),e.writeUint32BE(this._stateLo[P],h,P*8+4);return this},l.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},l.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},l.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},l.prototype.cleanSavedState=function(h){r.wipe(h.stateHi),r.wipe(h.stateLo),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},l}();t.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function o(l,h,f,v,x,_,S){for(var P=f[0],j=f[1],H=f[2],Z=f[3],R=f[4],L=f[5],$=f[6],T=f[7],I=v[0],d=v[1],E=v[2],J=v[3],z=v[4],ee=v[5],de=v[6],me=v[7],O,U,ce,le,re,ne,ae,ie;S>=128;){for(var Ae=0;Ae<16;Ae++){var ge=8*Ae+_;l[Ae]=e.readUint32BE(x,ge),h[Ae]=e.readUint32BE(x,ge+4)}for(var Ae=0;Ae<80;Ae++){var Be=P,ye=j,Me=H,X=Z,Y=R,W=L,w=$,F=T,we=I,ve=d,Ue=E,nt=J,at=z,Ge=ee,Dt=de,$t=me;if(O=T,U=me,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=(R>>>14|z<<32-14)^(R>>>18|z<<32-18)^(z>>>41-32|R<<32-(41-32)),U=(z>>>14|R<<32-14)^(z>>>18|R<<32-18)^(R>>>41-32|z<<32-(41-32)),re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,O=R&L^~R&$,U=z&ee^~z&de,re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,O=i[Ae*2],U=i[Ae*2+1],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,O=l[Ae%16],U=h[Ae%16],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,ce=ae&65535|ie<<16,le=re&65535|ne<<16,O=ce,U=le,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=(P>>>28|I<<32-28)^(I>>>34-32|P<<32-(34-32))^(I>>>39-32|P<<32-(39-32)),U=(I>>>28|P<<32-28)^(P>>>34-32|I<<32-(34-32))^(P>>>39-32|I<<32-(39-32)),re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,O=P&j^P&H^j&H,U=I&d^I&E^d&E,re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,F=ae&65535|ie<<16,$t=re&65535|ne<<16,O=X,U=nt,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=ce,U=le,re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,X=ae&65535|ie<<16,nt=re&65535|ne<<16,j=Be,H=ye,Z=Me,R=X,L=Y,$=W,T=w,P=F,d=we,E=ve,J=Ue,z=nt,ee=at,de=Ge,me=Dt,I=$t,Ae%16===15)for(var ge=0;ge<16;ge++)O=l[ge],U=h[ge],re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=l[(ge+9)%16],U=h[(ge+9)%16],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ce=l[(ge+1)%16],le=h[(ge+1)%16],O=(ce>>>1|le<<32-1)^(ce>>>8|le<<32-8)^ce>>>7,U=(le>>>1|ce<<32-1)^(le>>>8|ce<<32-8)^(le>>>7|ce<<32-7),re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ce=l[(ge+14)%16],le=h[(ge+14)%16],O=(ce>>>19|le<<32-19)^(le>>>61-32|ce<<32-(61-32))^ce>>>6,U=(le>>>19|ce<<32-19)^(ce>>>61-32|le<<32-(61-32))^(le>>>6|ce<<32-6),re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,l[ge]=ae&65535|ie<<16,h[ge]=re&65535|ne<<16}O=P,U=I,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[0],U=v[0],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[0]=P=ae&65535|ie<<16,v[0]=I=re&65535|ne<<16,O=j,U=d,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[1],U=v[1],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[1]=j=ae&65535|ie<<16,v[1]=d=re&65535|ne<<16,O=H,U=E,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[2],U=v[2],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[2]=H=ae&65535|ie<<16,v[2]=E=re&65535|ne<<16,O=Z,U=J,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[3],U=v[3],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[3]=Z=ae&65535|ie<<16,v[3]=J=re&65535|ne<<16,O=R,U=z,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[4],U=v[4],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[4]=R=ae&65535|ie<<16,v[4]=z=re&65535|ne<<16,O=L,U=ee,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[5],U=v[5],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[5]=L=ae&65535|ie<<16,v[5]=ee=re&65535|ne<<16,O=$,U=de,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[6],U=v[6],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[6]=$=ae&65535|ie<<16,v[6]=de=re&65535|ne<<16,O=T,U=me,re=U&65535,ne=U>>>16,ae=O&65535,ie=O>>>16,O=f[7],U=v[7],re+=U&65535,ne+=U>>>16,ae+=O&65535,ie+=O>>>16,ne+=re>>>16,ae+=ne>>>16,ie+=ae>>>16,f[7]=T=ae&65535|ie<<16,v[7]=me=re&65535|ne<<16,_+=128,S-=128}return _}function c(l){var h=new n;h.update(l);var f=h.digest();return h.clean(),f}t.hash=c})(fp),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=xs,r=fp,n=Yr;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function i(X){const Y=new Float64Array(16);if(X)for(let W=0;W<X.length;W++)Y[W]=X[W];return Y}const o=new Uint8Array(32);o[0]=9;const c=i(),l=i([1]),h=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),v=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),x=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(X,Y){for(let W=0;W<16;W++)X[W]=Y[W]|0}function P(X){let Y=1;for(let W=0;W<16;W++){let w=X[W]+Y+65535;Y=Math.floor(w/65536),X[W]=w-Y*65536}X[0]+=Y-1+37*(Y-1)}function j(X,Y,W){const w=~(W-1);for(let F=0;F<16;F++){const we=w&(X[F]^Y[F]);X[F]^=we,Y[F]^=we}}function H(X,Y){const W=i(),w=i();for(let F=0;F<16;F++)w[F]=Y[F];P(w),P(w),P(w);for(let F=0;F<2;F++){W[0]=w[0]-65517;for(let ve=1;ve<15;ve++)W[ve]=w[ve]-65535-(W[ve-1]>>16&1),W[ve-1]&=65535;W[15]=w[15]-32767-(W[14]>>16&1);const we=W[15]>>16&1;W[14]&=65535,j(w,W,1-we)}for(let F=0;F<16;F++)X[2*F]=w[F]&255,X[2*F+1]=w[F]>>8}function Z(X,Y){let W=0;for(let w=0;w<32;w++)W|=X[w]^Y[w];return(1&W-1>>>8)-1}function R(X,Y){const W=new Uint8Array(32),w=new Uint8Array(32);return H(W,X),H(w,Y),Z(W,w)}function L(X){const Y=new Uint8Array(32);return H(Y,X),Y[0]&1}function $(X,Y){for(let W=0;W<16;W++)X[W]=Y[2*W]+(Y[2*W+1]<<8);X[15]&=32767}function T(X,Y,W){for(let w=0;w<16;w++)X[w]=Y[w]+W[w]}function I(X,Y,W){for(let w=0;w<16;w++)X[w]=Y[w]-W[w]}function d(X,Y,W){let w,F,we=0,ve=0,Ue=0,nt=0,at=0,Ge=0,Dt=0,$t=0,Je=0,He=0,ke=0,Ke=0,rt=0,je=0,Ze=0,b=0,p=0,m=0,D=0,B=0,K=0,Q=0,Ee=0,Ne=0,st=0,ht=0,lt=0,Ur=0,Jn=0,Si=0,cs=0,zt=W[0],Lt=W[1],Wt=W[2],qt=W[3],Ft=W[4],Mt=W[5],ir=W[6],sr=W[7],Vt=W[8],or=W[9],Kt=W[10],Xt=W[11],Gt=W[12],Pt=W[13],ar=W[14],cr=W[15];w=Y[0],we+=w*zt,ve+=w*Lt,Ue+=w*Wt,nt+=w*qt,at+=w*Ft,Ge+=w*Mt,Dt+=w*ir,$t+=w*sr,Je+=w*Vt,He+=w*or,ke+=w*Kt,Ke+=w*Xt,rt+=w*Gt,je+=w*Pt,Ze+=w*ar,b+=w*cr,w=Y[1],ve+=w*zt,Ue+=w*Lt,nt+=w*Wt,at+=w*qt,Ge+=w*Ft,Dt+=w*Mt,$t+=w*ir,Je+=w*sr,He+=w*Vt,ke+=w*or,Ke+=w*Kt,rt+=w*Xt,je+=w*Gt,Ze+=w*Pt,b+=w*ar,p+=w*cr,w=Y[2],Ue+=w*zt,nt+=w*Lt,at+=w*Wt,Ge+=w*qt,Dt+=w*Ft,$t+=w*Mt,Je+=w*ir,He+=w*sr,ke+=w*Vt,Ke+=w*or,rt+=w*Kt,je+=w*Xt,Ze+=w*Gt,b+=w*Pt,p+=w*ar,m+=w*cr,w=Y[3],nt+=w*zt,at+=w*Lt,Ge+=w*Wt,Dt+=w*qt,$t+=w*Ft,Je+=w*Mt,He+=w*ir,ke+=w*sr,Ke+=w*Vt,rt+=w*or,je+=w*Kt,Ze+=w*Xt,b+=w*Gt,p+=w*Pt,m+=w*ar,D+=w*cr,w=Y[4],at+=w*zt,Ge+=w*Lt,Dt+=w*Wt,$t+=w*qt,Je+=w*Ft,He+=w*Mt,ke+=w*ir,Ke+=w*sr,rt+=w*Vt,je+=w*or,Ze+=w*Kt,b+=w*Xt,p+=w*Gt,m+=w*Pt,D+=w*ar,B+=w*cr,w=Y[5],Ge+=w*zt,Dt+=w*Lt,$t+=w*Wt,Je+=w*qt,He+=w*Ft,ke+=w*Mt,Ke+=w*ir,rt+=w*sr,je+=w*Vt,Ze+=w*or,b+=w*Kt,p+=w*Xt,m+=w*Gt,D+=w*Pt,B+=w*ar,K+=w*cr,w=Y[6],Dt+=w*zt,$t+=w*Lt,Je+=w*Wt,He+=w*qt,ke+=w*Ft,Ke+=w*Mt,rt+=w*ir,je+=w*sr,Ze+=w*Vt,b+=w*or,p+=w*Kt,m+=w*Xt,D+=w*Gt,B+=w*Pt,K+=w*ar,Q+=w*cr,w=Y[7],$t+=w*zt,Je+=w*Lt,He+=w*Wt,ke+=w*qt,Ke+=w*Ft,rt+=w*Mt,je+=w*ir,Ze+=w*sr,b+=w*Vt,p+=w*or,m+=w*Kt,D+=w*Xt,B+=w*Gt,K+=w*Pt,Q+=w*ar,Ee+=w*cr,w=Y[8],Je+=w*zt,He+=w*Lt,ke+=w*Wt,Ke+=w*qt,rt+=w*Ft,je+=w*Mt,Ze+=w*ir,b+=w*sr,p+=w*Vt,m+=w*or,D+=w*Kt,B+=w*Xt,K+=w*Gt,Q+=w*Pt,Ee+=w*ar,Ne+=w*cr,w=Y[9],He+=w*zt,ke+=w*Lt,Ke+=w*Wt,rt+=w*qt,je+=w*Ft,Ze+=w*Mt,b+=w*ir,p+=w*sr,m+=w*Vt,D+=w*or,B+=w*Kt,K+=w*Xt,Q+=w*Gt,Ee+=w*Pt,Ne+=w*ar,st+=w*cr,w=Y[10],ke+=w*zt,Ke+=w*Lt,rt+=w*Wt,je+=w*qt,Ze+=w*Ft,b+=w*Mt,p+=w*ir,m+=w*sr,D+=w*Vt,B+=w*or,K+=w*Kt,Q+=w*Xt,Ee+=w*Gt,Ne+=w*Pt,st+=w*ar,ht+=w*cr,w=Y[11],Ke+=w*zt,rt+=w*Lt,je+=w*Wt,Ze+=w*qt,b+=w*Ft,p+=w*Mt,m+=w*ir,D+=w*sr,B+=w*Vt,K+=w*or,Q+=w*Kt,Ee+=w*Xt,Ne+=w*Gt,st+=w*Pt,ht+=w*ar,lt+=w*cr,w=Y[12],rt+=w*zt,je+=w*Lt,Ze+=w*Wt,b+=w*qt,p+=w*Ft,m+=w*Mt,D+=w*ir,B+=w*sr,K+=w*Vt,Q+=w*or,Ee+=w*Kt,Ne+=w*Xt,st+=w*Gt,ht+=w*Pt,lt+=w*ar,Ur+=w*cr,w=Y[13],je+=w*zt,Ze+=w*Lt,b+=w*Wt,p+=w*qt,m+=w*Ft,D+=w*Mt,B+=w*ir,K+=w*sr,Q+=w*Vt,Ee+=w*or,Ne+=w*Kt,st+=w*Xt,ht+=w*Gt,lt+=w*Pt,Ur+=w*ar,Jn+=w*cr,w=Y[14],Ze+=w*zt,b+=w*Lt,p+=w*Wt,m+=w*qt,D+=w*Ft,B+=w*Mt,K+=w*ir,Q+=w*sr,Ee+=w*Vt,Ne+=w*or,st+=w*Kt,ht+=w*Xt,lt+=w*Gt,Ur+=w*Pt,Jn+=w*ar,Si+=w*cr,w=Y[15],b+=w*zt,p+=w*Lt,m+=w*Wt,D+=w*qt,B+=w*Ft,K+=w*Mt,Q+=w*ir,Ee+=w*sr,Ne+=w*Vt,st+=w*or,ht+=w*Kt,lt+=w*Xt,Ur+=w*Gt,Jn+=w*Pt,Si+=w*ar,cs+=w*cr,we+=38*p,ve+=38*m,Ue+=38*D,nt+=38*B,at+=38*K,Ge+=38*Q,Dt+=38*Ee,$t+=38*Ne,Je+=38*st,He+=38*ht,ke+=38*lt,Ke+=38*Ur,rt+=38*Jn,je+=38*Si,Ze+=38*cs,F=1,w=we+F+65535,F=Math.floor(w/65536),we=w-F*65536,w=ve+F+65535,F=Math.floor(w/65536),ve=w-F*65536,w=Ue+F+65535,F=Math.floor(w/65536),Ue=w-F*65536,w=nt+F+65535,F=Math.floor(w/65536),nt=w-F*65536,w=at+F+65535,F=Math.floor(w/65536),at=w-F*65536,w=Ge+F+65535,F=Math.floor(w/65536),Ge=w-F*65536,w=Dt+F+65535,F=Math.floor(w/65536),Dt=w-F*65536,w=$t+F+65535,F=Math.floor(w/65536),$t=w-F*65536,w=Je+F+65535,F=Math.floor(w/65536),Je=w-F*65536,w=He+F+65535,F=Math.floor(w/65536),He=w-F*65536,w=ke+F+65535,F=Math.floor(w/65536),ke=w-F*65536,w=Ke+F+65535,F=Math.floor(w/65536),Ke=w-F*65536,w=rt+F+65535,F=Math.floor(w/65536),rt=w-F*65536,w=je+F+65535,F=Math.floor(w/65536),je=w-F*65536,w=Ze+F+65535,F=Math.floor(w/65536),Ze=w-F*65536,w=b+F+65535,F=Math.floor(w/65536),b=w-F*65536,we+=F-1+37*(F-1),F=1,w=we+F+65535,F=Math.floor(w/65536),we=w-F*65536,w=ve+F+65535,F=Math.floor(w/65536),ve=w-F*65536,w=Ue+F+65535,F=Math.floor(w/65536),Ue=w-F*65536,w=nt+F+65535,F=Math.floor(w/65536),nt=w-F*65536,w=at+F+65535,F=Math.floor(w/65536),at=w-F*65536,w=Ge+F+65535,F=Math.floor(w/65536),Ge=w-F*65536,w=Dt+F+65535,F=Math.floor(w/65536),Dt=w-F*65536,w=$t+F+65535,F=Math.floor(w/65536),$t=w-F*65536,w=Je+F+65535,F=Math.floor(w/65536),Je=w-F*65536,w=He+F+65535,F=Math.floor(w/65536),He=w-F*65536,w=ke+F+65535,F=Math.floor(w/65536),ke=w-F*65536,w=Ke+F+65535,F=Math.floor(w/65536),Ke=w-F*65536,w=rt+F+65535,F=Math.floor(w/65536),rt=w-F*65536,w=je+F+65535,F=Math.floor(w/65536),je=w-F*65536,w=Ze+F+65535,F=Math.floor(w/65536),Ze=w-F*65536,w=b+F+65535,F=Math.floor(w/65536),b=w-F*65536,we+=F-1+37*(F-1),X[0]=we,X[1]=ve,X[2]=Ue,X[3]=nt,X[4]=at,X[5]=Ge,X[6]=Dt,X[7]=$t,X[8]=Je,X[9]=He,X[10]=ke,X[11]=Ke,X[12]=rt,X[13]=je,X[14]=Ze,X[15]=b}function E(X,Y){d(X,Y,Y)}function J(X,Y){const W=i();let w;for(w=0;w<16;w++)W[w]=Y[w];for(w=253;w>=0;w--)E(W,W),w!==2&&w!==4&&d(W,W,Y);for(w=0;w<16;w++)X[w]=W[w]}function z(X,Y){const W=i();let w;for(w=0;w<16;w++)W[w]=Y[w];for(w=250;w>=0;w--)E(W,W),w!==1&&d(W,W,Y);for(w=0;w<16;w++)X[w]=W[w]}function ee(X,Y){const W=i(),w=i(),F=i(),we=i(),ve=i(),Ue=i(),nt=i(),at=i(),Ge=i();I(W,X[1],X[0]),I(Ge,Y[1],Y[0]),d(W,W,Ge),T(w,X[0],X[1]),T(Ge,Y[0],Y[1]),d(w,w,Ge),d(F,X[3],Y[3]),d(F,F,f),d(we,X[2],Y[2]),T(we,we,we),I(ve,w,W),I(Ue,we,F),T(nt,we,F),T(at,w,W),d(X[0],ve,Ue),d(X[1],at,nt),d(X[2],nt,Ue),d(X[3],ve,at)}function de(X,Y,W){for(let w=0;w<4;w++)j(X[w],Y[w],W)}function me(X,Y){const W=i(),w=i(),F=i();J(F,Y[2]),d(W,Y[0],F),d(w,Y[1],F),H(X,w),X[31]^=L(W)<<7}function O(X,Y,W){S(X[0],c),S(X[1],l),S(X[2],l),S(X[3],c);for(let w=255;w>=0;--w){const F=W[w/8|0]>>(w&7)&1;de(X,Y,F),ee(Y,X),ee(X,X),de(X,Y,F)}}function U(X,Y){const W=[i(),i(),i(),i()];S(W[0],v),S(W[1],x),S(W[2],l),d(W[3],v,x),O(X,W,Y)}function ce(X){if(X.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const Y=(0,r.hash)(X);Y[0]&=248,Y[31]&=127,Y[31]|=64;const W=new Uint8Array(32),w=[i(),i(),i(),i()];U(w,Y),me(W,w);const F=new Uint8Array(64);return F.set(X),F.set(W,32),{publicKey:W,secretKey:F}}t.generateKeyPairFromSeed=ce;function le(X){const Y=(0,e.randomBytes)(32,X),W=ce(Y);return(0,n.wipe)(Y),W}t.generateKeyPair=le;function re(X){if(X.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(X.subarray(32))}t.extractPublicKeyFromSecretKey=re;const ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ae(X,Y){let W,w,F,we;for(w=63;w>=32;--w){for(W=0,F=w-32,we=w-12;F<we;++F)Y[F]+=W-16*Y[w]*ne[F-(w-32)],W=Math.floor((Y[F]+128)/256),Y[F]-=W*256;Y[F]+=W,Y[w]=0}for(W=0,F=0;F<32;F++)Y[F]+=W-(Y[31]>>4)*ne[F],W=Y[F]>>8,Y[F]&=255;for(F=0;F<32;F++)Y[F]-=W*ne[F];for(w=0;w<32;w++)Y[w+1]+=Y[w]>>8,X[w]=Y[w]&255}function ie(X){const Y=new Float64Array(64);for(let W=0;W<64;W++)Y[W]=X[W];for(let W=0;W<64;W++)X[W]=0;ae(X,Y)}function Ae(X,Y){const W=new Float64Array(64),w=[i(),i(),i(),i()],F=(0,r.hash)(X.subarray(0,32));F[0]&=248,F[31]&=127,F[31]|=64;const we=new Uint8Array(64);we.set(F.subarray(32),32);const ve=new r.SHA512;ve.update(we.subarray(32)),ve.update(Y);const Ue=ve.digest();ve.clean(),ie(Ue),U(w,Ue),me(we,w),ve.reset(),ve.update(we.subarray(0,32)),ve.update(X.subarray(32)),ve.update(Y);const nt=ve.digest();ie(nt);for(let at=0;at<32;at++)W[at]=Ue[at];for(let at=0;at<32;at++)for(let Ge=0;Ge<32;Ge++)W[at+Ge]+=nt[at]*F[Ge];return ae(we.subarray(32),W),we}t.sign=Ae;function ge(X,Y){const W=i(),w=i(),F=i(),we=i(),ve=i(),Ue=i(),nt=i();return S(X[2],l),$(X[1],Y),E(F,X[1]),d(we,F,h),I(F,F,X[2]),T(we,X[2],we),E(ve,we),E(Ue,ve),d(nt,Ue,ve),d(W,nt,F),d(W,W,we),z(W,W),d(W,W,F),d(W,W,we),d(W,W,we),d(X[0],W,we),E(w,X[0]),d(w,w,we),R(w,F)&&d(X[0],X[0],_),E(w,X[0]),d(w,w,we),R(w,F)?-1:(L(X[0])===Y[31]>>7&&I(X[0],c,X[0]),d(X[3],X[0],X[1]),0)}function Be(X,Y,W){const w=new Uint8Array(32),F=[i(),i(),i(),i()],we=[i(),i(),i(),i()];if(W.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(ge(we,X))return!1;const ve=new r.SHA512;ve.update(W.subarray(0,32)),ve.update(X),ve.update(Y);const Ue=ve.digest();return ie(Ue),O(F,we,Ue),U(we,W.subarray(32)),ee(F,we),me(w,F),!Z(W,w)}t.verify=Be;function ye(X){let Y=[i(),i(),i(),i()];if(ge(Y,X))throw new Error("Ed25519: invalid public key");let W=i(),w=i(),F=Y[1];T(W,l,F),I(w,l,F),J(w,w),d(W,W,w);let we=new Uint8Array(32);return H(we,W),we}t.convertPublicKeyToX25519=ye;function Me(X){const Y=(0,r.hash)(X.subarray(0,32));Y[0]&=248,Y[31]&=127,Y[31]|=64;const W=new Uint8Array(Y.subarray(0,32));return(0,n.wipe)(Y),W}t.convertSecretKeyToX25519=Me}(Xu);const T4="EdDSA",N4="JWT",dp=".",pp="base64url",R4="utf8",L4="utf8",M4=":",U4="did",j4="key",gp="base58btc",F4="z",B4="K36",k4=32;function rc(t){return Dr(Hr(Mo(t),R4),pp)}function mp(t){const e=Hr(B4,gp),r=F4+Dr(hu([e,t]),gp);return[U4,j4,r].join(M4)}function H4(t){return Dr(t,pp)}function z4(t){return Hr([rc(t.header),rc(t.payload)].join(dp),L4)}function W4(t){return[rc(t.header),rc(t.payload),H4(t.signature)].join(dp)}function wp(t=xs.randomBytes(k4)){return Xu.generateKeyPairFromSeed(t)}async function q4(t,e,r,n,i=De.fromMiliseconds(Date.now())){const o={alg:T4,typ:N4},c=mp(n.publicKey),l=i+r,h={iss:c,sub:t,aud:e,iat:i,exp:l},f=z4({header:o,payload:h}),v=Xu.sign(n.secretKey,f);return W4({header:o,payload:h,signature:v})}const V4="PARSE_ERROR",K4="INVALID_REQUEST",G4="METHOD_NOT_FOUND",Z4="INVALID_PARAMS",vp="INTERNAL_ERROR",Qu="SERVER_ERROR",Y4=[-32700,-32600,-32601,-32602,-32603],Uo={[V4]:{code:-32700,message:"Parse error"},[K4]:{code:-32600,message:"Invalid Request"},[G4]:{code:-32601,message:"Method not found"},[Z4]:{code:-32602,message:"Invalid params"},[vp]:{code:-32603,message:"Internal error"},[Qu]:{code:-32e3,message:"Server error"}},yp=Qu;function J4(t){return Y4.includes(t)}function bp(t){return Object.keys(Uo).includes(t)?Uo[t]:Uo[yp]}function X4(t){const e=Object.values(Uo).find(r=>r.code===t);return e||Uo[yp]}function _p(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Ep={};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */var eh=function(t,e){return eh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},eh(t,e)};function Q4(t,e){eh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var th=function(){return th=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},th.apply(this,arguments)};function e_(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function t_(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var l=t.length-1;l>=0;l--)(c=t[l])&&(o=(i<3?c(o):i>3?c(e,r,o):c(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function r_(t,e){return function(r,n){e(r,n,t)}}function n_(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function i_(t,e,r,n){function i(o){return o instanceof r?o:new r(function(c){c(o)})}return new(r||(r=Promise))(function(o,c){function l(v){try{f(n.next(v))}catch(x){c(x)}}function h(v){try{f(n.throw(v))}catch(x){c(x)}}function f(v){v.done?o(v.value):i(v.value).then(l,h)}f((n=n.apply(t,e||[])).next())})}function s_(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function l(f){return function(v){return h([f,v])}}function h(f){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){r.label=f[1];break}if(f[0]===6&&r.label<o[1]){r.label=o[1],o=f;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(f);break}o[2]&&r.ops.pop(),r.trys.pop();continue}f=e.call(t,r)}catch(v){f=[6,v],i=0}finally{n=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function o_(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function a_(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function rh(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xp(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(l){c={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return o}function c_(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(xp(arguments[e]));return t}function l_(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],c=0,l=o.length;c<l;c++,i++)n[i]=o[c];return n}function jo(t){return this instanceof jo?(this.v=t,this):new jo(t)}function u_(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(_){n[_]&&(i[_]=function(S){return new Promise(function(P,j){o.push([_,S,P,j])>1||l(_,S)})})}function l(_,S){try{h(n[_](S))}catch(P){x(o[0][3],P)}}function h(_){_.value instanceof jo?Promise.resolve(_.value.v).then(f,v):x(o[0][2],_)}function f(_){l("next",_)}function v(_){l("throw",_)}function x(_,S){_(S),o.shift(),o.length&&l(o[0][0],o[0][1])}}function h_(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(c){return(r=!r)?{value:jo(t[i](c)),done:i==="return"}:o?o(c):c}:o}}function f_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof rh=="function"?rh(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(c){return new Promise(function(l,h){c=t[o](c),i(l,h,c.done,c.value)})}}function i(o,c,l,h){Promise.resolve(h).then(function(f){o({value:f,done:l})},c)}}function d_(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function p_(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function g_(t){return t&&t.__esModule?t:{default:t}}function m_(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function w_(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var v_=Object.freeze({__proto__:null,__extends:Q4,get __assign(){return th},__rest:e_,__decorate:t_,__param:r_,__metadata:n_,__awaiter:i_,__generator:s_,__createBinding:o_,__exportStar:a_,__values:rh,__read:xp,__spread:c_,__spreadArrays:l_,__await:jo,__asyncGenerator:u_,__asyncDelegator:h_,__asyncValues:f_,__makeTemplateObject:d_,__importStar:p_,__importDefault:g_,__classPrivateFieldGet:m_,__classPrivateFieldSet:w_}),y_=Ui(v_),Wn={},Cp;function b_(){if(Cp)return Wn;Cp=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.isBrowserCryptoAvailable=Wn.getSubtleCrypto=Wn.getBrowerCrypto=void 0;function t(){return pr?.crypto||pr?.msCrypto||{}}Wn.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}Wn.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return Wn.isBrowserCryptoAvailable=r,Wn}var qn={},Ip;function __(){if(Ip)return qn;Ip=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.isBrowser=qn.isNode=qn.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}qn.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}qn.isNode=e;function r(){return!t()&&!e()}return qn.isBrowser=r,qn}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=y_;e.__exportStar(b_(),t),e.__exportStar(__(),t)})(Ep);function Sp(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function nh(t=6){return BigInt(Sp(t))}function nc(t,e,r){return{id:r||Sp(),jsonrpc:"2.0",method:t,params:e}}function ih(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ic(t,e,r){return{id:t,jsonrpc:"2.0",error:E_(e,r)}}function E_(t,e){return typeof t>"u"?bp(vp):(typeof t=="string"&&(t=Object.assign(Object.assign({},bp(Qu)),{message:t})),typeof e<"u"&&(t.data=e),J4(t.code)&&(t=X4(t.code)),t)}class x_{}class C_ extends x_{constructor(){super()}}class I_ extends C_{constructor(e){super()}}const S_="^https?:",O_="^wss?:";function A_(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Op(t,e){const r=A_(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Ap(t){return Op(t,S_)}function Dp(t){return Op(t,O_)}function D_(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function $p(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function sh(t){return $p(t)&&"method"in t}function sc(t){return $p(t)&&(Vn(t)||xn(t))}function Vn(t){return"result"in t}function xn(t){return"error"in t}class fi extends I_{constructor(e){super(e),this.events=new br.exports.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(nc(e.method,e.params||[],e.id||nh().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(o){i(o)}this.events.on(`${e.id}`,o=>{xn(o)?i(o.error):n(o.result)});try{await this.connection.send(e,r)}catch(o){i(o)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),sc(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const $_=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),P_=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Pp=t=>t.split("?")[0],Tp=10,T_=$_();class N_{constructor(e){if(this.url=e,this.events=new br.exports.EventEmitter,this.registering=!1,!Dp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Mo(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!Dp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=Ep.isReactNative()?void 0:{rejectUnauthorized:!D_(e)},o=new T_(e,[],i);P_()?o.onerror=c=>{const l=c;n(this.emitError(l.error))}:o.on("error",c=>{n(this.emitError(c))}),o.onopen=()=>{this.onOpen(o),r(o)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ju(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),o=ic(e,i);this.events.emit("payload",o)}parseError(e,r=this.url){return _p(e,Pp(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Tp&&this.events.setMaxListeners(Tp)}emitError(e){const r=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Pp(this.url)}`));return this.events.emit("register_error",r),r}}var oh={exports:{}};(function(t,e){var r=200,n="__lodash_hash_undefined__",i=1,o=2,c=9007199254740991,l="[object Arguments]",h="[object Array]",f="[object AsyncFunction]",v="[object Boolean]",x="[object Date]",_="[object Error]",S="[object Function]",P="[object GeneratorFunction]",j="[object Map]",H="[object Number]",Z="[object Null]",R="[object Object]",L="[object Promise]",$="[object Proxy]",T="[object RegExp]",I="[object Set]",d="[object String]",E="[object Symbol]",J="[object Undefined]",z="[object WeakMap]",ee="[object ArrayBuffer]",de="[object DataView]",me="[object Float32Array]",O="[object Float64Array]",U="[object Int8Array]",ce="[object Int16Array]",le="[object Int32Array]",re="[object Uint8Array]",ne="[object Uint8ClampedArray]",ae="[object Uint16Array]",ie="[object Uint32Array]",Ae=/[\\^$.*+?()[\]{}|]/g,ge=/^\[object .+?Constructor\]$/,Be=/^(?:0|[1-9]\d*)$/,ye={};ye[me]=ye[O]=ye[U]=ye[ce]=ye[le]=ye[re]=ye[ne]=ye[ae]=ye[ie]=!0,ye[l]=ye[h]=ye[ee]=ye[v]=ye[de]=ye[x]=ye[_]=ye[S]=ye[j]=ye[H]=ye[R]=ye[T]=ye[I]=ye[d]=ye[z]=!1;var Me=typeof pr=="object"&&pr&&pr.Object===Object&&pr,X=typeof self=="object"&&self&&self.Object===Object&&self,Y=Me||X||Function("return this")(),W=e&&!e.nodeType&&e,w=W&&!0&&t&&!t.nodeType&&t,F=w&&w.exports===W,we=F&&Me.process,ve=function(){try{return we&&we.binding&&we.binding("util")}catch{}}(),Ue=ve&&ve.isTypedArray;function nt(N,q){for(var fe=-1,Ce=N==null?0:N.length,It=0,Xe=[];++fe<Ce;){var Tt=N[fe];q(Tt,fe,N)&&(Xe[It++]=Tt)}return Xe}function at(N,q){for(var fe=-1,Ce=q.length,It=N.length;++fe<Ce;)N[It+fe]=q[fe];return N}function Ge(N,q){for(var fe=-1,Ce=N==null?0:N.length;++fe<Ce;)if(q(N[fe],fe,N))return!0;return!1}function Dt(N,q){for(var fe=-1,Ce=Array(N);++fe<N;)Ce[fe]=q(fe);return Ce}function $t(N){return function(q){return N(q)}}function Je(N,q){return N.has(q)}function He(N,q){return N?.[q]}function ke(N){var q=-1,fe=Array(N.size);return N.forEach(function(Ce,It){fe[++q]=[It,Ce]}),fe}function Ke(N,q){return function(fe){return N(q(fe))}}function rt(N){var q=-1,fe=Array(N.size);return N.forEach(function(Ce){fe[++q]=Ce}),fe}var je=Array.prototype,Ze=Function.prototype,b=Object.prototype,p=Y["__core-js_shared__"],m=Ze.toString,D=b.hasOwnProperty,B=function(){var N=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||"");return N?"Symbol(src)_1."+N:""}(),K=b.toString,Q=RegExp("^"+m.call(D).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ee=F?Y.Buffer:void 0,Ne=Y.Symbol,st=Y.Uint8Array,ht=b.propertyIsEnumerable,lt=je.splice,Ur=Ne?Ne.toStringTag:void 0,Jn=Object.getOwnPropertySymbols,Si=Ee?Ee.isBuffer:void 0,cs=Ke(Object.keys,Object),zt=Qr(Y,"DataView"),Lt=Qr(Y,"Map"),Wt=Qr(Y,"Promise"),qt=Qr(Y,"Set"),Ft=Qr(Y,"WeakMap"),Mt=Qr(Object,"create"),ir=Qn(zt),sr=Qn(Lt),Vt=Qn(Wt),or=Qn(qt),Kt=Qn(Ft),Xt=Ne?Ne.prototype:void 0,Gt=Xt?Xt.valueOf:void 0;function Pt(N){var q=-1,fe=N==null?0:N.length;for(this.clear();++q<fe;){var Ce=N[q];this.set(Ce[0],Ce[1])}}function ar(){this.__data__=Mt?Mt(null):{},this.size=0}function cr(N){var q=this.has(N)&&delete this.__data__[N];return this.size-=q?1:0,q}function Hf(N){var q=this.__data__;if(Mt){var fe=q[N];return fe===n?void 0:fe}return D.call(q,N)?q[N]:void 0}function zf(N){var q=this.__data__;return Mt?q[N]!==void 0:D.call(q,N)}function Wf(N,q){var fe=this.__data__;return this.size+=this.has(N)?0:1,fe[N]=Mt&&q===void 0?n:q,this}Pt.prototype.clear=ar,Pt.prototype.delete=cr,Pt.prototype.get=Hf,Pt.prototype.has=zf,Pt.prototype.set=Wf;function fn(N){var q=-1,fe=N==null?0:N.length;for(this.clear();++q<fe;){var Ce=N[q];this.set(Ce[0],Ce[1])}}function qf(){this.__data__=[],this.size=0}function Vf(N){var q=this.__data__,fe=ls(q,N);if(fe<0)return!1;var Ce=q.length-1;return fe==Ce?q.pop():lt.call(q,fe,1),--this.size,!0}function Kf(N){var q=this.__data__,fe=ls(q,N);return fe<0?void 0:q[fe][1]}function Gf(N){return ls(this.__data__,N)>-1}function Zf(N,q){var fe=this.__data__,Ce=ls(fe,N);return Ce<0?(++this.size,fe.push([N,q])):fe[Ce][1]=q,this}fn.prototype.clear=qf,fn.prototype.delete=Vf,fn.prototype.get=Kf,fn.prototype.has=Gf,fn.prototype.set=Zf;function Xn(N){var q=-1,fe=N==null?0:N.length;for(this.clear();++q<fe;){var Ce=N[q];this.set(Ce[0],Ce[1])}}function Qs(){this.size=0,this.__data__={hash:new Pt,map:new(Lt||fn),string:new Pt}}function Yf(N){var q=Oi(this,N).delete(N);return this.size-=q?1:0,q}function eo(N){return Oi(this,N).get(N)}function Jf(N){return Oi(this,N).has(N)}function Xf(N,q){var fe=Oi(this,N),Ce=fe.size;return fe.set(N,q),this.size+=fe.size==Ce?0:1,this}Xn.prototype.clear=Qs,Xn.prototype.delete=Yf,Xn.prototype.get=eo,Xn.prototype.has=Jf,Xn.prototype.set=Xf;function to(N){var q=-1,fe=N==null?0:N.length;for(this.__data__=new Xn;++q<fe;)this.add(N[q])}function Xc(N){return this.__data__.set(N,n),this}function Qc(N){return this.__data__.has(N)}to.prototype.add=to.prototype.push=Xc,to.prototype.has=Qc;function Cn(N){var q=this.__data__=new fn(N);this.size=q.size}function Qf(){this.__data__=new fn,this.size=0}function e0(N){var q=this.__data__,fe=q.delete(N);return this.size=q.size,fe}function t0(N){return this.__data__.get(N)}function r0(N){return this.__data__.has(N)}function el(N,q){var fe=this.__data__;if(fe instanceof fn){var Ce=fe.__data__;if(!Lt||Ce.length<r-1)return Ce.push([N,q]),this.size=++fe.size,this;fe=this.__data__=new Xn(Ce)}return fe.set(N,q),this.size=fe.size,this}Cn.prototype.clear=Qf,Cn.prototype.delete=e0,Cn.prototype.get=t0,Cn.prototype.has=r0,Cn.prototype.set=el;function tl(N,q){var fe=io(N),Ce=!fe&&dl(N),It=!fe&&!Ce&&ba(N),Xe=!fe&&!Ce&&!It&&ml(N),Tt=fe||Ce||It||Xe,lr=Tt?Dt(N.length,String):[],mt=lr.length;for(var St in N)(q||D.call(N,St))&&!(Tt&&(St=="length"||It&&(St=="offset"||St=="parent")||Xe&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||cl(St,mt)))&&lr.push(St);return lr}function ls(N,q){for(var fe=N.length;fe--;)if(fl(N[fe][0],q))return fe;return-1}function va(N,q,fe){var Ce=q(N);return io(N)?Ce:at(Ce,fe(N))}function us(N){return N==null?N===void 0?J:Z:Ur&&Ur in Object(N)?ol(N):s0(N)}function ya(N){return fs(N)&&us(N)==l}function hs(N,q,fe,Ce,It){return N===q?!0:N==null||q==null||!fs(N)&&!fs(q)?N!==N&&q!==q:rl(N,q,fe,Ce,hs,It)}function rl(N,q,fe,Ce,It,Xe){var Tt=io(N),lr=io(q),mt=Tt?h:Fn(N),St=lr?h:Fn(q);mt=mt==l?R:mt,St=St==l?R:St;var Qt=mt==R,qr=St==R,ur=mt==St;if(ur&&ba(N)){if(!ba(q))return!1;Tt=!0,Qt=!1}if(ur&&!Qt)return Xe||(Xe=new Cn),Tt||ml(N)?ro(N,q,fe,Ce,It,Xe):i0(N,q,mt,fe,Ce,It,Xe);if(!(fe&i)){var Nt=Qt&&D.call(N,"__wrapped__"),jr=qr&&D.call(q,"__wrapped__");if(Nt||jr){var In=Nt?N.value():N,dn=jr?q.value():q;return Xe||(Xe=new Cn),It(In,dn,fe,Ce,Xe)}}return ur?(Xe||(Xe=new Cn),sl(N,q,fe,Ce,It,Xe)):!1}function n0(N){if(!gl(N)||ul(N))return!1;var q=so(N)?Q:ge;return q.test(Qn(N))}function nl(N){return fs(N)&&pl(N.length)&&!!ye[us(N)]}function il(N){if(!hl(N))return cs(N);var q=[];for(var fe in Object(N))D.call(N,fe)&&fe!="constructor"&&q.push(fe);return q}function ro(N,q,fe,Ce,It,Xe){var Tt=fe&i,lr=N.length,mt=q.length;if(lr!=mt&&!(Tt&&mt>lr))return!1;var St=Xe.get(N);if(St&&Xe.get(q))return St==q;var Qt=-1,qr=!0,ur=fe&o?new to:void 0;for(Xe.set(N,q),Xe.set(q,N);++Qt<lr;){var Nt=N[Qt],jr=q[Qt];if(Ce)var In=Tt?Ce(jr,Nt,Qt,q,N,Xe):Ce(Nt,jr,Qt,N,q,Xe);if(In!==void 0){if(In)continue;qr=!1;break}if(ur){if(!Ge(q,function(dn,Bn){if(!Je(ur,Bn)&&(Nt===dn||It(Nt,dn,fe,Ce,Xe)))return ur.push(Bn)})){qr=!1;break}}else if(!(Nt===jr||It(Nt,jr,fe,Ce,Xe))){qr=!1;break}}return Xe.delete(N),Xe.delete(q),qr}function i0(N,q,fe,Ce,It,Xe,Tt){switch(fe){case de:if(N.byteLength!=q.byteLength||N.byteOffset!=q.byteOffset)return!1;N=N.buffer,q=q.buffer;case ee:return!(N.byteLength!=q.byteLength||!Xe(new st(N),new st(q)));case v:case x:case H:return fl(+N,+q);case _:return N.name==q.name&&N.message==q.message;case T:case d:return N==q+"";case j:var lr=ke;case I:var mt=Ce&i;if(lr||(lr=rt),N.size!=q.size&&!mt)return!1;var St=Tt.get(N);if(St)return St==q;Ce|=o,Tt.set(N,q);var Qt=ro(lr(N),lr(q),Ce,It,Xe,Tt);return Tt.delete(N),Qt;case E:if(Gt)return Gt.call(N)==Gt.call(q)}return!1}function sl(N,q,fe,Ce,It,Xe){var Tt=fe&i,lr=no(N),mt=lr.length,St=no(q),Qt=St.length;if(mt!=Qt&&!Tt)return!1;for(var qr=mt;qr--;){var ur=lr[qr];if(!(Tt?ur in q:D.call(q,ur)))return!1}var Nt=Xe.get(N);if(Nt&&Xe.get(q))return Nt==q;var jr=!0;Xe.set(N,q),Xe.set(q,N);for(var In=Tt;++qr<mt;){ur=lr[qr];var dn=N[ur],Bn=q[ur];if(Ce)var _a=Tt?Ce(Bn,dn,ur,q,N,Xe):Ce(dn,Bn,ur,N,q,Xe);if(!(_a===void 0?dn===Bn||It(dn,Bn,fe,Ce,Xe):_a)){jr=!1;break}In||(In=ur=="constructor")}if(jr&&!In){var ds=N.constructor,vr=q.constructor;ds!=vr&&"constructor"in N&&"constructor"in q&&!(typeof ds=="function"&&ds instanceof ds&&typeof vr=="function"&&vr instanceof vr)&&(jr=!1)}return Xe.delete(N),Xe.delete(q),jr}function no(N){return va(N,c0,al)}function Oi(N,q){var fe=N.__data__;return ll(q)?fe[typeof q=="string"?"string":"hash"]:fe.map}function Qr(N,q){var fe=He(N,q);return n0(fe)?fe:void 0}function ol(N){var q=D.call(N,Ur),fe=N[Ur];try{N[Ur]=void 0;var Ce=!0}catch{}var It=K.call(N);return Ce&&(q?N[Ur]=fe:delete N[Ur]),It}var al=Jn?function(N){return N==null?[]:(N=Object(N),nt(Jn(N),function(q){return ht.call(N,q)}))}:Ct,Fn=us;(zt&&Fn(new zt(new ArrayBuffer(1)))!=de||Lt&&Fn(new Lt)!=j||Wt&&Fn(Wt.resolve())!=L||qt&&Fn(new qt)!=I||Ft&&Fn(new Ft)!=z)&&(Fn=function(N){var q=us(N),fe=q==R?N.constructor:void 0,Ce=fe?Qn(fe):"";if(Ce)switch(Ce){case ir:return de;case sr:return j;case Vt:return L;case or:return I;case Kt:return z}return q});function cl(N,q){return q=q??c,!!q&&(typeof N=="number"||Be.test(N))&&N>-1&&N%1==0&&N<q}function ll(N){var q=typeof N;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?N!=="__proto__":N===null}function ul(N){return!!B&&B in N}function hl(N){var q=N&&N.constructor,fe=typeof q=="function"&&q.prototype||b;return N===fe}function s0(N){return K.call(N)}function Qn(N){if(N!=null){try{return m.call(N)}catch{}try{return N+""}catch{}}return""}function fl(N,q){return N===q||N!==N&&q!==q}var dl=ya(function(){return arguments}())?ya:function(N){return fs(N)&&D.call(N,"callee")&&!ht.call(N,"callee")},io=Array.isArray;function o0(N){return N!=null&&pl(N.length)&&!so(N)}var ba=Si||xt;function a0(N,q){return hs(N,q)}function so(N){if(!gl(N))return!1;var q=us(N);return q==S||q==P||q==f||q==$}function pl(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=c}function gl(N){var q=typeof N;return N!=null&&(q=="object"||q=="function")}function fs(N){return N!=null&&typeof N=="object"}var ml=Ue?$t(Ue):nl;function c0(N){return o0(N)?tl(N):il(N)}function Ct(){return[]}function xt(){return!1}t.exports=a0})(oh,oh.exports);var R_=oh.exports,L_=Object.defineProperty,Np=Object.getOwnPropertySymbols,M_=Object.prototype.hasOwnProperty,U_=Object.prototype.propertyIsEnumerable,Rp=(t,e,r)=>e in t?L_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Nr=(t,e)=>{for(var r in e||(e={}))M_.call(e,r)&&Rp(t,r,e[r]);if(Np)for(var r of Np(e))U_.call(e,r)&&Rp(t,r,e[r]);return t};function j_(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var l=t.length,h=t.charAt(0),f=Math.log(l)/Math.log(256),v=Math.log(256)/Math.log(l);function x(P){if(P instanceof Uint8Array||(ArrayBuffer.isView(P)?P=new Uint8Array(P.buffer,P.byteOffset,P.byteLength):Array.isArray(P)&&(P=Uint8Array.from(P))),!(P instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(P.length===0)return"";for(var j=0,H=0,Z=0,R=P.length;Z!==R&&P[Z]===0;)Z++,j++;for(var L=(R-Z)*v+1>>>0,$=new Uint8Array(L);Z!==R;){for(var T=P[Z],I=0,d=L-1;(T!==0||I<H)&&d!==-1;d--,I++)T+=256*$[d]>>>0,$[d]=T%l>>>0,T=T/l>>>0;if(T!==0)throw new Error("Non-zero carry");H=I,Z++}for(var E=L-H;E!==L&&$[E]===0;)E++;for(var J=h.repeat(j);E<L;++E)J+=t.charAt($[E]);return J}function _(P){if(typeof P!="string")throw new TypeError("Expected String");if(P.length===0)return new Uint8Array;var j=0;if(P[j]!==" "){for(var H=0,Z=0;P[j]===h;)H++,j++;for(var R=(P.length-j)*f+1>>>0,L=new Uint8Array(R);P[j];){var $=r[P.charCodeAt(j)];if($===255)return;for(var T=0,I=R-1;($!==0||T<Z)&&I!==-1;I--,T++)$+=l*L[I]>>>0,L[I]=$%256>>>0,$=$/256>>>0;if($!==0)throw new Error("Non-zero carry");Z=T,j++}if(P[j]!==" "){for(var d=R-Z;d!==R&&L[d]===0;)d++;for(var E=new Uint8Array(H+(R-d)),J=H;d!==R;)E[J++]=L[d++];return E}}}function S(P){var j=_(P);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:S}}var F_=j_,B_=F_;const Lp=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},k_=t=>new TextEncoder().encode(t),H_=t=>new TextDecoder().decode(t);class z_{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class W_{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Mp(this,e)}}class q_{constructor(e){this.decoders=e}or(e){return Mp(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Mp=(t,e)=>new q_(Nr(Nr({},t.decoders||{[t.prefix]:t}),e.decoders||{[e.prefix]:e}));class V_{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new z_(e,r,n),this.decoder=new W_(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const oc=({name:t,prefix:e,encode:r,decode:n})=>new V_(t,e,r,n),Fo=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=B_(r,e);return oc({prefix:t,name:e,encode:n,decode:o=>Lp(i(o))})},K_=(t,e,r,n)=>{const i={};for(let v=0;v<e.length;++v)i[e[v]]=v;let o=t.length;for(;t[o-1]==="=";)--o;const c=new Uint8Array(o*r/8|0);let l=0,h=0,f=0;for(let v=0;v<o;++v){const x=i[t[v]];if(x===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|x,l+=r,l>=8&&(l-=8,c[f++]=255&h>>l)}if(l>=r||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return c},G_=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let o="",c=0,l=0;for(let h=0;h<t.length;++h)for(l=l<<8|t[h],c+=8;c>r;)c-=r,o+=e[i&l>>c];if(c&&(o+=e[i&l<<r-c]),n)for(;o.length*r&7;)o+="=";return o},Er=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>oc({prefix:e,name:t,encode(i){return G_(i,n,r)},decode(i){return K_(i,n,r,t)}}),Z_=oc({prefix:"\0",name:"identity",encode:t=>H_(t),decode:t=>k_(t)});var Y_=Object.freeze({__proto__:null,identity:Z_});const J_=Er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var X_=Object.freeze({__proto__:null,base2:J_});const Q_=Er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var e8=Object.freeze({__proto__:null,base8:Q_});const t8=Fo({prefix:"9",name:"base10",alphabet:"0123456789"});var r8=Object.freeze({__proto__:null,base10:t8});const n8=Er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),i8=Er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var s8=Object.freeze({__proto__:null,base16:n8,base16upper:i8});const o8=Er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),a8=Er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c8=Er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l8=Er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u8=Er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h8=Er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),f8=Er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),d8=Er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),p8=Er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var g8=Object.freeze({__proto__:null,base32:o8,base32upper:a8,base32pad:c8,base32padupper:l8,base32hex:u8,base32hexupper:h8,base32hexpad:f8,base32hexpadupper:d8,base32z:p8});const m8=Fo({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),w8=Fo({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var v8=Object.freeze({__proto__:null,base36:m8,base36upper:w8});const y8=Fo({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),b8=Fo({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var _8=Object.freeze({__proto__:null,base58btc:y8,base58flickr:b8});const E8=Er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),x8=Er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),C8=Er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),I8=Er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var S8=Object.freeze({__proto__:null,base64:E8,base64pad:x8,base64url:C8,base64urlpad:I8});const Up=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),O8=Up.reduce((t,e,r)=>(t[r]=e,t),[]),A8=Up.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function D8(t){return t.reduce((e,r)=>(e+=O8[r],e),"")}function $8(t){const e=[];for(const r of t){const n=A8[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const P8=oc({prefix:"\u{1F680}",name:"base256emoji",encode:D8,decode:$8});var T8=Object.freeze({__proto__:null,base256emoji:P8}),N8=Fp,jp=128,R8=127,L8=~R8,M8=Math.pow(2,31);function Fp(t,e,r){e=e||[],r=r||0;for(var n=r;t>=M8;)e[r++]=t&255|jp,t/=128;for(;t&L8;)e[r++]=t&255|jp,t>>>=7;return e[r]=t|0,Fp.bytes=r-n+1,e}var U8=ah,j8=128,Bp=127;function ah(t,n){var r=0,n=n||0,i=0,o=n,c,l=t.length;do{if(o>=l)throw ah.bytes=0,new RangeError("Could not decode varint");c=t[o++],r+=i<28?(c&Bp)<<i:(c&Bp)*Math.pow(2,i),i+=7}while(c>=j8);return ah.bytes=o-n,r}var F8=Math.pow(2,7),B8=Math.pow(2,14),k8=Math.pow(2,21),H8=Math.pow(2,28),z8=Math.pow(2,35),W8=Math.pow(2,42),q8=Math.pow(2,49),V8=Math.pow(2,56),K8=Math.pow(2,63),G8=function(t){return t<F8?1:t<B8?2:t<k8?3:t<H8?4:t<z8?5:t<W8?6:t<q8?7:t<V8?8:t<K8?9:10},Z8={encode:N8,decode:U8,encodingLength:G8},kp=Z8;const Hp=(t,e,r=0)=>(kp.encode(t,e,r),e),zp=t=>kp.encodingLength(t),ch=(t,e)=>{const r=e.byteLength,n=zp(t),i=n+zp(r),o=new Uint8Array(i+r);return Hp(t,o,0),Hp(r,o,n),o.set(e,i),new Y8(t,r,e,o)};class Y8{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const Wp=({name:t,code:e,encode:r})=>new J8(t,e,r);class J8{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?ch(this.code,r):r.then(n=>ch(this.code,n))}else throw Error("Unknown type, must be binary type")}}const qp=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),X8=Wp({name:"sha2-256",code:18,encode:qp("SHA-256")}),Q8=Wp({name:"sha2-512",code:19,encode:qp("SHA-512")});var eE=Object.freeze({__proto__:null,sha256:X8,sha512:Q8});const Vp=0,tE="identity",Kp=Lp;var rE=Object.freeze({__proto__:null,identity:{code:Vp,name:tE,encode:Kp,digest:t=>ch(Vp,Kp(t))}});new TextEncoder,new TextDecoder;const Gp=Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr(Nr({},Y_),X_),e8),r8),s8),g8),v8),_8),S8),T8);Nr(Nr({},eE),rE);function Zp(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function nE(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Zp(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Yp(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Jp=Yp("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),lh=Yp("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=nE(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),iE=Nr({utf8:Jp,"utf-8":Jp,hex:Gp.base16,latin1:lh,ascii:lh,binary:lh},Gp);function sE(t,e="utf8"){const r=iE[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Zp(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Xp="wc",oE=2,uh="core",di=`${Xp}@2:${uh}:`,aE={name:uh,logger:"error"},cE={database:":memory:"},lE="crypto",Qp="client_ed25519_seed",uE=De.ONE_DAY,hE="keychain",fE="0.3",dE="messages",pE="0.3",gE=De.SIX_HOURS,mE="publisher",eg="irn",wE="error",tg="wss://relay.walletconnect.com",rg="wss://relay.walletconnect.org",vE="relayer",kt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},yE="_subscription",Bo={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},bE=De.ONE_SECOND/2,_E="2.9.1",EE=1e4,xE="0.3",CE="WALLETCONNECT_CLIENT_ID",Tn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},IE="subscription",SE="0.3",OE=De.FIVE_SECONDS*1e3,AE="pairing",DE="0.3",ko={wc_pairingDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:De.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:De.ONE_DAY,prompt:!1,tag:0},res:{ttl:De.ONE_DAY,prompt:!1,tag:0}}},Nn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},$E="history",PE="0.3",TE="expirer",on={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},NE="0.3",hh="verify-api",ng="https://verify.walletconnect.com";class RE{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=hE,this.version=fE,this.initialized=!1,this.storagePrefix=di,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:o}=_e("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=e,this.logger=pt.generateChildLogger(r,this.name)}get context(){return pt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,T1(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?N1(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}class LE{constructor(e,r,n){this.core=e,this.logger=r,this.name=lE,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),o=wp(i);return mp(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=H5();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const o=await this.getClientSeed(),c=wp(o),l=Du();return await q4(l,i,uE,c)},this.generateSharedKey=(i,o,c)=>{this.isInitialized();const l=this.getPrivateKey(i),h=z5(l,o);return this.setSymKey(h,c)},this.setSymKey=async(i,o)=>{this.isInitialized();const c=o||W5(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,o,c)=>{this.isInitialized();const l=S1(c),h=Mo(o);if(O1(l)){const _=l.senderPublicKey,S=l.receiverPublicKey;i=await this.generateSharedKey(_,S)}const f=this.getSymKey(i),{type:v,senderPublicKey:x}=l;return V5({type:v,symKey:f,message:h,senderPublicKey:x})},this.decode=async(i,o,c)=>{this.isInitialized();const l=Z5(o,c);if(O1(l)){const h=l.receiverPublicKey,f=l.senderPublicKey;i=await this.generateSharedKey(h,f)}try{const h=this.getSymKey(i),f=K5({symKey:h,encoded:o});return Ju(f)}catch(h){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(h)}},this.getPayloadType=i=>{const o=Ga(i);return So(o.type)},this.getPayloadSenderPublicKey=i=>{const o=Ga(i);return o.senderPublicKey?Dr(o.senderPublicKey,$r):void 0},this.core=e,this.logger=pt.generateChildLogger(r,this.name),this.keychain=n||new RE(this.core,this.logger)}get context(){return pt.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Qp)}catch{e=Du(),await this.keychain.set(Qp,e)}return sE(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ME extends _4{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=dE,this.version=pE,this.initialized=!1,this.storagePrefix=di,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const o=Ss(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[o]<"u"||(c[o]=i,this.messages.set(n,c),await this.persist()),o},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const o=this.get(n),c=Ss(i);return typeof o[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=pt.generateChildLogger(e,this.name),this.core=r}get context(){return pt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,T1(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?N1(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}class UE extends E4{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new br.exports.EventEmitter,this.name=mE,this.queue=new Map,this.publishTimeout=De.toMiliseconds(De.TEN_SECONDS),this.queueTimeout=De.toMiliseconds(De.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(n,i,o)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}});try{const c=o?.ttl||gE,l=Ru(o),h=o?.prompt||!1,f=o?.tag||0,v=o?.id||nh().toString(),x={topic:n,message:i,opts:{ttl:c,relay:l,prompt:h,tag:f,id:v}},_=setTimeout(()=>this.queue.set(v,x),this.queueTimeout);try{await await Za(this.rpcPublish(n,i,c,l,h,f,v),this.publishTimeout),clearTimeout(_),this.relayer.events.emit(kt.publish,x)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:o}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=e,this.logger=pt.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return pt.getLoggerContext(this.logger)}rpcPublish(e,r,n,i,o,c,l){var h,f,v,x;const _={method:Ya(i.protocol).publish,params:{topic:e,message:r,ttl:n,prompt:o,tag:c},id:l};return Pr((h=_.params)==null?void 0:h.prompt)&&((f=_.params)==null||delete f.prompt),Pr((v=_.params)==null?void 0:v.tag)&&((x=_.params)==null||delete x.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_}),this.relayer.request(_)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:n,opts:i}=e;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(kt.connection_stalled);return}this.checkQueue()}),this.relayer.on(kt.message_ack,e=>{this.onPublish(e.id.toString())})}}class jE{constructor(){this.map=new Map,this.set=(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(o=>o!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var FE=Object.defineProperty,BE=Object.defineProperties,kE=Object.getOwnPropertyDescriptors,ig=Object.getOwnPropertySymbols,HE=Object.prototype.hasOwnProperty,zE=Object.prototype.propertyIsEnumerable,sg=(t,e,r)=>e in t?FE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ho=(t,e)=>{for(var r in e||(e={}))HE.call(e,r)&&sg(t,r,e[r]);if(ig)for(var r of ig(e))zE.call(e,r)&&sg(t,r,e[r]);return t},fh=(t,e)=>BE(t,kE(e));class WE extends I4{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new jE,this.events=new br.exports.EventEmitter,this.name=IE,this.version=SE,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=di,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=Ru(i),c={topic:n,relay:o};this.pending.set(n,c);const l=await this.rpcSubscribe(n,o);return this.onSubscribe(l,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),l}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,o)=>{const c=new De.Watch;c.start(this.pendingSubscriptionWatchLabel);const l=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(l),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=OE&&(clearInterval(l),c.stop(this.pendingSubscriptionWatchLabel),o(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=pt.generateChildLogger(r,this.name),this.clientId=""}get context(){return pt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Ru(n);await this.rpcUnsubscribe(e,r,i);const o=Yt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r){const n={method:Ya(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await Za(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}return Ss(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Ya(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await Za(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(kt.connection_stalled)}}rpcUnsubscribe(e,r,n){const i={method:Ya(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,fh(Ho({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Ho({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Ho({},r)),this.topicMap.set(r.topic,e),this.events.emit(Tn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(Tn.deleted,fh(Ho({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Tn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(Tn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Pn(r)&&this.onBatchSubscribe(r.map((n,i)=>fh(Ho({},e[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(kt.connect,async()=>{await this.onConnect()}),this.relayer.on(kt.disconnect,()=>{this.onDisconnect()}),this.events.on(Tn.created,async e=>{const r=Tn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Tn.deleted,async e=>{const r=Tn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var qE=Object.defineProperty,og=Object.getOwnPropertySymbols,VE=Object.prototype.hasOwnProperty,KE=Object.prototype.propertyIsEnumerable,ag=(t,e,r)=>e in t?qE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,GE=(t,e)=>{for(var r in e||(e={}))VE.call(e,r)&&ag(t,r,e[r]);if(og)for(var r of og(e))KE.call(e,r)&&ag(t,r,e[r]);return t};class ZE extends x4{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new br.exports.EventEmitter,this.name=vE,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?pt.generateChildLogger(e.logger,this.name):pt.pino(pt.getDefaultLoggerOptions({level:e.logger||wE})),this.messages=new ME(this.logger,e.core),this.subscriber=new WE(this,this.logger),this.publisher=new UE(this,this.logger),this.relayUrl=e?.relayUrl||tg,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${rg}...`),await this.restartTransport(rg)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},EE)}get context(){return pt.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var n;this.isInitialized();let i=((n=this.subscriber.topicMap.get(e))==null?void 0:n[0])||"";return i||(await Promise.all([new Promise(o=>{this.subscriber.once(Tn.created,c=>{c.topic===e&&o()})}),new Promise(async o=>{i=await this.subscriber.subscribe(e,r),o()})]),i)}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(kt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Tn.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await Za(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(i=>n(i)).then(()=>r()).finally(()=>this.removeListener(kt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(kt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(kt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(Bo.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new fi(new N_(ob({sdkVersion:_E,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:n}=e;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.debug(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),sh(e)){if(!e.method.endsWith(yE))return;const r=e.params,{topic:n,message:i,publishedAt:o}=r.data,c={topic:n,message:i,publishedAt:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(GE({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(e),await this.onMessageEvent(c)}else sc(e)&&this.events.emit(kt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(kt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=ih(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(Bo.payload,e=>this.onProviderPayload(e)),this.provider.on(Bo.connect,()=>{this.events.emit(kt.connect)}),this.provider.on(Bo.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(Bo.error,e=>{this.logger.error(e),this.events.emit(kt.error,e)})}registerEventListeners(){this.events.on(kt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(kt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},De.toMiliseconds(bE))}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var YE=Object.defineProperty,cg=Object.getOwnPropertySymbols,JE=Object.prototype.hasOwnProperty,XE=Object.prototype.propertyIsEnumerable,lg=(t,e,r)=>e in t?YE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ug=(t,e)=>{for(var r in e||(e={}))JE.call(e,r)&&lg(t,r,e[r]);if(cg)for(var r of cg(e))XE.call(e,r)&&lg(t,r,e[r]);return t};class ac extends C4{constructor(e,r,n,i=di,o=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,this.map=new Map,this.version=xE,this.cached=[],this.initialized=!1,this.storagePrefix=di,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Pr(c)?this.map.set(this.getKey(c),c):Db(c)?this.map.set(c.id,c):$b(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,l)=>{this.isInitialized(),this.map.has(c)?await this.update(c,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:l}),this.map.set(c,l),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(l=>Object.keys(c).every(h=>R_(l[h],c[h]))):this.values),this.update=async(c,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:l});const h=ug(ug({},this.getData(c)),l);this.map.set(c,h),await this.persist()},this.delete=async(c,l)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:l}),this.map.delete(c),await this.persist())},this.logger=pt.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=o}get context(){return pt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:n}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}class QE{constructor(e,r){this.core=e,this.logger=r,this.name=AE,this.version=DE,this.events=new br.exports,this.initialized=!1,this.storagePrefix=di,this.ignoredPayloadTypes=[ki],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Du(),i=await this.core.crypto.setSymKey(n),o=En(De.FIVE_MINUTES),c={protocol:eg},l={topic:i,expiry:o,relay:c,active:!1},h=yb({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,l),await this.core.relayer.subscribe(i),this.core.expirer.set(i,o),{topic:i,uri:h}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:o,relay:c}=mb(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const l=En(De.FIVE_MINUTES),h={topic:i,relay:c,expiry:l,active:!1};return await this.pairings.set(i,h),await this.core.crypto.setSymKey(o,i),await this.core.relayer.subscribe(i,{relay:c}),this.core.expirer.set(i,l),n.activatePairing&&await this.activate({topic:i}),h},this.activate=async({topic:n})=>{this.isInitialized();const i=En(De.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const o=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:l,reject:h}=Os();this.events.once(rr("pairing_ping",o),({error:f})=>{f?h(f):l()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",Yt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,o)=>{const c=nc(i,o),l=await this.core.crypto.encode(n,c),h=ko[i].req;return this.core.history.set(n,c),this.core.relayer.publish(n,l,h),c.id},this.sendResult=async(n,i,o)=>{const c=ih(n,o),l=await this.core.crypto.encode(i,c),h=await this.core.history.get(i,n),f=ko[h.request.method].res;await this.core.relayer.publish(i,l,f),await this.core.history.resolve(c)},this.sendError=async(n,i,o)=>{const c=ic(n,o),l=await this.core.crypto.encode(i,c),h=await this.core.history.get(i,n),f=ko[h.request.method]?ko[h.request.method].res:ko.unregistered_method.res;await this.core.relayer.publish(i,l,f),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,Yt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>hi(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:o}=n;switch(o.method){case"wc_pairingPing":return this.onPairingPingRequest(i,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,o);default:return this.onUnknownRpcMethodRequest(i,o)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:o}=n,c=(await this.core.history.get(i,o.id)).request.method;switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,o);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:o}=i;try{this.isValidPing({topic:n}),await this.sendResult(o,n,!0),this.events.emit("pairing_ping",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:o}=i;setTimeout(()=>{Vn(i)?this.events.emit(rr("pairing_ping",o),{}):xn(i)&&this.events.emit(rr("pairing_ping",o),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:o,topic:n})}catch(c){await this.sendError(o,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:o,method:c}=i;try{if(this.registeredMethods.includes(c))return;const l=Yt("WC_METHOD_UNSUPPORTED",c);await this.sendError(o,n,l),this.logger.error(l)}catch(l){await this.sendError(o,n,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(Yt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!zr(n)){const{message:i}=_e("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!Ab(n.uri)){const{message:i}=_e("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!zr(n)){const{message:o}=_e("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!zr(n)){const{message:o}=_e("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(o)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!gr(n,!1)){const{message:i}=_e("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=_e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(hi(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=_e("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=e,this.logger=pt.generateChildLogger(r,this.name),this.pairings=new ac(this.core,this.logger,this.name,this.storagePrefix)}get context(){return pt.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(kt.message,async e=>{const{topic:r,message:n}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);sh(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):sc(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.core.history.delete(r,i.id))})}registerExpirerEvents(){this.core.expirer.on(on.expired,async e=>{const{topic:r}=L1(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class e7 extends b4{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new br.exports.EventEmitter,this.name=$E,this.version=PE,this.cached=[],this.initialized=!1,this.storagePrefix=di,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:o}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:o,expiry:En(De.THIRTY_DAYS)};this.records.set(c.id,c),this.events.emit(Nn.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=xn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Nn.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(o=>{if(o.topic===n){if(typeof i<"u"&&o.id!==i)return;this.records.delete(o.id),this.events.emit(Nn.deleted,o)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=pt.generateChildLogger(r,this.name)}get context(){return pt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:nc(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Nn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Nn.created,e=>{const r=Nn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Nn.updated,e=>{const r=Nn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Nn.deleted,e=>{const r=Nn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{De.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}class t7 extends S4{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new br.exports.EventEmitter,this.name=TE,this.version=NE,this.cached=[],this.initialized=!1,this.storagePrefix=di,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const o=this.formatTarget(n),c={target:o,expiry:i};this.expirations.set(o,c),this.checkExpiry(o,c),this.events.emit(on.created,{target:o,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),o=this.getExpiration(i);this.expirations.delete(i),this.events.emit(on.deleted,{target:i,expiration:o})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=pt.generateChildLogger(r,this.name)}get context(){return pt.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return ab(e);if(typeof e=="number")return cb(e);const{message:r}=_e("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(on.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=_e("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=_e("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;De.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(on.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Ps.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(on.created,e=>{const r=on.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(on.expired,e=>{const r=on.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(on.deleted,e=>{const r=on.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}}class r7 extends O4{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=hh,this.initialized=!1,this.init=async n=>{P1()||!Pu()||(this.verifyUrl=n?.verifyUrl||ng,await this.createIframe())},this.register=async n=>{var i;if(this.initialized||await this.init(),!!this.iframe)try{(i=this.iframe.contentWindow)==null||i.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async n=>{var i;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const o=this.startAbortTimer(De.FIVE_SECONDS),c=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(o),c.status===200?(i=await c.json())==null?void 0:i.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,i)=>{if(document.getElementById(hh))return n();const o=document.createElement("iframe");o.setAttribute("id",hh),o.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),o.style.display="none",o.addEventListener("load",()=>{this.initialized=!0,n()}),o.addEventListener("error",c=>{i(c)}),document.body.append(o),this.iframe=o}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),De.toMiliseconds(De.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=pt.generateChildLogger(r,this.name),this.verifyUrl=ng,this.abortController=new AbortController,this.isDevEnv=$u()&&process.env.IS_VITEST}get context(){return pt.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),De.toMiliseconds(e))}}var n7=Object.defineProperty,hg=Object.getOwnPropertySymbols,i7=Object.prototype.hasOwnProperty,s7=Object.prototype.propertyIsEnumerable,fg=(t,e,r)=>e in t?n7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dg=(t,e)=>{for(var r in e||(e={}))i7.call(e,r)&&fg(t,r,e[r]);if(hg)for(var r of hg(e))s7.call(e,r)&&fg(t,r,e[r]);return t};class dh extends y4{constructor(e){super(e),this.protocol=Xp,this.version=oE,this.name=uh,this.events=new br.exports.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||tg;const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:pt.pino(pt.getDefaultLoggerOptions({level:e?.logger||aE.logger}));this.logger=pt.generateChildLogger(r,this.name),this.heartbeat=new Ps.HeartBeat,this.crypto=new LE(this,this.logger,e?.keychain),this.history=new e7(this,this.logger),this.expirer=new t7(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new x6(dg(dg({},cE),e?.storageOptions)),this.relayer=new ZE({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new QE(this,this.logger),this.verify=new r7(this.projectId||"",this.logger)}static async init(e){const r=new dh(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(CE,n),r}get context(){return pt.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const o7=dh,pg="wc",gg=2,mg="client",ph=`${pg}@${gg}:${mg}:`,gh={name:mg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},a7="WALLETCONNECT_DEEPLINK_CHOICE",c7="proposal",wg="Proposal expired",l7="session",cc=De.SEVEN_DAYS,u7="engine",zo={wc_sessionPropose:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1104},res:{ttl:De.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1106},res:{ttl:De.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:De.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:De.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:De.ONE_DAY,prompt:!1,tag:1112},res:{ttl:De.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:De.THIRTY_SECONDS,prompt:!1,tag:1115}}},mh={min:De.FIVE_MINUTES,max:De.SEVEN_DAYS},Wo={idle:"idle",active:"active"},h7="request",f7=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var d7=Object.defineProperty,p7=Object.defineProperties,g7=Object.getOwnPropertyDescriptors,vg=Object.getOwnPropertySymbols,m7=Object.prototype.hasOwnProperty,w7=Object.prototype.propertyIsEnumerable,yg=(t,e,r)=>e in t?d7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,an=(t,e)=>{for(var r in e||(e={}))m7.call(e,r)&&yg(t,r,e[r]);if(vg)for(var r of vg(e))w7.call(e,r)&&yg(t,r,e[r]);return t},wh=(t,e)=>p7(t,g7(e));class v7 extends D4{constructor(e){super(e),this.name=u7,this.events=new br.exports,this.initialized=!1,this.ignoredPayloadTypes=[ki],this.requestQueue={state:Wo.idle,requests:[]},this.requestQueueDelay=De.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(zo)}),this.initialized=!0,setTimeout(()=>{this.requestQueue.requests=this.getPendingSessionRequests(),this.processRequestQueue()},De.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{this.isInitialized();const n=wh(an({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:h}=n;let f=i,v,x=!1;if(f&&(x=this.client.core.pairing.pairings.get(f).active),!f||!x){const{topic:L,uri:$}=await this.client.core.pairing.create();f=L,v=$}const _=await this.client.core.crypto.generateKeyPair(),S=an({requiredNamespaces:o,optionalNamespaces:c,relays:h??[{protocol:eg}],proposer:{publicKey:_,metadata:this.client.metadata}},l&&{sessionProperties:l}),{reject:P,resolve:j,done:H}=Os(De.FIVE_MINUTES,wg);if(this.events.once(rr("session_connect"),async({error:L,session:$})=>{if(L)P(L);else if($){$.self.publicKey=_;const T=wh(an({},$),{requiredNamespaces:$.requiredNamespaces,optionalNamespaces:$.optionalNamespaces});await this.client.session.set($.topic,T),await this.setExpiry($.topic,$.expiry),f&&await this.client.core.pairing.updateMetadata({topic:f,metadata:$.peer.metadata}),j(T)}}),!f){const{message:L}=_e("NO_MATCHING_KEY",`connect() pairing topic: ${f}`);throw new Error(L)}const Z=await this.sendRequest(f,"wc_sessionPropose",S),R=En(De.FIVE_MINUTES);return await this.setProposal(Z,an({id:Z,expiry:R},S)),{uri:v,approval:H}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:o,sessionProperties:c}=r,l=this.client.proposal.get(n);let{pairingTopic:h,proposer:f,requiredNamespaces:v,optionalNamespaces:x}=l;h=h||"",Ds(v)||(v=xb(o,"approve()"));const _=await this.client.core.crypto.generateKeyPair(),S=f.publicKey,P=await this.client.core.crypto.generateSharedKey(_,S);h&&n&&(await this.client.core.pairing.updateMetadata({topic:h,metadata:f.metadata}),await this.sendResult(n,h,{relay:{protocol:i??"irn"},responderPublicKey:_}),await this.client.proposal.delete(n,Yt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}));const j=an({relay:{protocol:i??"irn"},namespaces:o,requiredNamespaces:v,optionalNamespaces:x,pairingTopic:h,controller:{publicKey:_,metadata:this.client.metadata},expiry:En(cc)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(P),await this.sendRequest(P,"wc_sessionSettle",j);const H=wh(an({},j),{topic:P,pairingTopic:h,acknowledged:!1,self:j.controller,peer:{publicKey:f.publicKey,metadata:f.metadata},controller:_});return await this.client.session.set(P,H),await this.setExpiry(P,En(cc)),{topic:P,acknowledged:()=>new Promise(Z=>setTimeout(()=>Z(this.client.session.get(P)),500))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:o}=this.client.proposal.get(n);o&&(await this.sendError(n,o,i),await this.client.proposal.delete(n,Yt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,o=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:c,resolve:l,reject:h}=Os();return this.events.once(rr("session_update",o),({error:f})=>{f?h(f):l()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:o,resolve:c,reject:l}=Os();return this.events.once(rr("session_extend",i),({error:h})=>{h?l(h):c()}),await this.setExpiry(n,En(cc)),{acknowledged:o}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:o,expiry:c}=r,l=await this.sendRequest(o,"wc_sessionRequest",{request:i,chainId:n},c),{done:h,resolve:f,reject:v}=Os(c);this.events.once(rr("session_request",l),({error:_,result:S})=>{_?v(_):f(S)}),this.client.events.emit("session_request_sent",{topic:o,request:i,chainId:n,id:l});const x=await this.client.core.storage.getItem(a7);return lb({id:l,topic:o,wcDeepLink:x}),await h()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:o}=i;Vn(i)?await this.sendResult(o,n,i.result):xn(i)&&await this.sendError(o,n,i.error),this.cleanupAfterResponse(r)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:o,resolve:c,reject:l}=Os();this.events.once(rr("session_ping",i),({error:h})=>{h?l(h):c()}),await o()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:o}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:o})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=nh().toString();let o;const c=l=>{l?.id.toString()===i&&(this.client.core.relayer.events.removeListener(kt.message_ack,c),o())};await Promise.all([new Promise(l=>{o=l,this.client.core.relayer.on(kt.message_ack,c)}),this.sendRequest(n,"wc_sessionDelete",Yt("USER_DISCONNECTED"),void 0,i)]),await this.deleteSession(n)}else await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>Sb(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(o=>{var c,l;return((c=o.peerMetadata)==null?void 0:c.url)&&((l=o.peerMetadata)==null?void 0:l.url)===r.peer.metadata.url&&o.topic&&o.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,Yt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r)},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,Yt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.requestQueue.requests=this.requestQueue.requests.filter(o=>o.id!==r),i&&(this.requestQueue.state=Wo.idle)},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=zo.wc_sessionRequest.req.ttl,{id:i,topic:o,params:c}=r;await this.client.pendingRequest.set(i,{id:i,topic:o,params:c}),n&&this.client.core.expirer.set(i,En(n))},this.sendRequest=async(r,n,i,o,c)=>{const l=nc(n,i);if(Pu()&&f7.includes(n)){const v=Ss(JSON.stringify(l));await this.client.core.verify.register({attestationId:v})}const h=await this.client.core.crypto.encode(r,l),f=zo[n].req;return o&&(f.ttl=o),c&&(f.id=c),this.client.core.history.set(r,l),this.client.core.relayer.publish(r,h,f),l.id},this.sendResult=async(r,n,i)=>{const o=ih(r,i),c=await this.client.core.crypto.encode(n,o),l=await this.client.core.history.get(n,r),h=zo[l.request.method].res;this.client.core.relayer.publish(n,c,h),await this.client.core.history.resolve(o)},this.sendError=async(r,n,i)=>{const o=ic(r,i),c=await this.client.core.crypto.encode(n,o),l=await this.client.core.history.get(n,r),h=zo[l.request.method].res;this.client.core.relayer.publish(n,c,h),await this.client.core.history.resolve(o)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{hi(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{hi(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,o=i.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${o}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:n}=r,{message:i}=_e("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:o}=n;try{this.isValidConnect(an({},n.params));const c=En(De.FIVE_MINUTES),l=an({id:o,pairingTopic:r,expiry:c},i);await this.setProposal(o,l);const h=Ss(JSON.stringify(n)),f=await this.getVerifyContext(h,l.proposer.metadata);this.client.events.emit("session_proposal",{id:o,params:l,verifyContext:f})}catch(c){await this.sendError(o,r,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(Vn(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const l=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const h=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const f=await this.client.core.crypto.generateSharedKey(l,h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:f});const v=await this.client.core.relayer.subscribe(f);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:v}),await this.client.core.pairing.activate({topic:r})}else xn(n)&&(await this.client.proposal.delete(i,Yt("USER_DISCONNECTED")),this.events.emit(rr("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidSessionSettleRequest(o);const{relay:c,controller:l,expiry:h,namespaces:f,requiredNamespaces:v,optionalNamespaces:x,sessionProperties:_,pairingTopic:S}=n.params,P=an({topic:r,relay:c,expiry:h,namespaces:f,acknowledged:!0,pairingTopic:S,requiredNamespaces:v,optionalNamespaces:x,controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},_&&{sessionProperties:_});await this.sendResult(n.id,r,!0),this.events.emit(rr("session_connect"),{session:P}),this.cleanupDuplicatePairings(P)}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;Vn(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(rr("session_approve",i),{})):xn(n)&&(await this.client.session.delete(r,Yt("USER_DISCONNECTED")),this.events.emit(rr("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:o}=n;try{this.isValidUpdate(an({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(o,r,!0),this.client.events.emit("session_update",{id:o,topic:r,params:i})}catch(c){await this.sendError(o,r,c),this.client.logger.error(c)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;Vn(n)?this.events.emit(rr("session_update",i),{}):xn(n)&&this.events.emit(rr("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,En(cc)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;Vn(n)?this.events.emit(rr("session_extend",i),{}):xn(n)&&this.events.emit(rr("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(o){await this.sendError(i,r,o),this.client.logger.error(o)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{Vn(n)?this.events.emit(rr("session_ping",i),{}):xn(n)&&this.events.emit(rr("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(kt.publish,async()=>{o(await this.deleteSession(r))})}),this.sendResult(i,r,!0)]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidRequest(an({topic:r},o)),await this.setPendingSessionRequest({id:i,topic:r,params:o}),this.addRequestToQueue({id:i,topic:r,params:o}),await this.processRequestQueue()}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;Vn(n)?this.events.emit(rr("session_request",i),{result:n.result}):xn(n)&&this.events.emit(rr("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:o}=n;try{this.isValidEmit(an({topic:r},o)),this.client.events.emit("session_event",{id:i,topic:r,params:o})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.addRequestToQueue=r=>{this.requestQueue.requests.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.requestQueue.state=Wo.idle,this.processRequestQueue()},De.toMiliseconds(this.requestQueueDelay))},this.processRequestQueue=async()=>{if(this.requestQueue.state===Wo.active){this.client.logger.info("session request queue is already active.");return}const r=this.requestQueue.requests[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:n,topic:i,params:o}=r,c=Ss(JSON.stringify({id:n,params:o})),l=this.client.session.get(i),h=await this.getVerifyContext(c,l.peer.metadata);this.requestQueue.state=Wo.active,this.client.events.emit("session_request",{id:n,topic:i,params:o,verifyContext:h})}catch(n){this.client.logger.error(n)}},this.isValidConnect=async r=>{if(!zr(r)){const{message:h}=_e("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(h)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:o,sessionProperties:c,relays:l}=r;if(Pr(n)||await this.isValidPairingTopic(n),!jb(l,!0)){const{message:h}=_e("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(h)}!Pr(i)&&Ds(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Pr(o)&&Ds(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),Pr(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Ub(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!zr(r))throw new Error(_e("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:o,sessionProperties:c}=r;await this.isValidProposalId(n);const l=this.client.proposal.get(n),h=Qa(i,"approve()");if(h)throw new Error(h.message);const f=H1(l.requiredNamespaces,i,"approve()");if(f)throw new Error(f.message);if(!gr(o,!0)){const{message:v}=_e("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(v)}Pr(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async r=>{if(!zr(r)){const{message:o}=_e("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(o)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Bb(i)){const{message:o}=_e("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidSessionSettleRequest=r=>{if(!zr(r)){const{message:f}=_e("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(f)}const{relay:n,controller:i,namespaces:o,expiry:c}=r;if(!B1(n)){const{message:f}=_e("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(f)}const l=Pb(i,"onSessionSettleRequest()");if(l)throw new Error(l.message);const h=Qa(o,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(hi(c)){const{message:f}=_e("EXPIRED","onSessionSettleRequest()");throw new Error(f)}},this.isValidUpdate=async r=>{if(!zr(r)){const{message:h}=_e("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(h)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const o=this.client.session.get(n),c=Qa(i,"update()");if(c)throw new Error(c.message);const l=H1(o.requiredNamespaces,i,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async r=>{if(!zr(r)){const{message:i}=_e("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!zr(r)){const{message:h}=_e("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(h)}const{topic:n,request:i,chainId:o,expiry:c}=r;await this.isValidSessionTopic(n);const{namespaces:l}=this.client.session.get(n);if(!k1(l,o)){const{message:h}=_e("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(h)}if(!kb(i)){const{message:h}=_e("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(h)}if(!Wb(l,o,i.method)){const{message:h}=_e("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(h)}if(c&&!Gb(c,mh)){const{message:h}=_e("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${mh.min} and ${mh.max}`);throw new Error(h)}},this.isValidRespond=async r=>{if(!zr(r)){const{message:o}=_e("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(o)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Hb(i)){const{message:o}=_e("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidPing=async r=>{if(!zr(r)){const{message:i}=_e("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!zr(r)){const{message:l}=_e("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(l)}const{topic:n,event:i,chainId:o}=r;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!k1(c,o)){const{message:l}=_e("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(l)}if(!zb(i)){const{message:l}=_e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}if(!qb(c,o,i.name)){const{message:l}=_e("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(l)}},this.isValidDisconnect=async r=>{if(!zr(r)){const{message:i}=_e("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const o=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});o&&(i.verified.origin=o,i.verified.validation=o===n.url?"VALID":"INVALID")}catch(o){this.client.logger.error(o)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!gr(i,!1)){const{message:o}=_e("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(o)}})}}isInitialized(){if(!this.initialized){const{message:e}=_e("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(kt.message,async e=>{const{topic:r,message:n}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);sh(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):sc(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:r,payload:i}),this.client.core.history.delete(r,i.id)):this.onRelayEventUnknownPayload({topic:r,payload:i})})}registerExpirerEvents(){this.client.core.expirer.on(on.expired,async e=>{const{topic:r,id:n}=L1(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,_e("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(e){if(!gr(e,!1)){const{message:r}=_e("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=_e("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(hi(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=_e("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!gr(e,!1)){const{message:r}=_e("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=_e("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(hi(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=_e("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(gr(e,!1)){const{message:r}=_e("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=_e("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Fb(e)){const{message:r}=_e("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=_e("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(hi(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=_e("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class y7 extends ac{constructor(e,r){super(e,r,c7,ph),this.core=e,this.logger=r}}class b7 extends ac{constructor(e,r){super(e,r,l7,ph),this.core=e,this.logger=r}}class _7 extends ac{constructor(e,r){super(e,r,h7,ph,n=>n.id),this.core=e,this.logger=r}}class vh extends A4{constructor(e){super(e),this.protocol=pg,this.version=gg,this.name=gh.name,this.events=new br.exports.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=e?.name||gh.name,this.metadata=e?.metadata||rb();const r=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:pt.pino(pt.getDefaultLoggerOptions({level:e?.logger||gh.logger}));this.core=e?.core||new o7(e),this.logger=pt.generateChildLogger(r,this.name),this.session=new b7(this.core,this.logger),this.proposal=new y7(this.core,this.logger),this.pendingRequest=new _7(this.core,this.logger),this.engine=new v7(this)}static async init(e){const r=new vh(e);return await r.initialize(),r}get context(){return pt.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var yh={exports:{}};(function(t,e){var r=typeof self<"u"?self:pr,n=function(){function o(){this.fetch=!1,this.DOMException=r.DOMException}return o.prototype=r,new o}();(function(o){(function(c){var l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function h(O){return O&&DataView.prototype.isPrototypeOf(O)}if(l.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(O){return O&&f.indexOf(Object.prototype.toString.call(O))>-1};function x(O){if(typeof O!="string"&&(O=String(O)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(O))throw new TypeError("Invalid character in header field name");return O.toLowerCase()}function _(O){return typeof O!="string"&&(O=String(O)),O}function S(O){var U={next:function(){var ce=O.shift();return{done:ce===void 0,value:ce}}};return l.iterable&&(U[Symbol.iterator]=function(){return U}),U}function P(O){this.map={},O instanceof P?O.forEach(function(U,ce){this.append(ce,U)},this):Array.isArray(O)?O.forEach(function(U){this.append(U[0],U[1])},this):O&&Object.getOwnPropertyNames(O).forEach(function(U){this.append(U,O[U])},this)}P.prototype.append=function(O,U){O=x(O),U=_(U);var ce=this.map[O];this.map[O]=ce?ce+", "+U:U},P.prototype.delete=function(O){delete this.map[x(O)]},P.prototype.get=function(O){return O=x(O),this.has(O)?this.map[O]:null},P.prototype.has=function(O){return this.map.hasOwnProperty(x(O))},P.prototype.set=function(O,U){this.map[x(O)]=_(U)},P.prototype.forEach=function(O,U){for(var ce in this.map)this.map.hasOwnProperty(ce)&&O.call(U,this.map[ce],ce,this)},P.prototype.keys=function(){var O=[];return this.forEach(function(U,ce){O.push(ce)}),S(O)},P.prototype.values=function(){var O=[];return this.forEach(function(U){O.push(U)}),S(O)},P.prototype.entries=function(){var O=[];return this.forEach(function(U,ce){O.push([ce,U])}),S(O)},l.iterable&&(P.prototype[Symbol.iterator]=P.prototype.entries);function j(O){if(O.bodyUsed)return Promise.reject(new TypeError("Already read"));O.bodyUsed=!0}function H(O){return new Promise(function(U,ce){O.onload=function(){U(O.result)},O.onerror=function(){ce(O.error)}})}function Z(O){var U=new FileReader,ce=H(U);return U.readAsArrayBuffer(O),ce}function R(O){var U=new FileReader,ce=H(U);return U.readAsText(O),ce}function L(O){for(var U=new Uint8Array(O),ce=new Array(U.length),le=0;le<U.length;le++)ce[le]=String.fromCharCode(U[le]);return ce.join("")}function $(O){if(O.slice)return O.slice(0);var U=new Uint8Array(O.byteLength);return U.set(new Uint8Array(O)),U.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(O){this._bodyInit=O,O?typeof O=="string"?this._bodyText=O:l.blob&&Blob.prototype.isPrototypeOf(O)?this._bodyBlob=O:l.formData&&FormData.prototype.isPrototypeOf(O)?this._bodyFormData=O:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)?this._bodyText=O.toString():l.arrayBuffer&&l.blob&&h(O)?(this._bodyArrayBuffer=$(O.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(O)||v(O))?this._bodyArrayBuffer=$(O):this._bodyText=O=Object.prototype.toString.call(O):this._bodyText="",this.headers.get("content-type")||(typeof O=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(O)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var O=j(this);if(O)return O;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?j(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Z)}),this.text=function(){var O=j(this);if(O)return O;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(J)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function d(O){var U=O.toUpperCase();return I.indexOf(U)>-1?U:O}function E(O,U){U=U||{};var ce=U.body;if(O instanceof E){if(O.bodyUsed)throw new TypeError("Already read");this.url=O.url,this.credentials=O.credentials,U.headers||(this.headers=new P(O.headers)),this.method=O.method,this.mode=O.mode,this.signal=O.signal,!ce&&O._bodyInit!=null&&(ce=O._bodyInit,O.bodyUsed=!0)}else this.url=String(O);if(this.credentials=U.credentials||this.credentials||"same-origin",(U.headers||!this.headers)&&(this.headers=new P(U.headers)),this.method=d(U.method||this.method||"GET"),this.mode=U.mode||this.mode||null,this.signal=U.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ce)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(ce)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function J(O){var U=new FormData;return O.trim().split("&").forEach(function(ce){if(ce){var le=ce.split("="),re=le.shift().replace(/\+/g," "),ne=le.join("=").replace(/\+/g," ");U.append(decodeURIComponent(re),decodeURIComponent(ne))}}),U}function z(O){var U=new P,ce=O.replace(/\r?\n[\t ]+/g," ");return ce.split(/\r?\n/).forEach(function(le){var re=le.split(":"),ne=re.shift().trim();if(ne){var ae=re.join(":").trim();U.append(ne,ae)}}),U}T.call(E.prototype);function ee(O,U){U||(U={}),this.type="default",this.status=U.status===void 0?200:U.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in U?U.statusText:"OK",this.headers=new P(U.headers),this.url=U.url||"",this._initBody(O)}T.call(ee.prototype),ee.prototype.clone=function(){return new ee(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new P(this.headers),url:this.url})},ee.error=function(){var O=new ee(null,{status:0,statusText:""});return O.type="error",O};var de=[301,302,303,307,308];ee.redirect=function(O,U){if(de.indexOf(U)===-1)throw new RangeError("Invalid status code");return new ee(null,{status:U,headers:{location:O}})},c.DOMException=o.DOMException;try{new c.DOMException}catch{c.DOMException=function(U,ce){this.message=U,this.name=ce;var le=Error(U);this.stack=le.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function me(O,U){return new Promise(function(ce,le){var re=new E(O,U);if(re.signal&&re.signal.aborted)return le(new c.DOMException("Aborted","AbortError"));var ne=new XMLHttpRequest;function ae(){ne.abort()}ne.onload=function(){var ie={status:ne.status,statusText:ne.statusText,headers:z(ne.getAllResponseHeaders()||"")};ie.url="responseURL"in ne?ne.responseURL:ie.headers.get("X-Request-URL");var Ae="response"in ne?ne.response:ne.responseText;ce(new ee(Ae,ie))},ne.onerror=function(){le(new TypeError("Network request failed"))},ne.ontimeout=function(){le(new TypeError("Network request failed"))},ne.onabort=function(){le(new c.DOMException("Aborted","AbortError"))},ne.open(re.method,re.url,!0),re.credentials==="include"?ne.withCredentials=!0:re.credentials==="omit"&&(ne.withCredentials=!1),"responseType"in ne&&l.blob&&(ne.responseType="blob"),re.headers.forEach(function(ie,Ae){ne.setRequestHeader(Ae,ie)}),re.signal&&(re.signal.addEventListener("abort",ae),ne.onreadystatechange=function(){ne.readyState===4&&re.signal.removeEventListener("abort",ae)}),ne.send(typeof re._bodyInit>"u"?null:re._bodyInit)})}return me.polyfill=!0,o.fetch||(o.fetch=me,o.Headers=P,o.Request=E,o.Response=ee),c.Headers=P,c.Request=E,c.Response=ee,c.fetch=me,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(yh,yh.exports);var bg=yw(yh.exports);const _g={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Eg=10;class Vi{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new br.exports.EventEmitter,this.isAvailable=!1,this.registering=!1,!Ap(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const n=Mo(e),o=await(await bg(this.url,Object.assign(Object.assign({},_g),{body:n}))).json();this.onPayload({data:o})}catch(n){this.onError(e.id,n)}}async register(e=this.url){if(!Ap(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),i(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Mo({id:1,jsonrpc:"2.0",method:"test",params:[]});await bg(e,Object.assign(Object.assign({},_g),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ju(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),o=ic(e,i);this.events.emit("payload",o)}parseError(e,r=this.url){return _p(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Eg&&this.events.setMaxListeners(Eg)}}const xg="error",E7="wss://relay.walletconnect.com",x7="wc",C7="universal_provider",Cg=`${x7}@2:${C7}:`,I7="https://rpc.walletconnect.com/v1",pi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bh={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(t,e){(function(){var r,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",f=500,v="__lodash_placeholder__",x=1,_=2,S=4,P=1,j=2,H=1,Z=2,R=4,L=8,$=16,T=32,I=64,d=128,E=256,J=512,z=30,ee="...",de=800,me=16,O=1,U=2,ce=3,le=1/0,re=9007199254740991,ne=17976931348623157e292,ae=0/0,ie=4294967295,Ae=ie-1,ge=ie>>>1,Be=[["ary",d],["bind",H],["bindKey",Z],["curry",L],["curryRight",$],["flip",J],["partial",T],["partialRight",I],["rearg",E]],ye="[object Arguments]",Me="[object Array]",X="[object AsyncFunction]",Y="[object Boolean]",W="[object Date]",w="[object DOMException]",F="[object Error]",we="[object Function]",ve="[object GeneratorFunction]",Ue="[object Map]",nt="[object Number]",at="[object Null]",Ge="[object Object]",Dt="[object Promise]",$t="[object Proxy]",Je="[object RegExp]",He="[object Set]",ke="[object String]",Ke="[object Symbol]",rt="[object Undefined]",je="[object WeakMap]",Ze="[object WeakSet]",b="[object ArrayBuffer]",p="[object DataView]",m="[object Float32Array]",D="[object Float64Array]",B="[object Int8Array]",K="[object Int16Array]",Q="[object Int32Array]",Ee="[object Uint8Array]",Ne="[object Uint8ClampedArray]",st="[object Uint16Array]",ht="[object Uint32Array]",lt=/\b__p \+= '';/g,Ur=/\b(__p \+=) '' \+/g,Jn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Si=/&(?:amp|lt|gt|quot|#39);/g,cs=/[&<>"']/g,zt=RegExp(Si.source),Lt=RegExp(cs.source),Wt=/<%-([\s\S]+?)%>/g,qt=/<%([\s\S]+?)%>/g,Ft=/<%=([\s\S]+?)%>/g,Mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ir=/^\w*$/,sr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vt=/[\\^$.*+?()[\]{}|]/g,or=RegExp(Vt.source),Kt=/^\s+/,Xt=/\s/,Gt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pt=/\{\n\/\* \[wrapped with (.+)\] \*/,ar=/,? & /,cr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hf=/[()=,{}\[\]\/\s]/,zf=/\\(\\)?/g,Wf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fn=/\w*$/,qf=/^[-+]0x[0-9a-f]+$/i,Vf=/^0b[01]+$/i,Kf=/^\[object .+?Constructor\]$/,Gf=/^0o[0-7]+$/i,Zf=/^(?:0|[1-9]\d*)$/,Xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qs=/($^)/,Yf=/['\n\r\u2028\u2029\\]/g,eo="\\ud800-\\udfff",Jf="\\u0300-\\u036f",Xf="\\ufe20-\\ufe2f",to="\\u20d0-\\u20ff",Xc=Jf+Xf+to,Qc="\\u2700-\\u27bf",Cn="a-z\\xdf-\\xf6\\xf8-\\xff",Qf="\\xac\\xb1\\xd7\\xf7",e0="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",t0="\\u2000-\\u206f",r0=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",el="A-Z\\xc0-\\xd6\\xd8-\\xde",tl="\\ufe0e\\ufe0f",ls=Qf+e0+t0+r0,va="['\u2019]",us="["+eo+"]",ya="["+ls+"]",hs="["+Xc+"]",rl="\\d+",n0="["+Qc+"]",nl="["+Cn+"]",il="[^"+eo+ls+rl+Qc+Cn+el+"]",ro="\\ud83c[\\udffb-\\udfff]",i0="(?:"+hs+"|"+ro+")",sl="[^"+eo+"]",no="(?:\\ud83c[\\udde6-\\uddff]){2}",Oi="[\\ud800-\\udbff][\\udc00-\\udfff]",Qr="["+el+"]",ol="\\u200d",al="(?:"+nl+"|"+il+")",Fn="(?:"+Qr+"|"+il+")",cl="(?:"+va+"(?:d|ll|m|re|s|t|ve))?",ll="(?:"+va+"(?:D|LL|M|RE|S|T|VE))?",ul=i0+"?",hl="["+tl+"]?",s0="(?:"+ol+"(?:"+[sl,no,Oi].join("|")+")"+hl+ul+")*",Qn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",dl=hl+ul+s0,io="(?:"+[n0,no,Oi].join("|")+")"+dl,o0="(?:"+[sl+hs+"?",hs,no,Oi,us].join("|")+")",ba=RegExp(va,"g"),a0=RegExp(hs,"g"),so=RegExp(ro+"(?="+ro+")|"+o0+dl,"g"),pl=RegExp([Qr+"?"+nl+"+"+cl+"(?="+[ya,Qr,"$"].join("|")+")",Fn+"+"+ll+"(?="+[ya,Qr+al,"$"].join("|")+")",Qr+"?"+al+"+"+cl,Qr+"+"+ll,fl,Qn,rl,io].join("|"),"g"),gl=RegExp("["+ol+eo+Xc+tl+"]"),fs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ml=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],c0=-1,Ct={};Ct[m]=Ct[D]=Ct[B]=Ct[K]=Ct[Q]=Ct[Ee]=Ct[Ne]=Ct[st]=Ct[ht]=!0,Ct[ye]=Ct[Me]=Ct[b]=Ct[Y]=Ct[p]=Ct[W]=Ct[F]=Ct[we]=Ct[Ue]=Ct[nt]=Ct[Ge]=Ct[Je]=Ct[He]=Ct[ke]=Ct[je]=!1;var xt={};xt[ye]=xt[Me]=xt[b]=xt[p]=xt[Y]=xt[W]=xt[m]=xt[D]=xt[B]=xt[K]=xt[Q]=xt[Ue]=xt[nt]=xt[Ge]=xt[Je]=xt[He]=xt[ke]=xt[Ke]=xt[Ee]=xt[Ne]=xt[st]=xt[ht]=!0,xt[F]=xt[we]=xt[je]=!1;var N={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},fe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ce={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},It=parseFloat,Xe=parseInt,Tt=typeof qo=="object"&&qo&&qo.Object===Object&&qo,lr=typeof self=="object"&&self&&self.Object===Object&&self,mt=Tt||lr||Function("return this")(),St=e&&!e.nodeType&&e,Qt=St&&!0&&t&&!t.nodeType&&t,qr=Qt&&Qt.exports===St,ur=qr&&Tt.process,Nt=function(){try{var V=Qt&&Qt.require&&Qt.require("util").types;return V||ur&&ur.binding&&ur.binding("util")}catch{}}(),jr=Nt&&Nt.isArrayBuffer,In=Nt&&Nt.isDate,dn=Nt&&Nt.isMap,Bn=Nt&&Nt.isRegExp,_a=Nt&&Nt.isSet,ds=Nt&&Nt.isTypedArray;function vr(V,se,te){switch(te.length){case 0:return V.call(se);case 1:return V.call(se,te[0]);case 2:return V.call(se,te[0],te[1]);case 3:return V.call(se,te[0],te[1],te[2])}return V.apply(se,te)}function hA(V,se,te,Ie){for(var Ye=-1,vt=V==null?0:V.length;++Ye<vt;){var fr=V[Ye];se(Ie,fr,te(fr),V)}return Ie}function pn(V,se){for(var te=-1,Ie=V==null?0:V.length;++te<Ie&&se(V[te],te,V)!==!1;);return V}function fA(V,se){for(var te=V==null?0:V.length;te--&&se(V[te],te,V)!==!1;);return V}function bm(V,se){for(var te=-1,Ie=V==null?0:V.length;++te<Ie;)if(!se(V[te],te,V))return!1;return!0}function Ai(V,se){for(var te=-1,Ie=V==null?0:V.length,Ye=0,vt=[];++te<Ie;){var fr=V[te];se(fr,te,V)&&(vt[Ye++]=fr)}return vt}function wl(V,se){var te=V==null?0:V.length;return!!te&&oo(V,se,0)>-1}function l0(V,se,te){for(var Ie=-1,Ye=V==null?0:V.length;++Ie<Ye;)if(te(se,V[Ie]))return!0;return!1}function Ut(V,se){for(var te=-1,Ie=V==null?0:V.length,Ye=Array(Ie);++te<Ie;)Ye[te]=se(V[te],te,V);return Ye}function Di(V,se){for(var te=-1,Ie=se.length,Ye=V.length;++te<Ie;)V[Ye+te]=se[te];return V}function u0(V,se,te,Ie){var Ye=-1,vt=V==null?0:V.length;for(Ie&&vt&&(te=V[++Ye]);++Ye<vt;)te=se(te,V[Ye],Ye,V);return te}function dA(V,se,te,Ie){var Ye=V==null?0:V.length;for(Ie&&Ye&&(te=V[--Ye]);Ye--;)te=se(te,V[Ye],Ye,V);return te}function h0(V,se){for(var te=-1,Ie=V==null?0:V.length;++te<Ie;)if(se(V[te],te,V))return!0;return!1}var pA=f0("length");function gA(V){return V.split("")}function mA(V){return V.match(cr)||[]}function _m(V,se,te){var Ie;return te(V,function(Ye,vt,fr){if(se(Ye,vt,fr))return Ie=vt,!1}),Ie}function vl(V,se,te,Ie){for(var Ye=V.length,vt=te+(Ie?1:-1);Ie?vt--:++vt<Ye;)if(se(V[vt],vt,V))return vt;return-1}function oo(V,se,te){return se===se?AA(V,se,te):vl(V,Em,te)}function wA(V,se,te,Ie){for(var Ye=te-1,vt=V.length;++Ye<vt;)if(Ie(V[Ye],se))return Ye;return-1}function Em(V){return V!==V}function xm(V,se){var te=V==null?0:V.length;return te?p0(V,se)/te:ae}function f0(V){return function(se){return se==null?r:se[V]}}function d0(V){return function(se){return V==null?r:V[se]}}function Cm(V,se,te,Ie,Ye){return Ye(V,function(vt,fr,Ot){te=Ie?(Ie=!1,vt):se(te,vt,fr,Ot)}),te}function vA(V,se){var te=V.length;for(V.sort(se);te--;)V[te]=V[te].value;return V}function p0(V,se){for(var te,Ie=-1,Ye=V.length;++Ie<Ye;){var vt=se(V[Ie]);vt!==r&&(te=te===r?vt:te+vt)}return te}function g0(V,se){for(var te=-1,Ie=Array(V);++te<V;)Ie[te]=se(te);return Ie}function yA(V,se){return Ut(se,function(te){return[te,V[te]]})}function Im(V){return V&&V.slice(0,Dm(V)+1).replace(Kt,"")}function en(V){return function(se){return V(se)}}function m0(V,se){return Ut(se,function(te){return V[te]})}function Ea(V,se){return V.has(se)}function Sm(V,se){for(var te=-1,Ie=V.length;++te<Ie&&oo(se,V[te],0)>-1;);return te}function Om(V,se){for(var te=V.length;te--&&oo(se,V[te],0)>-1;);return te}function bA(V,se){for(var te=V.length,Ie=0;te--;)V[te]===se&&++Ie;return Ie}var _A=d0(N),EA=d0(q);function xA(V){return"\\"+Ce[V]}function CA(V,se){return V==null?r:V[se]}function ao(V){return gl.test(V)}function IA(V){return fs.test(V)}function SA(V){for(var se,te=[];!(se=V.next()).done;)te.push(se.value);return te}function w0(V){var se=-1,te=Array(V.size);return V.forEach(function(Ie,Ye){te[++se]=[Ye,Ie]}),te}function Am(V,se){return function(te){return V(se(te))}}function $i(V,se){for(var te=-1,Ie=V.length,Ye=0,vt=[];++te<Ie;){var fr=V[te];(fr===se||fr===v)&&(V[te]=v,vt[Ye++]=te)}return vt}function yl(V){var se=-1,te=Array(V.size);return V.forEach(function(Ie){te[++se]=Ie}),te}function OA(V){var se=-1,te=Array(V.size);return V.forEach(function(Ie){te[++se]=[Ie,Ie]}),te}function AA(V,se,te){for(var Ie=te-1,Ye=V.length;++Ie<Ye;)if(V[Ie]===se)return Ie;return-1}function DA(V,se,te){for(var Ie=te+1;Ie--;)if(V[Ie]===se)return Ie;return Ie}function co(V){return ao(V)?PA(V):pA(V)}function Sn(V){return ao(V)?TA(V):gA(V)}function Dm(V){for(var se=V.length;se--&&Xt.test(V.charAt(se)););return se}var $A=d0(fe);function PA(V){for(var se=so.lastIndex=0;so.test(V);)++se;return se}function TA(V){return V.match(so)||[]}function NA(V){return V.match(pl)||[]}var RA=function V(se){se=se==null?mt:lo.defaults(mt.Object(),se,lo.pick(mt,ml));var te=se.Array,Ie=se.Date,Ye=se.Error,vt=se.Function,fr=se.Math,Ot=se.Object,v0=se.RegExp,LA=se.String,gn=se.TypeError,bl=te.prototype,MA=vt.prototype,uo=Ot.prototype,_l=se["__core-js_shared__"],El=MA.toString,bt=uo.hasOwnProperty,UA=0,$m=function(){var s=/[^.]+$/.exec(_l&&_l.keys&&_l.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),xl=uo.toString,jA=El.call(Ot),FA=mt._,BA=v0("^"+El.call(bt).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Cl=qr?se.Buffer:r,Pi=se.Symbol,Il=se.Uint8Array,Pm=Cl?Cl.allocUnsafe:r,Sl=Am(Ot.getPrototypeOf,Ot),Tm=Ot.create,Nm=uo.propertyIsEnumerable,Ol=bl.splice,Rm=Pi?Pi.isConcatSpreadable:r,xa=Pi?Pi.iterator:r,ps=Pi?Pi.toStringTag:r,Al=function(){try{var s=ys(Ot,"defineProperty");return s({},"",{}),s}catch{}}(),kA=se.clearTimeout!==mt.clearTimeout&&se.clearTimeout,HA=Ie&&Ie.now!==mt.Date.now&&Ie.now,zA=se.setTimeout!==mt.setTimeout&&se.setTimeout,Dl=fr.ceil,$l=fr.floor,y0=Ot.getOwnPropertySymbols,WA=Cl?Cl.isBuffer:r,Lm=se.isFinite,qA=bl.join,VA=Am(Ot.keys,Ot),dr=fr.max,Or=fr.min,KA=Ie.now,GA=se.parseInt,Mm=fr.random,ZA=bl.reverse,b0=ys(se,"DataView"),Ca=ys(se,"Map"),_0=ys(se,"Promise"),ho=ys(se,"Set"),Ia=ys(se,"WeakMap"),Sa=ys(Ot,"create"),Pl=Ia&&new Ia,fo={},YA=bs(b0),JA=bs(Ca),XA=bs(_0),QA=bs(ho),eD=bs(Ia),Tl=Pi?Pi.prototype:r,Oa=Tl?Tl.valueOf:r,Um=Tl?Tl.toString:r;function C(s){if(Zt(s)&&!Qe(s)&&!(s instanceof dt)){if(s instanceof mn)return s;if(bt.call(s,"__wrapped__"))return j2(s)}return new mn(s)}var po=function(){function s(){}return function(a){if(!Bt(a))return{};if(Tm)return Tm(a);s.prototype=a;var u=new s;return s.prototype=r,u}}();function Nl(){}function mn(s,a){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=r}C.templateSettings={escape:Wt,evaluate:qt,interpolate:Ft,variable:"",imports:{_:C}},C.prototype=Nl.prototype,C.prototype.constructor=C,mn.prototype=po(Nl.prototype),mn.prototype.constructor=mn;function dt(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function tD(){var s=new dt(this.__wrapped__);return s.__actions__=Vr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Vr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Vr(this.__views__),s}function rD(){if(this.__filtered__){var s=new dt(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function nD(){var s=this.__wrapped__.value(),a=this.__dir__,u=Qe(s),g=a<0,y=u?s.length:0,A=g$(0,y,this.__views__),M=A.start,k=A.end,G=k-M,ue=g?k:M-1,he=this.__iteratees__,pe=he.length,be=0,Te=Or(G,this.__takeCount__);if(!u||!g&&y==G&&Te==G)return a2(s,this.__actions__);var We=[];e:for(;G--&&be<Te;){ue+=a;for(var ot=-1,qe=s[ue];++ot<pe;){var ft=he[ot],wt=ft.iteratee,nn=ft.type,kr=wt(qe);if(nn==U)qe=kr;else if(!kr){if(nn==O)continue e;break e}}We[be++]=qe}return We}dt.prototype=po(Nl.prototype),dt.prototype.constructor=dt;function gs(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function iD(){this.__data__=Sa?Sa(null):{},this.size=0}function sD(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}function oD(s){var a=this.__data__;if(Sa){var u=a[s];return u===h?r:u}return bt.call(a,s)?a[s]:r}function aD(s){var a=this.__data__;return Sa?a[s]!==r:bt.call(a,s)}function cD(s,a){var u=this.__data__;return this.size+=this.has(s)?0:1,u[s]=Sa&&a===r?h:a,this}gs.prototype.clear=iD,gs.prototype.delete=sD,gs.prototype.get=oD,gs.prototype.has=aD,gs.prototype.set=cD;function ei(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function lD(){this.__data__=[],this.size=0}function uD(s){var a=this.__data__,u=Rl(a,s);if(u<0)return!1;var g=a.length-1;return u==g?a.pop():Ol.call(a,u,1),--this.size,!0}function hD(s){var a=this.__data__,u=Rl(a,s);return u<0?r:a[u][1]}function fD(s){return Rl(this.__data__,s)>-1}function dD(s,a){var u=this.__data__,g=Rl(u,s);return g<0?(++this.size,u.push([s,a])):u[g][1]=a,this}ei.prototype.clear=lD,ei.prototype.delete=uD,ei.prototype.get=hD,ei.prototype.has=fD,ei.prototype.set=dD;function ti(s){var a=-1,u=s==null?0:s.length;for(this.clear();++a<u;){var g=s[a];this.set(g[0],g[1])}}function pD(){this.size=0,this.__data__={hash:new gs,map:new(Ca||ei),string:new gs}}function gD(s){var a=Vl(this,s).delete(s);return this.size-=a?1:0,a}function mD(s){return Vl(this,s).get(s)}function wD(s){return Vl(this,s).has(s)}function vD(s,a){var u=Vl(this,s),g=u.size;return u.set(s,a),this.size+=u.size==g?0:1,this}ti.prototype.clear=pD,ti.prototype.delete=gD,ti.prototype.get=mD,ti.prototype.has=wD,ti.prototype.set=vD;function ms(s){var a=-1,u=s==null?0:s.length;for(this.__data__=new ti;++a<u;)this.add(s[a])}function yD(s){return this.__data__.set(s,h),this}function bD(s){return this.__data__.has(s)}ms.prototype.add=ms.prototype.push=yD,ms.prototype.has=bD;function On(s){var a=this.__data__=new ei(s);this.size=a.size}function _D(){this.__data__=new ei,this.size=0}function ED(s){var a=this.__data__,u=a.delete(s);return this.size=a.size,u}function xD(s){return this.__data__.get(s)}function CD(s){return this.__data__.has(s)}function ID(s,a){var u=this.__data__;if(u instanceof ei){var g=u.__data__;if(!Ca||g.length<i-1)return g.push([s,a]),this.size=++u.size,this;u=this.__data__=new ti(g)}return u.set(s,a),this.size=u.size,this}On.prototype.clear=_D,On.prototype.delete=ED,On.prototype.get=xD,On.prototype.has=CD,On.prototype.set=ID;function jm(s,a){var u=Qe(s),g=!u&&_s(s),y=!u&&!g&&Mi(s),A=!u&&!g&&!y&&vo(s),M=u||g||y||A,k=M?g0(s.length,LA):[],G=k.length;for(var ue in s)(a||bt.call(s,ue))&&!(M&&(ue=="length"||y&&(ue=="offset"||ue=="parent")||A&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||si(ue,G)))&&k.push(ue);return k}function Fm(s){var a=s.length;return a?s[T0(0,a-1)]:r}function SD(s,a){return Kl(Vr(s),ws(a,0,s.length))}function OD(s){return Kl(Vr(s))}function E0(s,a,u){(u!==r&&!An(s[a],u)||u===r&&!(a in s))&&ri(s,a,u)}function Aa(s,a,u){var g=s[a];(!(bt.call(s,a)&&An(g,u))||u===r&&!(a in s))&&ri(s,a,u)}function Rl(s,a){for(var u=s.length;u--;)if(An(s[u][0],a))return u;return-1}function AD(s,a,u,g){return Ti(s,function(y,A,M){a(g,y,u(y),M)}),g}function Bm(s,a){return s&&Hn(a,yr(a),s)}function DD(s,a){return s&&Hn(a,Gr(a),s)}function ri(s,a,u){a=="__proto__"&&Al?Al(s,a,{configurable:!0,enumerable:!0,value:u,writable:!0}):s[a]=u}function x0(s,a){for(var u=-1,g=a.length,y=te(g),A=s==null;++u<g;)y[u]=A?r:nd(s,a[u]);return y}function ws(s,a,u){return s===s&&(u!==r&&(s=s<=u?s:u),a!==r&&(s=s>=a?s:a)),s}function wn(s,a,u,g,y,A){var M,k=a&x,G=a&_,ue=a&S;if(u&&(M=y?u(s,g,y,A):u(s)),M!==r)return M;if(!Bt(s))return s;var he=Qe(s);if(he){if(M=w$(s),!k)return Vr(s,M)}else{var pe=Ar(s),be=pe==we||pe==ve;if(Mi(s))return u2(s,k);if(pe==Ge||pe==ye||be&&!y){if(M=G||be?{}:D2(s),!k)return G?o$(s,DD(M,s)):s$(s,Bm(M,s))}else{if(!xt[pe])return y?s:{};M=v$(s,pe,k)}}A||(A=new On);var Te=A.get(s);if(Te)return Te;A.set(s,M),iw(s)?s.forEach(function(qe){M.add(wn(qe,a,u,qe,s,A))}):rw(s)&&s.forEach(function(qe,ft){M.set(ft,wn(qe,a,u,ft,s,A))});var We=ue?G?z0:H0:G?Gr:yr,ot=he?r:We(s);return pn(ot||s,function(qe,ft){ot&&(ft=qe,qe=s[ft]),Aa(M,ft,wn(qe,a,u,ft,s,A))}),M}function $D(s){var a=yr(s);return function(u){return km(u,s,a)}}function km(s,a,u){var g=u.length;if(s==null)return!g;for(s=Ot(s);g--;){var y=u[g],A=a[y],M=s[y];if(M===r&&!(y in s)||!A(M))return!1}return!0}function Hm(s,a,u){if(typeof s!="function")throw new gn(c);return La(function(){s.apply(r,u)},a)}function Da(s,a,u,g){var y=-1,A=wl,M=!0,k=s.length,G=[],ue=a.length;if(!k)return G;u&&(a=Ut(a,en(u))),g?(A=l0,M=!1):a.length>=i&&(A=Ea,M=!1,a=new ms(a));e:for(;++y<k;){var he=s[y],pe=u==null?he:u(he);if(he=g||he!==0?he:0,M&&pe===pe){for(var be=ue;be--;)if(a[be]===pe)continue e;G.push(he)}else A(a,pe,g)||G.push(he)}return G}var Ti=g2(kn),zm=g2(I0,!0);function PD(s,a){var u=!0;return Ti(s,function(g,y,A){return u=!!a(g,y,A),u}),u}function Ll(s,a,u){for(var g=-1,y=s.length;++g<y;){var A=s[g],M=a(A);if(M!=null&&(k===r?M===M&&!rn(M):u(M,k)))var k=M,G=A}return G}function TD(s,a,u,g){var y=s.length;for(u=it(u),u<0&&(u=-u>y?0:y+u),g=g===r||g>y?y:it(g),g<0&&(g+=y),g=u>g?0:ow(g);u<g;)s[u++]=a;return s}function Wm(s,a){var u=[];return Ti(s,function(g,y,A){a(g,y,A)&&u.push(g)}),u}function Cr(s,a,u,g,y){var A=-1,M=s.length;for(u||(u=b$),y||(y=[]);++A<M;){var k=s[A];a>0&&u(k)?a>1?Cr(k,a-1,u,g,y):Di(y,k):g||(y[y.length]=k)}return y}var C0=m2(),qm=m2(!0);function kn(s,a){return s&&C0(s,a,yr)}function I0(s,a){return s&&qm(s,a,yr)}function Ml(s,a){return Ai(a,function(u){return oi(s[u])})}function vs(s,a){a=Ri(a,s);for(var u=0,g=a.length;s!=null&&u<g;)s=s[zn(a[u++])];return u&&u==g?s:r}function Vm(s,a,u){var g=a(s);return Qe(s)?g:Di(g,u(s))}function Fr(s){return s==null?s===r?rt:at:ps&&ps in Ot(s)?p$(s):O$(s)}function S0(s,a){return s>a}function ND(s,a){return s!=null&&bt.call(s,a)}function RD(s,a){return s!=null&&a in Ot(s)}function LD(s,a,u){return s>=Or(a,u)&&s<dr(a,u)}function O0(s,a,u){for(var g=u?l0:wl,y=s[0].length,A=s.length,M=A,k=te(A),G=1/0,ue=[];M--;){var he=s[M];M&&a&&(he=Ut(he,en(a))),G=Or(he.length,G),k[M]=!u&&(a||y>=120&&he.length>=120)?new ms(M&&he):r}he=s[0];var pe=-1,be=k[0];e:for(;++pe<y&&ue.length<G;){var Te=he[pe],We=a?a(Te):Te;if(Te=u||Te!==0?Te:0,!(be?Ea(be,We):g(ue,We,u))){for(M=A;--M;){var ot=k[M];if(!(ot?Ea(ot,We):g(s[M],We,u)))continue e}be&&be.push(We),ue.push(Te)}}return ue}function MD(s,a,u,g){return kn(s,function(y,A,M){a(g,u(y),A,M)}),g}function $a(s,a,u){a=Ri(a,s),s=N2(s,a);var g=s==null?s:s[zn(yn(a))];return g==null?r:vr(g,s,u)}function Km(s){return Zt(s)&&Fr(s)==ye}function UD(s){return Zt(s)&&Fr(s)==b}function jD(s){return Zt(s)&&Fr(s)==W}function Pa(s,a,u,g,y){return s===a?!0:s==null||a==null||!Zt(s)&&!Zt(a)?s!==s&&a!==a:FD(s,a,u,g,Pa,y)}function FD(s,a,u,g,y,A){var M=Qe(s),k=Qe(a),G=M?Me:Ar(s),ue=k?Me:Ar(a);G=G==ye?Ge:G,ue=ue==ye?Ge:ue;var he=G==Ge,pe=ue==Ge,be=G==ue;if(be&&Mi(s)){if(!Mi(a))return!1;M=!0,he=!1}if(be&&!he)return A||(A=new On),M||vo(s)?S2(s,a,u,g,y,A):f$(s,a,G,u,g,y,A);if(!(u&P)){var Te=he&&bt.call(s,"__wrapped__"),We=pe&&bt.call(a,"__wrapped__");if(Te||We){var ot=Te?s.value():s,qe=We?a.value():a;return A||(A=new On),y(ot,qe,u,g,A)}}return be?(A||(A=new On),d$(s,a,u,g,y,A)):!1}function BD(s){return Zt(s)&&Ar(s)==Ue}function A0(s,a,u,g){var y=u.length,A=y,M=!g;if(s==null)return!A;for(s=Ot(s);y--;){var k=u[y];if(M&&k[2]?k[1]!==s[k[0]]:!(k[0]in s))return!1}for(;++y<A;){k=u[y];var G=k[0],ue=s[G],he=k[1];if(M&&k[2]){if(ue===r&&!(G in s))return!1}else{var pe=new On;if(g)var be=g(ue,he,G,s,a,pe);if(!(be===r?Pa(he,ue,P|j,g,pe):be))return!1}}return!0}function Gm(s){if(!Bt(s)||E$(s))return!1;var a=oi(s)?BA:Kf;return a.test(bs(s))}function kD(s){return Zt(s)&&Fr(s)==Je}function HD(s){return Zt(s)&&Ar(s)==He}function zD(s){return Zt(s)&&Ql(s.length)&&!!Ct[Fr(s)]}function Zm(s){return typeof s=="function"?s:s==null?Zr:typeof s=="object"?Qe(s)?Xm(s[0],s[1]):Jm(s):ww(s)}function D0(s){if(!Ra(s))return VA(s);var a=[];for(var u in Ot(s))bt.call(s,u)&&u!="constructor"&&a.push(u);return a}function WD(s){if(!Bt(s))return S$(s);var a=Ra(s),u=[];for(var g in s)g=="constructor"&&(a||!bt.call(s,g))||u.push(g);return u}function $0(s,a){return s<a}function Ym(s,a){var u=-1,g=Kr(s)?te(s.length):[];return Ti(s,function(y,A,M){g[++u]=a(y,A,M)}),g}function Jm(s){var a=q0(s);return a.length==1&&a[0][2]?P2(a[0][0],a[0][1]):function(u){return u===s||A0(u,s,a)}}function Xm(s,a){return K0(s)&&$2(a)?P2(zn(s),a):function(u){var g=nd(u,s);return g===r&&g===a?id(u,s):Pa(a,g,P|j)}}function Ul(s,a,u,g,y){s!==a&&C0(a,function(A,M){if(y||(y=new On),Bt(A))qD(s,a,M,u,Ul,g,y);else{var k=g?g(Z0(s,M),A,M+"",s,a,y):r;k===r&&(k=A),E0(s,M,k)}},Gr)}function qD(s,a,u,g,y,A,M){var k=Z0(s,u),G=Z0(a,u),ue=M.get(G);if(ue){E0(s,u,ue);return}var he=A?A(k,G,u+"",s,a,M):r,pe=he===r;if(pe){var be=Qe(G),Te=!be&&Mi(G),We=!be&&!Te&&vo(G);he=G,be||Te||We?Qe(k)?he=k:er(k)?he=Vr(k):Te?(pe=!1,he=u2(G,!0)):We?(pe=!1,he=h2(G,!0)):he=[]:Ma(G)||_s(G)?(he=k,_s(k)?he=aw(k):(!Bt(k)||oi(k))&&(he=D2(G))):pe=!1}pe&&(M.set(G,he),y(he,G,g,A,M),M.delete(G)),E0(s,u,he)}function Qm(s,a){var u=s.length;if(u)return a+=a<0?u:0,si(a,u)?s[a]:r}function e2(s,a,u){a.length?a=Ut(a,function(A){return Qe(A)?function(M){return vs(M,A.length===1?A[0]:A)}:A}):a=[Zr];var g=-1;a=Ut(a,en(ze()));var y=Ym(s,function(A,M,k){var G=Ut(a,function(ue){return ue(A)});return{criteria:G,index:++g,value:A}});return vA(y,function(A,M){return i$(A,M,u)})}function VD(s,a){return t2(s,a,function(u,g){return id(s,g)})}function t2(s,a,u){for(var g=-1,y=a.length,A={};++g<y;){var M=a[g],k=vs(s,M);u(k,M)&&Ta(A,Ri(M,s),k)}return A}function KD(s){return function(a){return vs(a,s)}}function P0(s,a,u,g){var y=g?wA:oo,A=-1,M=a.length,k=s;for(s===a&&(a=Vr(a)),u&&(k=Ut(s,en(u)));++A<M;)for(var G=0,ue=a[A],he=u?u(ue):ue;(G=y(k,he,G,g))>-1;)k!==s&&Ol.call(k,G,1),Ol.call(s,G,1);return s}function r2(s,a){for(var u=s?a.length:0,g=u-1;u--;){var y=a[u];if(u==g||y!==A){var A=y;si(y)?Ol.call(s,y,1):L0(s,y)}}return s}function T0(s,a){return s+$l(Mm()*(a-s+1))}function GD(s,a,u,g){for(var y=-1,A=dr(Dl((a-s)/(u||1)),0),M=te(A);A--;)M[g?A:++y]=s,s+=u;return M}function N0(s,a){var u="";if(!s||a<1||a>re)return u;do a%2&&(u+=s),a=$l(a/2),a&&(s+=s);while(a);return u}function ct(s,a){return Y0(T2(s,a,Zr),s+"")}function ZD(s){return Fm(yo(s))}function YD(s,a){var u=yo(s);return Kl(u,ws(a,0,u.length))}function Ta(s,a,u,g){if(!Bt(s))return s;a=Ri(a,s);for(var y=-1,A=a.length,M=A-1,k=s;k!=null&&++y<A;){var G=zn(a[y]),ue=u;if(G==="__proto__"||G==="constructor"||G==="prototype")return s;if(y!=M){var he=k[G];ue=g?g(he,G,k):r,ue===r&&(ue=Bt(he)?he:si(a[y+1])?[]:{})}Aa(k,G,ue),k=k[G]}return s}var n2=Pl?function(s,a){return Pl.set(s,a),s}:Zr,JD=Al?function(s,a){return Al(s,"toString",{configurable:!0,enumerable:!1,value:od(a),writable:!0})}:Zr;function XD(s){return Kl(yo(s))}function vn(s,a,u){var g=-1,y=s.length;a<0&&(a=-a>y?0:y+a),u=u>y?y:u,u<0&&(u+=y),y=a>u?0:u-a>>>0,a>>>=0;for(var A=te(y);++g<y;)A[g]=s[g+a];return A}function QD(s,a){var u;return Ti(s,function(g,y,A){return u=a(g,y,A),!u}),!!u}function jl(s,a,u){var g=0,y=s==null?g:s.length;if(typeof a=="number"&&a===a&&y<=ge){for(;g<y;){var A=g+y>>>1,M=s[A];M!==null&&!rn(M)&&(u?M<=a:M<a)?g=A+1:y=A}return y}return R0(s,a,Zr,u)}function R0(s,a,u,g){var y=0,A=s==null?0:s.length;if(A===0)return 0;a=u(a);for(var M=a!==a,k=a===null,G=rn(a),ue=a===r;y<A;){var he=$l((y+A)/2),pe=u(s[he]),be=pe!==r,Te=pe===null,We=pe===pe,ot=rn(pe);if(M)var qe=g||We;else ue?qe=We&&(g||be):k?qe=We&&be&&(g||!Te):G?qe=We&&be&&!Te&&(g||!ot):Te||ot?qe=!1:qe=g?pe<=a:pe<a;qe?y=he+1:A=he}return Or(A,Ae)}function i2(s,a){for(var u=-1,g=s.length,y=0,A=[];++u<g;){var M=s[u],k=a?a(M):M;if(!u||!An(k,G)){var G=k;A[y++]=M===0?0:M}}return A}function s2(s){return typeof s=="number"?s:rn(s)?ae:+s}function tn(s){if(typeof s=="string")return s;if(Qe(s))return Ut(s,tn)+"";if(rn(s))return Um?Um.call(s):"";var a=s+"";return a=="0"&&1/s==-le?"-0":a}function Ni(s,a,u){var g=-1,y=wl,A=s.length,M=!0,k=[],G=k;if(u)M=!1,y=l0;else if(A>=i){var ue=a?null:u$(s);if(ue)return yl(ue);M=!1,y=Ea,G=new ms}else G=a?[]:k;e:for(;++g<A;){var he=s[g],pe=a?a(he):he;if(he=u||he!==0?he:0,M&&pe===pe){for(var be=G.length;be--;)if(G[be]===pe)continue e;a&&G.push(pe),k.push(he)}else y(G,pe,u)||(G!==k&&G.push(pe),k.push(he))}return k}function L0(s,a){return a=Ri(a,s),s=N2(s,a),s==null||delete s[zn(yn(a))]}function o2(s,a,u,g){return Ta(s,a,u(vs(s,a)),g)}function Fl(s,a,u,g){for(var y=s.length,A=g?y:-1;(g?A--:++A<y)&&a(s[A],A,s););return u?vn(s,g?0:A,g?A+1:y):vn(s,g?A+1:0,g?y:A)}function a2(s,a){var u=s;return u instanceof dt&&(u=u.value()),u0(a,function(g,y){return y.func.apply(y.thisArg,Di([g],y.args))},u)}function M0(s,a,u){var g=s.length;if(g<2)return g?Ni(s[0]):[];for(var y=-1,A=te(g);++y<g;)for(var M=s[y],k=-1;++k<g;)k!=y&&(A[y]=Da(A[y]||M,s[k],a,u));return Ni(Cr(A,1),a,u)}function c2(s,a,u){for(var g=-1,y=s.length,A=a.length,M={};++g<y;){var k=g<A?a[g]:r;u(M,s[g],k)}return M}function U0(s){return er(s)?s:[]}function j0(s){return typeof s=="function"?s:Zr}function Ri(s,a){return Qe(s)?s:K0(s,a)?[s]:U2(yt(s))}var e$=ct;function Li(s,a,u){var g=s.length;return u=u===r?g:u,!a&&u>=g?s:vn(s,a,u)}var l2=kA||function(s){return mt.clearTimeout(s)};function u2(s,a){if(a)return s.slice();var u=s.length,g=Pm?Pm(u):new s.constructor(u);return s.copy(g),g}function F0(s){var a=new s.constructor(s.byteLength);return new Il(a).set(new Il(s)),a}function t$(s,a){var u=a?F0(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.byteLength)}function r$(s){var a=new s.constructor(s.source,fn.exec(s));return a.lastIndex=s.lastIndex,a}function n$(s){return Oa?Ot(Oa.call(s)):{}}function h2(s,a){var u=a?F0(s.buffer):s.buffer;return new s.constructor(u,s.byteOffset,s.length)}function f2(s,a){if(s!==a){var u=s!==r,g=s===null,y=s===s,A=rn(s),M=a!==r,k=a===null,G=a===a,ue=rn(a);if(!k&&!ue&&!A&&s>a||A&&M&&G&&!k&&!ue||g&&M&&G||!u&&G||!y)return 1;if(!g&&!A&&!ue&&s<a||ue&&u&&y&&!g&&!A||k&&u&&y||!M&&y||!G)return-1}return 0}function i$(s,a,u){for(var g=-1,y=s.criteria,A=a.criteria,M=y.length,k=u.length;++g<M;){var G=f2(y[g],A[g]);if(G){if(g>=k)return G;var ue=u[g];return G*(ue=="desc"?-1:1)}}return s.index-a.index}function d2(s,a,u,g){for(var y=-1,A=s.length,M=u.length,k=-1,G=a.length,ue=dr(A-M,0),he=te(G+ue),pe=!g;++k<G;)he[k]=a[k];for(;++y<M;)(pe||y<A)&&(he[u[y]]=s[y]);for(;ue--;)he[k++]=s[y++];return he}function p2(s,a,u,g){for(var y=-1,A=s.length,M=-1,k=u.length,G=-1,ue=a.length,he=dr(A-k,0),pe=te(he+ue),be=!g;++y<he;)pe[y]=s[y];for(var Te=y;++G<ue;)pe[Te+G]=a[G];for(;++M<k;)(be||y<A)&&(pe[Te+u[M]]=s[y++]);return pe}function Vr(s,a){var u=-1,g=s.length;for(a||(a=te(g));++u<g;)a[u]=s[u];return a}function Hn(s,a,u,g){var y=!u;u||(u={});for(var A=-1,M=a.length;++A<M;){var k=a[A],G=g?g(u[k],s[k],k,u,s):r;G===r&&(G=s[k]),y?ri(u,k,G):Aa(u,k,G)}return u}function s$(s,a){return Hn(s,V0(s),a)}function o$(s,a){return Hn(s,O2(s),a)}function Bl(s,a){return function(u,g){var y=Qe(u)?hA:AD,A=a?a():{};return y(u,s,ze(g,2),A)}}function go(s){return ct(function(a,u){var g=-1,y=u.length,A=y>1?u[y-1]:r,M=y>2?u[2]:r;for(A=s.length>3&&typeof A=="function"?(y--,A):r,M&&Br(u[0],u[1],M)&&(A=y<3?r:A,y=1),a=Ot(a);++g<y;){var k=u[g];k&&s(a,k,g,A)}return a})}function g2(s,a){return function(u,g){if(u==null)return u;if(!Kr(u))return s(u,g);for(var y=u.length,A=a?y:-1,M=Ot(u);(a?A--:++A<y)&&g(M[A],A,M)!==!1;);return u}}function m2(s){return function(a,u,g){for(var y=-1,A=Ot(a),M=g(a),k=M.length;k--;){var G=M[s?k:++y];if(u(A[G],G,A)===!1)break}return a}}function a$(s,a,u){var g=a&H,y=Na(s);function A(){var M=this&&this!==mt&&this instanceof A?y:s;return M.apply(g?u:this,arguments)}return A}function w2(s){return function(a){a=yt(a);var u=ao(a)?Sn(a):r,g=u?u[0]:a.charAt(0),y=u?Li(u,1).join(""):a.slice(1);return g[s]()+y}}function mo(s){return function(a){return u0(gw(pw(a).replace(ba,"")),s,"")}}function Na(s){return function(){var a=arguments;switch(a.length){case 0:return new s;case 1:return new s(a[0]);case 2:return new s(a[0],a[1]);case 3:return new s(a[0],a[1],a[2]);case 4:return new s(a[0],a[1],a[2],a[3]);case 5:return new s(a[0],a[1],a[2],a[3],a[4]);case 6:return new s(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new s(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var u=po(s.prototype),g=s.apply(u,a);return Bt(g)?g:u}}function c$(s,a,u){var g=Na(s);function y(){for(var A=arguments.length,M=te(A),k=A,G=wo(y);k--;)M[k]=arguments[k];var ue=A<3&&M[0]!==G&&M[A-1]!==G?[]:$i(M,G);if(A-=ue.length,A<u)return E2(s,a,kl,y.placeholder,r,M,ue,r,r,u-A);var he=this&&this!==mt&&this instanceof y?g:s;return vr(he,this,M)}return y}function v2(s){return function(a,u,g){var y=Ot(a);if(!Kr(a)){var A=ze(u,3);a=yr(a),u=function(k){return A(y[k],k,y)}}var M=s(a,u,g);return M>-1?y[A?a[M]:M]:r}}function y2(s){return ii(function(a){var u=a.length,g=u,y=mn.prototype.thru;for(s&&a.reverse();g--;){var A=a[g];if(typeof A!="function")throw new gn(c);if(y&&!M&&ql(A)=="wrapper")var M=new mn([],!0)}for(g=M?g:u;++g<u;){A=a[g];var k=ql(A),G=k=="wrapper"?W0(A):r;G&&G0(G[0])&&G[1]==(d|L|T|E)&&!G[4].length&&G[9]==1?M=M[ql(G[0])].apply(M,G[3]):M=A.length==1&&G0(A)?M[k]():M.thru(A)}return function(){var ue=arguments,he=ue[0];if(M&&ue.length==1&&Qe(he))return M.plant(he).value();for(var pe=0,be=u?a[pe].apply(this,ue):he;++pe<u;)be=a[pe].call(this,be);return be}})}function kl(s,a,u,g,y,A,M,k,G,ue){var he=a&d,pe=a&H,be=a&Z,Te=a&(L|$),We=a&J,ot=be?r:Na(s);function qe(){for(var ft=arguments.length,wt=te(ft),nn=ft;nn--;)wt[nn]=arguments[nn];if(Te)var kr=wo(qe),sn=bA(wt,kr);if(g&&(wt=d2(wt,g,y,Te)),A&&(wt=p2(wt,A,M,Te)),ft-=sn,Te&&ft<ue){var tr=$i(wt,kr);return E2(s,a,kl,qe.placeholder,u,wt,tr,k,G,ue-ft)}var Dn=pe?u:this,ci=be?Dn[s]:s;return ft=wt.length,k?wt=A$(wt,k):We&&ft>1&&wt.reverse(),he&&G<ft&&(wt.length=G),this&&this!==mt&&this instanceof qe&&(ci=ot||Na(ci)),ci.apply(Dn,wt)}return qe}function b2(s,a){return function(u,g){return MD(u,s,a(g),{})}}function Hl(s,a){return function(u,g){var y;if(u===r&&g===r)return a;if(u!==r&&(y=u),g!==r){if(y===r)return g;typeof u=="string"||typeof g=="string"?(u=tn(u),g=tn(g)):(u=s2(u),g=s2(g)),y=s(u,g)}return y}}function B0(s){return ii(function(a){return a=Ut(a,en(ze())),ct(function(u){var g=this;return s(a,function(y){return vr(y,g,u)})})})}function zl(s,a){a=a===r?" ":tn(a);var u=a.length;if(u<2)return u?N0(a,s):a;var g=N0(a,Dl(s/co(a)));return ao(a)?Li(Sn(g),0,s).join(""):g.slice(0,s)}function l$(s,a,u,g){var y=a&H,A=Na(s);function M(){for(var k=-1,G=arguments.length,ue=-1,he=g.length,pe=te(he+G),be=this&&this!==mt&&this instanceof M?A:s;++ue<he;)pe[ue]=g[ue];for(;G--;)pe[ue++]=arguments[++k];return vr(be,y?u:this,pe)}return M}function _2(s){return function(a,u,g){return g&&typeof g!="number"&&Br(a,u,g)&&(u=g=r),a=ai(a),u===r?(u=a,a=0):u=ai(u),g=g===r?a<u?1:-1:ai(g),GD(a,u,g,s)}}function Wl(s){return function(a,u){return typeof a=="string"&&typeof u=="string"||(a=bn(a),u=bn(u)),s(a,u)}}function E2(s,a,u,g,y,A,M,k,G,ue){var he=a&L,pe=he?M:r,be=he?r:M,Te=he?A:r,We=he?r:A;a|=he?T:I,a&=~(he?I:T),a&R||(a&=~(H|Z));var ot=[s,a,y,Te,pe,We,be,k,G,ue],qe=u.apply(r,ot);return G0(s)&&R2(qe,ot),qe.placeholder=g,L2(qe,s,a)}function k0(s){var a=fr[s];return function(u,g){if(u=bn(u),g=g==null?0:Or(it(g),292),g&&Lm(u)){var y=(yt(u)+"e").split("e"),A=a(y[0]+"e"+(+y[1]+g));return y=(yt(A)+"e").split("e"),+(y[0]+"e"+(+y[1]-g))}return a(u)}}var u$=ho&&1/yl(new ho([,-0]))[1]==le?function(s){return new ho(s)}:ld;function x2(s){return function(a){var u=Ar(a);return u==Ue?w0(a):u==He?OA(a):yA(a,s(a))}}function ni(s,a,u,g,y,A,M,k){var G=a&Z;if(!G&&typeof s!="function")throw new gn(c);var ue=g?g.length:0;if(ue||(a&=~(T|I),g=y=r),M=M===r?M:dr(it(M),0),k=k===r?k:it(k),ue-=y?y.length:0,a&I){var he=g,pe=y;g=y=r}var be=G?r:W0(s),Te=[s,a,u,g,y,he,pe,A,M,k];if(be&&I$(Te,be),s=Te[0],a=Te[1],u=Te[2],g=Te[3],y=Te[4],k=Te[9]=Te[9]===r?G?0:s.length:dr(Te[9]-ue,0),!k&&a&(L|$)&&(a&=~(L|$)),!a||a==H)var We=a$(s,a,u);else a==L||a==$?We=c$(s,a,k):(a==T||a==(H|T))&&!y.length?We=l$(s,a,u,g):We=kl.apply(r,Te);var ot=be?n2:R2;return L2(ot(We,Te),s,a)}function C2(s,a,u,g){return s===r||An(s,uo[u])&&!bt.call(g,u)?a:s}function I2(s,a,u,g,y,A){return Bt(s)&&Bt(a)&&(A.set(a,s),Ul(s,a,r,I2,A),A.delete(a)),s}function h$(s){return Ma(s)?r:s}function S2(s,a,u,g,y,A){var M=u&P,k=s.length,G=a.length;if(k!=G&&!(M&&G>k))return!1;var ue=A.get(s),he=A.get(a);if(ue&&he)return ue==a&&he==s;var pe=-1,be=!0,Te=u&j?new ms:r;for(A.set(s,a),A.set(a,s);++pe<k;){var We=s[pe],ot=a[pe];if(g)var qe=M?g(ot,We,pe,a,s,A):g(We,ot,pe,s,a,A);if(qe!==r){if(qe)continue;be=!1;break}if(Te){if(!h0(a,function(ft,wt){if(!Ea(Te,wt)&&(We===ft||y(We,ft,u,g,A)))return Te.push(wt)})){be=!1;break}}else if(!(We===ot||y(We,ot,u,g,A))){be=!1;break}}return A.delete(s),A.delete(a),be}function f$(s,a,u,g,y,A,M){switch(u){case p:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case b:return!(s.byteLength!=a.byteLength||!A(new Il(s),new Il(a)));case Y:case W:case nt:return An(+s,+a);case F:return s.name==a.name&&s.message==a.message;case Je:case ke:return s==a+"";case Ue:var k=w0;case He:var G=g&P;if(k||(k=yl),s.size!=a.size&&!G)return!1;var ue=M.get(s);if(ue)return ue==a;g|=j,M.set(s,a);var he=S2(k(s),k(a),g,y,A,M);return M.delete(s),he;case Ke:if(Oa)return Oa.call(s)==Oa.call(a)}return!1}function d$(s,a,u,g,y,A){var M=u&P,k=H0(s),G=k.length,ue=H0(a),he=ue.length;if(G!=he&&!M)return!1;for(var pe=G;pe--;){var be=k[pe];if(!(M?be in a:bt.call(a,be)))return!1}var Te=A.get(s),We=A.get(a);if(Te&&We)return Te==a&&We==s;var ot=!0;A.set(s,a),A.set(a,s);for(var qe=M;++pe<G;){be=k[pe];var ft=s[be],wt=a[be];if(g)var nn=M?g(wt,ft,be,a,s,A):g(ft,wt,be,s,a,A);if(!(nn===r?ft===wt||y(ft,wt,u,g,A):nn)){ot=!1;break}qe||(qe=be=="constructor")}if(ot&&!qe){var kr=s.constructor,sn=a.constructor;kr!=sn&&"constructor"in s&&"constructor"in a&&!(typeof kr=="function"&&kr instanceof kr&&typeof sn=="function"&&sn instanceof sn)&&(ot=!1)}return A.delete(s),A.delete(a),ot}function ii(s){return Y0(T2(s,r,k2),s+"")}function H0(s){return Vm(s,yr,V0)}function z0(s){return Vm(s,Gr,O2)}var W0=Pl?function(s){return Pl.get(s)}:ld;function ql(s){for(var a=s.name+"",u=fo[a],g=bt.call(fo,a)?u.length:0;g--;){var y=u[g],A=y.func;if(A==null||A==s)return y.name}return a}function wo(s){var a=bt.call(C,"placeholder")?C:s;return a.placeholder}function ze(){var s=C.iteratee||ad;return s=s===ad?Zm:s,arguments.length?s(arguments[0],arguments[1]):s}function Vl(s,a){var u=s.__data__;return _$(a)?u[typeof a=="string"?"string":"hash"]:u.map}function q0(s){for(var a=yr(s),u=a.length;u--;){var g=a[u],y=s[g];a[u]=[g,y,$2(y)]}return a}function ys(s,a){var u=CA(s,a);return Gm(u)?u:r}function p$(s){var a=bt.call(s,ps),u=s[ps];try{s[ps]=r;var g=!0}catch{}var y=xl.call(s);return g&&(a?s[ps]=u:delete s[ps]),y}var V0=y0?function(s){return s==null?[]:(s=Ot(s),Ai(y0(s),function(a){return Nm.call(s,a)}))}:ud,O2=y0?function(s){for(var a=[];s;)Di(a,V0(s)),s=Sl(s);return a}:ud,Ar=Fr;(b0&&Ar(new b0(new ArrayBuffer(1)))!=p||Ca&&Ar(new Ca)!=Ue||_0&&Ar(_0.resolve())!=Dt||ho&&Ar(new ho)!=He||Ia&&Ar(new Ia)!=je)&&(Ar=function(s){var a=Fr(s),u=a==Ge?s.constructor:r,g=u?bs(u):"";if(g)switch(g){case YA:return p;case JA:return Ue;case XA:return Dt;case QA:return He;case eD:return je}return a});function g$(s,a,u){for(var g=-1,y=u.length;++g<y;){var A=u[g],M=A.size;switch(A.type){case"drop":s+=M;break;case"dropRight":a-=M;break;case"take":a=Or(a,s+M);break;case"takeRight":s=dr(s,a-M);break}}return{start:s,end:a}}function m$(s){var a=s.match(Pt);return a?a[1].split(ar):[]}function A2(s,a,u){a=Ri(a,s);for(var g=-1,y=a.length,A=!1;++g<y;){var M=zn(a[g]);if(!(A=s!=null&&u(s,M)))break;s=s[M]}return A||++g!=y?A:(y=s==null?0:s.length,!!y&&Ql(y)&&si(M,y)&&(Qe(s)||_s(s)))}function w$(s){var a=s.length,u=new s.constructor(a);return a&&typeof s[0]=="string"&&bt.call(s,"index")&&(u.index=s.index,u.input=s.input),u}function D2(s){return typeof s.constructor=="function"&&!Ra(s)?po(Sl(s)):{}}function v$(s,a,u){var g=s.constructor;switch(a){case b:return F0(s);case Y:case W:return new g(+s);case p:return t$(s,u);case m:case D:case B:case K:case Q:case Ee:case Ne:case st:case ht:return h2(s,u);case Ue:return new g;case nt:case ke:return new g(s);case Je:return r$(s);case He:return new g;case Ke:return n$(s)}}function y$(s,a){var u=a.length;if(!u)return s;var g=u-1;return a[g]=(u>1?"& ":"")+a[g],a=a.join(u>2?", ":" "),s.replace(Gt,`{
/* [wrapped with `+a+`] */
`)}function b$(s){return Qe(s)||_s(s)||!!(Rm&&s&&s[Rm])}function si(s,a){var u=typeof s;return a=a??re,!!a&&(u=="number"||u!="symbol"&&Zf.test(s))&&s>-1&&s%1==0&&s<a}function Br(s,a,u){if(!Bt(u))return!1;var g=typeof a;return(g=="number"?Kr(u)&&si(a,u.length):g=="string"&&a in u)?An(u[a],s):!1}function K0(s,a){if(Qe(s))return!1;var u=typeof s;return u=="number"||u=="symbol"||u=="boolean"||s==null||rn(s)?!0:ir.test(s)||!Mt.test(s)||a!=null&&s in Ot(a)}function _$(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}function G0(s){var a=ql(s),u=C[a];if(typeof u!="function"||!(a in dt.prototype))return!1;if(s===u)return!0;var g=W0(u);return!!g&&s===g[0]}function E$(s){return!!$m&&$m in s}var x$=_l?oi:hd;function Ra(s){var a=s&&s.constructor,u=typeof a=="function"&&a.prototype||uo;return s===u}function $2(s){return s===s&&!Bt(s)}function P2(s,a){return function(u){return u==null?!1:u[s]===a&&(a!==r||s in Ot(u))}}function C$(s){var a=Jl(s,function(g){return u.size===f&&u.clear(),g}),u=a.cache;return a}function I$(s,a){var u=s[1],g=a[1],y=u|g,A=y<(H|Z|d),M=g==d&&u==L||g==d&&u==E&&s[7].length<=a[8]||g==(d|E)&&a[7].length<=a[8]&&u==L;if(!(A||M))return s;g&H&&(s[2]=a[2],y|=u&H?0:R);var k=a[3];if(k){var G=s[3];s[3]=G?d2(G,k,a[4]):k,s[4]=G?$i(s[3],v):a[4]}return k=a[5],k&&(G=s[5],s[5]=G?p2(G,k,a[6]):k,s[6]=G?$i(s[5],v):a[6]),k=a[7],k&&(s[7]=k),g&d&&(s[8]=s[8]==null?a[8]:Or(s[8],a[8])),s[9]==null&&(s[9]=a[9]),s[0]=a[0],s[1]=y,s}function S$(s){var a=[];if(s!=null)for(var u in Ot(s))a.push(u);return a}function O$(s){return xl.call(s)}function T2(s,a,u){return a=dr(a===r?s.length-1:a,0),function(){for(var g=arguments,y=-1,A=dr(g.length-a,0),M=te(A);++y<A;)M[y]=g[a+y];y=-1;for(var k=te(a+1);++y<a;)k[y]=g[y];return k[a]=u(M),vr(s,this,k)}}function N2(s,a){return a.length<2?s:vs(s,vn(a,0,-1))}function A$(s,a){for(var u=s.length,g=Or(a.length,u),y=Vr(s);g--;){var A=a[g];s[g]=si(A,u)?y[A]:r}return s}function Z0(s,a){if(!(a==="constructor"&&typeof s[a]=="function")&&a!="__proto__")return s[a]}var R2=M2(n2),La=zA||function(s,a){return mt.setTimeout(s,a)},Y0=M2(JD);function L2(s,a,u){var g=a+"";return Y0(s,y$(g,D$(m$(g),u)))}function M2(s){var a=0,u=0;return function(){var g=KA(),y=me-(g-u);if(u=g,y>0){if(++a>=de)return arguments[0]}else a=0;return s.apply(r,arguments)}}function Kl(s,a){var u=-1,g=s.length,y=g-1;for(a=a===r?g:a;++u<a;){var A=T0(u,y),M=s[A];s[A]=s[u],s[u]=M}return s.length=a,s}var U2=C$(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(sr,function(u,g,y,A){a.push(y?A.replace(zf,"$1"):g||u)}),a});function zn(s){if(typeof s=="string"||rn(s))return s;var a=s+"";return a=="0"&&1/s==-le?"-0":a}function bs(s){if(s!=null){try{return El.call(s)}catch{}try{return s+""}catch{}}return""}function D$(s,a){return pn(Be,function(u){var g="_."+u[0];a&u[1]&&!wl(s,g)&&s.push(g)}),s.sort()}function j2(s){if(s instanceof dt)return s.clone();var a=new mn(s.__wrapped__,s.__chain__);return a.__actions__=Vr(s.__actions__),a.__index__=s.__index__,a.__values__=s.__values__,a}function $$(s,a,u){(u?Br(s,a,u):a===r)?a=1:a=dr(it(a),0);var g=s==null?0:s.length;if(!g||a<1)return[];for(var y=0,A=0,M=te(Dl(g/a));y<g;)M[A++]=vn(s,y,y+=a);return M}function P$(s){for(var a=-1,u=s==null?0:s.length,g=0,y=[];++a<u;){var A=s[a];A&&(y[g++]=A)}return y}function T$(){var s=arguments.length;if(!s)return[];for(var a=te(s-1),u=arguments[0],g=s;g--;)a[g-1]=arguments[g];return Di(Qe(u)?Vr(u):[u],Cr(a,1))}var N$=ct(function(s,a){return er(s)?Da(s,Cr(a,1,er,!0)):[]}),R$=ct(function(s,a){var u=yn(a);return er(u)&&(u=r),er(s)?Da(s,Cr(a,1,er,!0),ze(u,2)):[]}),L$=ct(function(s,a){var u=yn(a);return er(u)&&(u=r),er(s)?Da(s,Cr(a,1,er,!0),r,u):[]});function M$(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===r?1:it(a),vn(s,a<0?0:a,g)):[]}function U$(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===r?1:it(a),a=g-a,vn(s,0,a<0?0:a)):[]}function j$(s,a){return s&&s.length?Fl(s,ze(a,3),!0,!0):[]}function F$(s,a){return s&&s.length?Fl(s,ze(a,3),!0):[]}function B$(s,a,u,g){var y=s==null?0:s.length;return y?(u&&typeof u!="number"&&Br(s,a,u)&&(u=0,g=y),TD(s,a,u,g)):[]}function F2(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var y=u==null?0:it(u);return y<0&&(y=dr(g+y,0)),vl(s,ze(a,3),y)}function B2(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var y=g-1;return u!==r&&(y=it(u),y=u<0?dr(g+y,0):Or(y,g-1)),vl(s,ze(a,3),y,!0)}function k2(s){var a=s==null?0:s.length;return a?Cr(s,1):[]}function k$(s){var a=s==null?0:s.length;return a?Cr(s,le):[]}function H$(s,a){var u=s==null?0:s.length;return u?(a=a===r?1:it(a),Cr(s,a)):[]}function z$(s){for(var a=-1,u=s==null?0:s.length,g={};++a<u;){var y=s[a];g[y[0]]=y[1]}return g}function H2(s){return s&&s.length?s[0]:r}function W$(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var y=u==null?0:it(u);return y<0&&(y=dr(g+y,0)),oo(s,a,y)}function q$(s){var a=s==null?0:s.length;return a?vn(s,0,-1):[]}var V$=ct(function(s){var a=Ut(s,U0);return a.length&&a[0]===s[0]?O0(a):[]}),K$=ct(function(s){var a=yn(s),u=Ut(s,U0);return a===yn(u)?a=r:u.pop(),u.length&&u[0]===s[0]?O0(u,ze(a,2)):[]}),G$=ct(function(s){var a=yn(s),u=Ut(s,U0);return a=typeof a=="function"?a:r,a&&u.pop(),u.length&&u[0]===s[0]?O0(u,r,a):[]});function Z$(s,a){return s==null?"":qA.call(s,a)}function yn(s){var a=s==null?0:s.length;return a?s[a-1]:r}function Y$(s,a,u){var g=s==null?0:s.length;if(!g)return-1;var y=g;return u!==r&&(y=it(u),y=y<0?dr(g+y,0):Or(y,g-1)),a===a?DA(s,a,y):vl(s,Em,y,!0)}function J$(s,a){return s&&s.length?Qm(s,it(a)):r}var X$=ct(z2);function z2(s,a){return s&&s.length&&a&&a.length?P0(s,a):s}function Q$(s,a,u){return s&&s.length&&a&&a.length?P0(s,a,ze(u,2)):s}function eP(s,a,u){return s&&s.length&&a&&a.length?P0(s,a,r,u):s}var tP=ii(function(s,a){var u=s==null?0:s.length,g=x0(s,a);return r2(s,Ut(a,function(y){return si(y,u)?+y:y}).sort(f2)),g});function rP(s,a){var u=[];if(!(s&&s.length))return u;var g=-1,y=[],A=s.length;for(a=ze(a,3);++g<A;){var M=s[g];a(M,g,s)&&(u.push(M),y.push(g))}return r2(s,y),u}function J0(s){return s==null?s:ZA.call(s)}function nP(s,a,u){var g=s==null?0:s.length;return g?(u&&typeof u!="number"&&Br(s,a,u)?(a=0,u=g):(a=a==null?0:it(a),u=u===r?g:it(u)),vn(s,a,u)):[]}function iP(s,a){return jl(s,a)}function sP(s,a,u){return R0(s,a,ze(u,2))}function oP(s,a){var u=s==null?0:s.length;if(u){var g=jl(s,a);if(g<u&&An(s[g],a))return g}return-1}function aP(s,a){return jl(s,a,!0)}function cP(s,a,u){return R0(s,a,ze(u,2),!0)}function lP(s,a){var u=s==null?0:s.length;if(u){var g=jl(s,a,!0)-1;if(An(s[g],a))return g}return-1}function uP(s){return s&&s.length?i2(s):[]}function hP(s,a){return s&&s.length?i2(s,ze(a,2)):[]}function fP(s){var a=s==null?0:s.length;return a?vn(s,1,a):[]}function dP(s,a,u){return s&&s.length?(a=u||a===r?1:it(a),vn(s,0,a<0?0:a)):[]}function pP(s,a,u){var g=s==null?0:s.length;return g?(a=u||a===r?1:it(a),a=g-a,vn(s,a<0?0:a,g)):[]}function gP(s,a){return s&&s.length?Fl(s,ze(a,3),!1,!0):[]}function mP(s,a){return s&&s.length?Fl(s,ze(a,3)):[]}var wP=ct(function(s){return Ni(Cr(s,1,er,!0))}),vP=ct(function(s){var a=yn(s);return er(a)&&(a=r),Ni(Cr(s,1,er,!0),ze(a,2))}),yP=ct(function(s){var a=yn(s);return a=typeof a=="function"?a:r,Ni(Cr(s,1,er,!0),r,a)});function bP(s){return s&&s.length?Ni(s):[]}function _P(s,a){return s&&s.length?Ni(s,ze(a,2)):[]}function EP(s,a){return a=typeof a=="function"?a:r,s&&s.length?Ni(s,r,a):[]}function X0(s){if(!(s&&s.length))return[];var a=0;return s=Ai(s,function(u){if(er(u))return a=dr(u.length,a),!0}),g0(a,function(u){return Ut(s,f0(u))})}function W2(s,a){if(!(s&&s.length))return[];var u=X0(s);return a==null?u:Ut(u,function(g){return vr(a,r,g)})}var xP=ct(function(s,a){return er(s)?Da(s,a):[]}),CP=ct(function(s){return M0(Ai(s,er))}),IP=ct(function(s){var a=yn(s);return er(a)&&(a=r),M0(Ai(s,er),ze(a,2))}),SP=ct(function(s){var a=yn(s);return a=typeof a=="function"?a:r,M0(Ai(s,er),r,a)}),OP=ct(X0);function AP(s,a){return c2(s||[],a||[],Aa)}function DP(s,a){return c2(s||[],a||[],Ta)}var $P=ct(function(s){var a=s.length,u=a>1?s[a-1]:r;return u=typeof u=="function"?(s.pop(),u):r,W2(s,u)});function q2(s){var a=C(s);return a.__chain__=!0,a}function PP(s,a){return a(s),s}function Gl(s,a){return a(s)}var TP=ii(function(s){var a=s.length,u=a?s[0]:0,g=this.__wrapped__,y=function(A){return x0(A,s)};return a>1||this.__actions__.length||!(g instanceof dt)||!si(u)?this.thru(y):(g=g.slice(u,+u+(a?1:0)),g.__actions__.push({func:Gl,args:[y],thisArg:r}),new mn(g,this.__chain__).thru(function(A){return a&&!A.length&&A.push(r),A}))});function NP(){return q2(this)}function RP(){return new mn(this.value(),this.__chain__)}function LP(){this.__values__===r&&(this.__values__=sw(this.value()));var s=this.__index__>=this.__values__.length,a=s?r:this.__values__[this.__index__++];return{done:s,value:a}}function MP(){return this}function UP(s){for(var a,u=this;u instanceof Nl;){var g=j2(u);g.__index__=0,g.__values__=r,a?y.__wrapped__=g:a=g;var y=g;u=u.__wrapped__}return y.__wrapped__=s,a}function jP(){var s=this.__wrapped__;if(s instanceof dt){var a=s;return this.__actions__.length&&(a=new dt(this)),a=a.reverse(),a.__actions__.push({func:Gl,args:[J0],thisArg:r}),new mn(a,this.__chain__)}return this.thru(J0)}function FP(){return a2(this.__wrapped__,this.__actions__)}var BP=Bl(function(s,a,u){bt.call(s,u)?++s[u]:ri(s,u,1)});function kP(s,a,u){var g=Qe(s)?bm:PD;return u&&Br(s,a,u)&&(a=r),g(s,ze(a,3))}function HP(s,a){var u=Qe(s)?Ai:Wm;return u(s,ze(a,3))}var zP=v2(F2),WP=v2(B2);function qP(s,a){return Cr(Zl(s,a),1)}function VP(s,a){return Cr(Zl(s,a),le)}function KP(s,a,u){return u=u===r?1:it(u),Cr(Zl(s,a),u)}function V2(s,a){var u=Qe(s)?pn:Ti;return u(s,ze(a,3))}function K2(s,a){var u=Qe(s)?fA:zm;return u(s,ze(a,3))}var GP=Bl(function(s,a,u){bt.call(s,u)?s[u].push(a):ri(s,u,[a])});function ZP(s,a,u,g){s=Kr(s)?s:yo(s),u=u&&!g?it(u):0;var y=s.length;return u<0&&(u=dr(y+u,0)),eu(s)?u<=y&&s.indexOf(a,u)>-1:!!y&&oo(s,a,u)>-1}var YP=ct(function(s,a,u){var g=-1,y=typeof a=="function",A=Kr(s)?te(s.length):[];return Ti(s,function(M){A[++g]=y?vr(a,M,u):$a(M,a,u)}),A}),JP=Bl(function(s,a,u){ri(s,u,a)});function Zl(s,a){var u=Qe(s)?Ut:Ym;return u(s,ze(a,3))}function XP(s,a,u,g){return s==null?[]:(Qe(a)||(a=a==null?[]:[a]),u=g?r:u,Qe(u)||(u=u==null?[]:[u]),e2(s,a,u))}var QP=Bl(function(s,a,u){s[u?0:1].push(a)},function(){return[[],[]]});function eT(s,a,u){var g=Qe(s)?u0:Cm,y=arguments.length<3;return g(s,ze(a,4),u,y,Ti)}function tT(s,a,u){var g=Qe(s)?dA:Cm,y=arguments.length<3;return g(s,ze(a,4),u,y,zm)}function rT(s,a){var u=Qe(s)?Ai:Wm;return u(s,Xl(ze(a,3)))}function nT(s){var a=Qe(s)?Fm:ZD;return a(s)}function iT(s,a,u){(u?Br(s,a,u):a===r)?a=1:a=it(a);var g=Qe(s)?SD:YD;return g(s,a)}function sT(s){var a=Qe(s)?OD:XD;return a(s)}function oT(s){if(s==null)return 0;if(Kr(s))return eu(s)?co(s):s.length;var a=Ar(s);return a==Ue||a==He?s.size:D0(s).length}function aT(s,a,u){var g=Qe(s)?h0:QD;return u&&Br(s,a,u)&&(a=r),g(s,ze(a,3))}var cT=ct(function(s,a){if(s==null)return[];var u=a.length;return u>1&&Br(s,a[0],a[1])?a=[]:u>2&&Br(a[0],a[1],a[2])&&(a=[a[0]]),e2(s,Cr(a,1),[])}),Yl=HA||function(){return mt.Date.now()};function lT(s,a){if(typeof a!="function")throw new gn(c);return s=it(s),function(){if(--s<1)return a.apply(this,arguments)}}function G2(s,a,u){return a=u?r:a,a=s&&a==null?s.length:a,ni(s,d,r,r,r,r,a)}function Z2(s,a){var u;if(typeof a!="function")throw new gn(c);return s=it(s),function(){return--s>0&&(u=a.apply(this,arguments)),s<=1&&(a=r),u}}var Q0=ct(function(s,a,u){var g=H;if(u.length){var y=$i(u,wo(Q0));g|=T}return ni(s,g,a,u,y)}),Y2=ct(function(s,a,u){var g=H|Z;if(u.length){var y=$i(u,wo(Y2));g|=T}return ni(a,g,s,u,y)});function J2(s,a,u){a=u?r:a;var g=ni(s,L,r,r,r,r,r,a);return g.placeholder=J2.placeholder,g}function X2(s,a,u){a=u?r:a;var g=ni(s,$,r,r,r,r,r,a);return g.placeholder=X2.placeholder,g}function Q2(s,a,u){var g,y,A,M,k,G,ue=0,he=!1,pe=!1,be=!0;if(typeof s!="function")throw new gn(c);a=bn(a)||0,Bt(u)&&(he=!!u.leading,pe="maxWait"in u,A=pe?dr(bn(u.maxWait)||0,a):A,be="trailing"in u?!!u.trailing:be);function Te(tr){var Dn=g,ci=y;return g=y=r,ue=tr,M=s.apply(ci,Dn),M}function We(tr){return ue=tr,k=La(ft,a),he?Te(tr):M}function ot(tr){var Dn=tr-G,ci=tr-ue,vw=a-Dn;return pe?Or(vw,A-ci):vw}function qe(tr){var Dn=tr-G,ci=tr-ue;return G===r||Dn>=a||Dn<0||pe&&ci>=A}function ft(){var tr=Yl();if(qe(tr))return wt(tr);k=La(ft,ot(tr))}function wt(tr){return k=r,be&&g?Te(tr):(g=y=r,M)}function nn(){k!==r&&l2(k),ue=0,g=G=y=k=r}function kr(){return k===r?M:wt(Yl())}function sn(){var tr=Yl(),Dn=qe(tr);if(g=arguments,y=this,G=tr,Dn){if(k===r)return We(G);if(pe)return l2(k),k=La(ft,a),Te(G)}return k===r&&(k=La(ft,a)),M}return sn.cancel=nn,sn.flush=kr,sn}var uT=ct(function(s,a){return Hm(s,1,a)}),hT=ct(function(s,a,u){return Hm(s,bn(a)||0,u)});function fT(s){return ni(s,J)}function Jl(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new gn(c);var u=function(){var g=arguments,y=a?a.apply(this,g):g[0],A=u.cache;if(A.has(y))return A.get(y);var M=s.apply(this,g);return u.cache=A.set(y,M)||A,M};return u.cache=new(Jl.Cache||ti),u}Jl.Cache=ti;function Xl(s){if(typeof s!="function")throw new gn(c);return function(){var a=arguments;switch(a.length){case 0:return!s.call(this);case 1:return!s.call(this,a[0]);case 2:return!s.call(this,a[0],a[1]);case 3:return!s.call(this,a[0],a[1],a[2])}return!s.apply(this,a)}}function dT(s){return Z2(2,s)}var pT=e$(function(s,a){a=a.length==1&&Qe(a[0])?Ut(a[0],en(ze())):Ut(Cr(a,1),en(ze()));var u=a.length;return ct(function(g){for(var y=-1,A=Or(g.length,u);++y<A;)g[y]=a[y].call(this,g[y]);return vr(s,this,g)})}),ed=ct(function(s,a){var u=$i(a,wo(ed));return ni(s,T,r,a,u)}),ew=ct(function(s,a){var u=$i(a,wo(ew));return ni(s,I,r,a,u)}),gT=ii(function(s,a){return ni(s,E,r,r,r,a)});function mT(s,a){if(typeof s!="function")throw new gn(c);return a=a===r?a:it(a),ct(s,a)}function wT(s,a){if(typeof s!="function")throw new gn(c);return a=a==null?0:dr(it(a),0),ct(function(u){var g=u[a],y=Li(u,0,a);return g&&Di(y,g),vr(s,this,y)})}function vT(s,a,u){var g=!0,y=!0;if(typeof s!="function")throw new gn(c);return Bt(u)&&(g="leading"in u?!!u.leading:g,y="trailing"in u?!!u.trailing:y),Q2(s,a,{leading:g,maxWait:a,trailing:y})}function yT(s){return G2(s,1)}function bT(s,a){return ed(j0(a),s)}function _T(){if(!arguments.length)return[];var s=arguments[0];return Qe(s)?s:[s]}function ET(s){return wn(s,S)}function xT(s,a){return a=typeof a=="function"?a:r,wn(s,S,a)}function CT(s){return wn(s,x|S)}function IT(s,a){return a=typeof a=="function"?a:r,wn(s,x|S,a)}function ST(s,a){return a==null||km(s,a,yr(a))}function An(s,a){return s===a||s!==s&&a!==a}var OT=Wl(S0),AT=Wl(function(s,a){return s>=a}),_s=Km(function(){return arguments}())?Km:function(s){return Zt(s)&&bt.call(s,"callee")&&!Nm.call(s,"callee")},Qe=te.isArray,DT=jr?en(jr):UD;function Kr(s){return s!=null&&Ql(s.length)&&!oi(s)}function er(s){return Zt(s)&&Kr(s)}function $T(s){return s===!0||s===!1||Zt(s)&&Fr(s)==Y}var Mi=WA||hd,PT=In?en(In):jD;function TT(s){return Zt(s)&&s.nodeType===1&&!Ma(s)}function NT(s){if(s==null)return!0;if(Kr(s)&&(Qe(s)||typeof s=="string"||typeof s.splice=="function"||Mi(s)||vo(s)||_s(s)))return!s.length;var a=Ar(s);if(a==Ue||a==He)return!s.size;if(Ra(s))return!D0(s).length;for(var u in s)if(bt.call(s,u))return!1;return!0}function RT(s,a){return Pa(s,a)}function LT(s,a,u){u=typeof u=="function"?u:r;var g=u?u(s,a):r;return g===r?Pa(s,a,r,u):!!g}function td(s){if(!Zt(s))return!1;var a=Fr(s);return a==F||a==w||typeof s.message=="string"&&typeof s.name=="string"&&!Ma(s)}function MT(s){return typeof s=="number"&&Lm(s)}function oi(s){if(!Bt(s))return!1;var a=Fr(s);return a==we||a==ve||a==X||a==$t}function tw(s){return typeof s=="number"&&s==it(s)}function Ql(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=re}function Bt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}function Zt(s){return s!=null&&typeof s=="object"}var rw=dn?en(dn):BD;function UT(s,a){return s===a||A0(s,a,q0(a))}function jT(s,a,u){return u=typeof u=="function"?u:r,A0(s,a,q0(a),u)}function FT(s){return nw(s)&&s!=+s}function BT(s){if(x$(s))throw new Ye(o);return Gm(s)}function kT(s){return s===null}function HT(s){return s==null}function nw(s){return typeof s=="number"||Zt(s)&&Fr(s)==nt}function Ma(s){if(!Zt(s)||Fr(s)!=Ge)return!1;var a=Sl(s);if(a===null)return!0;var u=bt.call(a,"constructor")&&a.constructor;return typeof u=="function"&&u instanceof u&&El.call(u)==jA}var rd=Bn?en(Bn):kD;function zT(s){return tw(s)&&s>=-re&&s<=re}var iw=_a?en(_a):HD;function eu(s){return typeof s=="string"||!Qe(s)&&Zt(s)&&Fr(s)==ke}function rn(s){return typeof s=="symbol"||Zt(s)&&Fr(s)==Ke}var vo=ds?en(ds):zD;function WT(s){return s===r}function qT(s){return Zt(s)&&Ar(s)==je}function VT(s){return Zt(s)&&Fr(s)==Ze}var KT=Wl($0),GT=Wl(function(s,a){return s<=a});function sw(s){if(!s)return[];if(Kr(s))return eu(s)?Sn(s):Vr(s);if(xa&&s[xa])return SA(s[xa]());var a=Ar(s),u=a==Ue?w0:a==He?yl:yo;return u(s)}function ai(s){if(!s)return s===0?s:0;if(s=bn(s),s===le||s===-le){var a=s<0?-1:1;return a*ne}return s===s?s:0}function it(s){var a=ai(s),u=a%1;return a===a?u?a-u:a:0}function ow(s){return s?ws(it(s),0,ie):0}function bn(s){if(typeof s=="number")return s;if(rn(s))return ae;if(Bt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=Bt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=Im(s);var u=Vf.test(s);return u||Gf.test(s)?Xe(s.slice(2),u?2:8):qf.test(s)?ae:+s}function aw(s){return Hn(s,Gr(s))}function ZT(s){return s?ws(it(s),-re,re):s===0?s:0}function yt(s){return s==null?"":tn(s)}var YT=go(function(s,a){if(Ra(a)||Kr(a)){Hn(a,yr(a),s);return}for(var u in a)bt.call(a,u)&&Aa(s,u,a[u])}),cw=go(function(s,a){Hn(a,Gr(a),s)}),tu=go(function(s,a,u,g){Hn(a,Gr(a),s,g)}),JT=go(function(s,a,u,g){Hn(a,yr(a),s,g)}),XT=ii(x0);function QT(s,a){var u=po(s);return a==null?u:Bm(u,a)}var eN=ct(function(s,a){s=Ot(s);var u=-1,g=a.length,y=g>2?a[2]:r;for(y&&Br(a[0],a[1],y)&&(g=1);++u<g;)for(var A=a[u],M=Gr(A),k=-1,G=M.length;++k<G;){var ue=M[k],he=s[ue];(he===r||An(he,uo[ue])&&!bt.call(s,ue))&&(s[ue]=A[ue])}return s}),tN=ct(function(s){return s.push(r,I2),vr(lw,r,s)});function rN(s,a){return _m(s,ze(a,3),kn)}function nN(s,a){return _m(s,ze(a,3),I0)}function iN(s,a){return s==null?s:C0(s,ze(a,3),Gr)}function sN(s,a){return s==null?s:qm(s,ze(a,3),Gr)}function oN(s,a){return s&&kn(s,ze(a,3))}function aN(s,a){return s&&I0(s,ze(a,3))}function cN(s){return s==null?[]:Ml(s,yr(s))}function lN(s){return s==null?[]:Ml(s,Gr(s))}function nd(s,a,u){var g=s==null?r:vs(s,a);return g===r?u:g}function uN(s,a){return s!=null&&A2(s,a,ND)}function id(s,a){return s!=null&&A2(s,a,RD)}var hN=b2(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=xl.call(a)),s[a]=u},od(Zr)),fN=b2(function(s,a,u){a!=null&&typeof a.toString!="function"&&(a=xl.call(a)),bt.call(s,a)?s[a].push(u):s[a]=[u]},ze),dN=ct($a);function yr(s){return Kr(s)?jm(s):D0(s)}function Gr(s){return Kr(s)?jm(s,!0):WD(s)}function pN(s,a){var u={};return a=ze(a,3),kn(s,function(g,y,A){ri(u,a(g,y,A),g)}),u}function gN(s,a){var u={};return a=ze(a,3),kn(s,function(g,y,A){ri(u,y,a(g,y,A))}),u}var mN=go(function(s,a,u){Ul(s,a,u)}),lw=go(function(s,a,u,g){Ul(s,a,u,g)}),wN=ii(function(s,a){var u={};if(s==null)return u;var g=!1;a=Ut(a,function(A){return A=Ri(A,s),g||(g=A.length>1),A}),Hn(s,z0(s),u),g&&(u=wn(u,x|_|S,h$));for(var y=a.length;y--;)L0(u,a[y]);return u});function vN(s,a){return uw(s,Xl(ze(a)))}var yN=ii(function(s,a){return s==null?{}:VD(s,a)});function uw(s,a){if(s==null)return{};var u=Ut(z0(s),function(g){return[g]});return a=ze(a),t2(s,u,function(g,y){return a(g,y[0])})}function bN(s,a,u){a=Ri(a,s);var g=-1,y=a.length;for(y||(y=1,s=r);++g<y;){var A=s==null?r:s[zn(a[g])];A===r&&(g=y,A=u),s=oi(A)?A.call(s):A}return s}function _N(s,a,u){return s==null?s:Ta(s,a,u)}function EN(s,a,u,g){return g=typeof g=="function"?g:r,s==null?s:Ta(s,a,u,g)}var hw=x2(yr),fw=x2(Gr);function xN(s,a,u){var g=Qe(s),y=g||Mi(s)||vo(s);if(a=ze(a,4),u==null){var A=s&&s.constructor;y?u=g?new A:[]:Bt(s)?u=oi(A)?po(Sl(s)):{}:u={}}return(y?pn:kn)(s,function(M,k,G){return a(u,M,k,G)}),u}function CN(s,a){return s==null?!0:L0(s,a)}function IN(s,a,u){return s==null?s:o2(s,a,j0(u))}function SN(s,a,u,g){return g=typeof g=="function"?g:r,s==null?s:o2(s,a,j0(u),g)}function yo(s){return s==null?[]:m0(s,yr(s))}function ON(s){return s==null?[]:m0(s,Gr(s))}function AN(s,a,u){return u===r&&(u=a,a=r),u!==r&&(u=bn(u),u=u===u?u:0),a!==r&&(a=bn(a),a=a===a?a:0),ws(bn(s),a,u)}function DN(s,a,u){return a=ai(a),u===r?(u=a,a=0):u=ai(u),s=bn(s),LD(s,a,u)}function $N(s,a,u){if(u&&typeof u!="boolean"&&Br(s,a,u)&&(a=u=r),u===r&&(typeof a=="boolean"?(u=a,a=r):typeof s=="boolean"&&(u=s,s=r)),s===r&&a===r?(s=0,a=1):(s=ai(s),a===r?(a=s,s=0):a=ai(a)),s>a){var g=s;s=a,a=g}if(u||s%1||a%1){var y=Mm();return Or(s+y*(a-s+It("1e-"+((y+"").length-1))),a)}return T0(s,a)}var PN=mo(function(s,a,u){return a=a.toLowerCase(),s+(u?dw(a):a)});function dw(s){return sd(yt(s).toLowerCase())}function pw(s){return s=yt(s),s&&s.replace(Xn,_A).replace(a0,"")}function TN(s,a,u){s=yt(s),a=tn(a);var g=s.length;u=u===r?g:ws(it(u),0,g);var y=u;return u-=a.length,u>=0&&s.slice(u,y)==a}function NN(s){return s=yt(s),s&&Lt.test(s)?s.replace(cs,EA):s}function RN(s){return s=yt(s),s&&or.test(s)?s.replace(Vt,"\\$&"):s}var LN=mo(function(s,a,u){return s+(u?"-":"")+a.toLowerCase()}),MN=mo(function(s,a,u){return s+(u?" ":"")+a.toLowerCase()}),UN=w2("toLowerCase");function jN(s,a,u){s=yt(s),a=it(a);var g=a?co(s):0;if(!a||g>=a)return s;var y=(a-g)/2;return zl($l(y),u)+s+zl(Dl(y),u)}function FN(s,a,u){s=yt(s),a=it(a);var g=a?co(s):0;return a&&g<a?s+zl(a-g,u):s}function BN(s,a,u){s=yt(s),a=it(a);var g=a?co(s):0;return a&&g<a?zl(a-g,u)+s:s}function kN(s,a,u){return u||a==null?a=0:a&&(a=+a),GA(yt(s).replace(Kt,""),a||0)}function HN(s,a,u){return(u?Br(s,a,u):a===r)?a=1:a=it(a),N0(yt(s),a)}function zN(){var s=arguments,a=yt(s[0]);return s.length<3?a:a.replace(s[1],s[2])}var WN=mo(function(s,a,u){return s+(u?"_":"")+a.toLowerCase()});function qN(s,a,u){return u&&typeof u!="number"&&Br(s,a,u)&&(a=u=r),u=u===r?ie:u>>>0,u?(s=yt(s),s&&(typeof a=="string"||a!=null&&!rd(a))&&(a=tn(a),!a&&ao(s))?Li(Sn(s),0,u):s.split(a,u)):[]}var VN=mo(function(s,a,u){return s+(u?" ":"")+sd(a)});function KN(s,a,u){return s=yt(s),u=u==null?0:ws(it(u),0,s.length),a=tn(a),s.slice(u,u+a.length)==a}function GN(s,a,u){var g=C.templateSettings;u&&Br(s,a,u)&&(a=r),s=yt(s),a=tu({},a,g,C2);var y=tu({},a.imports,g.imports,C2),A=yr(y),M=m0(y,A),k,G,ue=0,he=a.interpolate||Qs,pe="__p += '",be=v0((a.escape||Qs).source+"|"+he.source+"|"+(he===Ft?Wf:Qs).source+"|"+(a.evaluate||Qs).source+"|$","g"),Te="//# sourceURL="+(bt.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++c0+"]")+`
`;s.replace(be,function(qe,ft,wt,nn,kr,sn){return wt||(wt=nn),pe+=s.slice(ue,sn).replace(Yf,xA),ft&&(k=!0,pe+=`' +
__e(`+ft+`) +
'`),kr&&(G=!0,pe+=`';
`+kr+`;
__p += '`),wt&&(pe+=`' +
((__t = (`+wt+`)) == null ? '' : __t) +
'`),ue=sn+qe.length,qe}),pe+=`';
`;var We=bt.call(a,"variable")&&a.variable;if(!We)pe=`with (obj) {
`+pe+`
}
`;else if(Hf.test(We))throw new Ye(l);pe=(G?pe.replace(lt,""):pe).replace(Ur,"$1").replace(Jn,"$1;"),pe="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(G?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pe+`return __p
}`;var ot=mw(function(){return vt(A,Te+"return "+pe).apply(r,M)});if(ot.source=pe,td(ot))throw ot;return ot}function ZN(s){return yt(s).toLowerCase()}function YN(s){return yt(s).toUpperCase()}function JN(s,a,u){if(s=yt(s),s&&(u||a===r))return Im(s);if(!s||!(a=tn(a)))return s;var g=Sn(s),y=Sn(a),A=Sm(g,y),M=Om(g,y)+1;return Li(g,A,M).join("")}function XN(s,a,u){if(s=yt(s),s&&(u||a===r))return s.slice(0,Dm(s)+1);if(!s||!(a=tn(a)))return s;var g=Sn(s),y=Om(g,Sn(a))+1;return Li(g,0,y).join("")}function QN(s,a,u){if(s=yt(s),s&&(u||a===r))return s.replace(Kt,"");if(!s||!(a=tn(a)))return s;var g=Sn(s),y=Sm(g,Sn(a));return Li(g,y).join("")}function eR(s,a){var u=z,g=ee;if(Bt(a)){var y="separator"in a?a.separator:y;u="length"in a?it(a.length):u,g="omission"in a?tn(a.omission):g}s=yt(s);var A=s.length;if(ao(s)){var M=Sn(s);A=M.length}if(u>=A)return s;var k=u-co(g);if(k<1)return g;var G=M?Li(M,0,k).join(""):s.slice(0,k);if(y===r)return G+g;if(M&&(k+=G.length-k),rd(y)){if(s.slice(k).search(y)){var ue,he=G;for(y.global||(y=v0(y.source,yt(fn.exec(y))+"g")),y.lastIndex=0;ue=y.exec(he);)var pe=ue.index;G=G.slice(0,pe===r?k:pe)}}else if(s.indexOf(tn(y),k)!=k){var be=G.lastIndexOf(y);be>-1&&(G=G.slice(0,be))}return G+g}function tR(s){return s=yt(s),s&&zt.test(s)?s.replace(Si,$A):s}var rR=mo(function(s,a,u){return s+(u?" ":"")+a.toUpperCase()}),sd=w2("toUpperCase");function gw(s,a,u){return s=yt(s),a=u?r:a,a===r?IA(s)?NA(s):mA(s):s.match(a)||[]}var mw=ct(function(s,a){try{return vr(s,r,a)}catch(u){return td(u)?u:new Ye(u)}}),nR=ii(function(s,a){return pn(a,function(u){u=zn(u),ri(s,u,Q0(s[u],s))}),s});function iR(s){var a=s==null?0:s.length,u=ze();return s=a?Ut(s,function(g){if(typeof g[1]!="function")throw new gn(c);return[u(g[0]),g[1]]}):[],ct(function(g){for(var y=-1;++y<a;){var A=s[y];if(vr(A[0],this,g))return vr(A[1],this,g)}})}function sR(s){return $D(wn(s,x))}function od(s){return function(){return s}}function oR(s,a){return s==null||s!==s?a:s}var aR=y2(),cR=y2(!0);function Zr(s){return s}function ad(s){return Zm(typeof s=="function"?s:wn(s,x))}function lR(s){return Jm(wn(s,x))}function uR(s,a){return Xm(s,wn(a,x))}var hR=ct(function(s,a){return function(u){return $a(u,s,a)}}),fR=ct(function(s,a){return function(u){return $a(s,u,a)}});function cd(s,a,u){var g=yr(a),y=Ml(a,g);u==null&&!(Bt(a)&&(y.length||!g.length))&&(u=a,a=s,s=this,y=Ml(a,yr(a)));var A=!(Bt(u)&&"chain"in u)||!!u.chain,M=oi(s);return pn(y,function(k){var G=a[k];s[k]=G,M&&(s.prototype[k]=function(){var ue=this.__chain__;if(A||ue){var he=s(this.__wrapped__),pe=he.__actions__=Vr(this.__actions__);return pe.push({func:G,args:arguments,thisArg:s}),he.__chain__=ue,he}return G.apply(s,Di([this.value()],arguments))})}),s}function dR(){return mt._===this&&(mt._=FA),this}function ld(){}function pR(s){return s=it(s),ct(function(a){return Qm(a,s)})}var gR=B0(Ut),mR=B0(bm),wR=B0(h0);function ww(s){return K0(s)?f0(zn(s)):KD(s)}function vR(s){return function(a){return s==null?r:vs(s,a)}}var yR=_2(),bR=_2(!0);function ud(){return[]}function hd(){return!1}function _R(){return{}}function ER(){return""}function xR(){return!0}function CR(s,a){if(s=it(s),s<1||s>re)return[];var u=ie,g=Or(s,ie);a=ze(a),s-=ie;for(var y=g0(g,a);++u<s;)a(u);return y}function IR(s){return Qe(s)?Ut(s,zn):rn(s)?[s]:Vr(U2(yt(s)))}function SR(s){var a=++UA;return yt(s)+a}var OR=Hl(function(s,a){return s+a},0),AR=k0("ceil"),DR=Hl(function(s,a){return s/a},1),$R=k0("floor");function PR(s){return s&&s.length?Ll(s,Zr,S0):r}function TR(s,a){return s&&s.length?Ll(s,ze(a,2),S0):r}function NR(s){return xm(s,Zr)}function RR(s,a){return xm(s,ze(a,2))}function LR(s){return s&&s.length?Ll(s,Zr,$0):r}function MR(s,a){return s&&s.length?Ll(s,ze(a,2),$0):r}var UR=Hl(function(s,a){return s*a},1),jR=k0("round"),FR=Hl(function(s,a){return s-a},0);function BR(s){return s&&s.length?p0(s,Zr):0}function kR(s,a){return s&&s.length?p0(s,ze(a,2)):0}return C.after=lT,C.ary=G2,C.assign=YT,C.assignIn=cw,C.assignInWith=tu,C.assignWith=JT,C.at=XT,C.before=Z2,C.bind=Q0,C.bindAll=nR,C.bindKey=Y2,C.castArray=_T,C.chain=q2,C.chunk=$$,C.compact=P$,C.concat=T$,C.cond=iR,C.conforms=sR,C.constant=od,C.countBy=BP,C.create=QT,C.curry=J2,C.curryRight=X2,C.debounce=Q2,C.defaults=eN,C.defaultsDeep=tN,C.defer=uT,C.delay=hT,C.difference=N$,C.differenceBy=R$,C.differenceWith=L$,C.drop=M$,C.dropRight=U$,C.dropRightWhile=j$,C.dropWhile=F$,C.fill=B$,C.filter=HP,C.flatMap=qP,C.flatMapDeep=VP,C.flatMapDepth=KP,C.flatten=k2,C.flattenDeep=k$,C.flattenDepth=H$,C.flip=fT,C.flow=aR,C.flowRight=cR,C.fromPairs=z$,C.functions=cN,C.functionsIn=lN,C.groupBy=GP,C.initial=q$,C.intersection=V$,C.intersectionBy=K$,C.intersectionWith=G$,C.invert=hN,C.invertBy=fN,C.invokeMap=YP,C.iteratee=ad,C.keyBy=JP,C.keys=yr,C.keysIn=Gr,C.map=Zl,C.mapKeys=pN,C.mapValues=gN,C.matches=lR,C.matchesProperty=uR,C.memoize=Jl,C.merge=mN,C.mergeWith=lw,C.method=hR,C.methodOf=fR,C.mixin=cd,C.negate=Xl,C.nthArg=pR,C.omit=wN,C.omitBy=vN,C.once=dT,C.orderBy=XP,C.over=gR,C.overArgs=pT,C.overEvery=mR,C.overSome=wR,C.partial=ed,C.partialRight=ew,C.partition=QP,C.pick=yN,C.pickBy=uw,C.property=ww,C.propertyOf=vR,C.pull=X$,C.pullAll=z2,C.pullAllBy=Q$,C.pullAllWith=eP,C.pullAt=tP,C.range=yR,C.rangeRight=bR,C.rearg=gT,C.reject=rT,C.remove=rP,C.rest=mT,C.reverse=J0,C.sampleSize=iT,C.set=_N,C.setWith=EN,C.shuffle=sT,C.slice=nP,C.sortBy=cT,C.sortedUniq=uP,C.sortedUniqBy=hP,C.split=qN,C.spread=wT,C.tail=fP,C.take=dP,C.takeRight=pP,C.takeRightWhile=gP,C.takeWhile=mP,C.tap=PP,C.throttle=vT,C.thru=Gl,C.toArray=sw,C.toPairs=hw,C.toPairsIn=fw,C.toPath=IR,C.toPlainObject=aw,C.transform=xN,C.unary=yT,C.union=wP,C.unionBy=vP,C.unionWith=yP,C.uniq=bP,C.uniqBy=_P,C.uniqWith=EP,C.unset=CN,C.unzip=X0,C.unzipWith=W2,C.update=IN,C.updateWith=SN,C.values=yo,C.valuesIn=ON,C.without=xP,C.words=gw,C.wrap=bT,C.xor=CP,C.xorBy=IP,C.xorWith=SP,C.zip=OP,C.zipObject=AP,C.zipObjectDeep=DP,C.zipWith=$P,C.entries=hw,C.entriesIn=fw,C.extend=cw,C.extendWith=tu,cd(C,C),C.add=OR,C.attempt=mw,C.camelCase=PN,C.capitalize=dw,C.ceil=AR,C.clamp=AN,C.clone=ET,C.cloneDeep=CT,C.cloneDeepWith=IT,C.cloneWith=xT,C.conformsTo=ST,C.deburr=pw,C.defaultTo=oR,C.divide=DR,C.endsWith=TN,C.eq=An,C.escape=NN,C.escapeRegExp=RN,C.every=kP,C.find=zP,C.findIndex=F2,C.findKey=rN,C.findLast=WP,C.findLastIndex=B2,C.findLastKey=nN,C.floor=$R,C.forEach=V2,C.forEachRight=K2,C.forIn=iN,C.forInRight=sN,C.forOwn=oN,C.forOwnRight=aN,C.get=nd,C.gt=OT,C.gte=AT,C.has=uN,C.hasIn=id,C.head=H2,C.identity=Zr,C.includes=ZP,C.indexOf=W$,C.inRange=DN,C.invoke=dN,C.isArguments=_s,C.isArray=Qe,C.isArrayBuffer=DT,C.isArrayLike=Kr,C.isArrayLikeObject=er,C.isBoolean=$T,C.isBuffer=Mi,C.isDate=PT,C.isElement=TT,C.isEmpty=NT,C.isEqual=RT,C.isEqualWith=LT,C.isError=td,C.isFinite=MT,C.isFunction=oi,C.isInteger=tw,C.isLength=Ql,C.isMap=rw,C.isMatch=UT,C.isMatchWith=jT,C.isNaN=FT,C.isNative=BT,C.isNil=HT,C.isNull=kT,C.isNumber=nw,C.isObject=Bt,C.isObjectLike=Zt,C.isPlainObject=Ma,C.isRegExp=rd,C.isSafeInteger=zT,C.isSet=iw,C.isString=eu,C.isSymbol=rn,C.isTypedArray=vo,C.isUndefined=WT,C.isWeakMap=qT,C.isWeakSet=VT,C.join=Z$,C.kebabCase=LN,C.last=yn,C.lastIndexOf=Y$,C.lowerCase=MN,C.lowerFirst=UN,C.lt=KT,C.lte=GT,C.max=PR,C.maxBy=TR,C.mean=NR,C.meanBy=RR,C.min=LR,C.minBy=MR,C.stubArray=ud,C.stubFalse=hd,C.stubObject=_R,C.stubString=ER,C.stubTrue=xR,C.multiply=UR,C.nth=J$,C.noConflict=dR,C.noop=ld,C.now=Yl,C.pad=jN,C.padEnd=FN,C.padStart=BN,C.parseInt=kN,C.random=$N,C.reduce=eT,C.reduceRight=tT,C.repeat=HN,C.replace=zN,C.result=bN,C.round=jR,C.runInContext=V,C.sample=nT,C.size=oT,C.snakeCase=WN,C.some=aT,C.sortedIndex=iP,C.sortedIndexBy=sP,C.sortedIndexOf=oP,C.sortedLastIndex=aP,C.sortedLastIndexBy=cP,C.sortedLastIndexOf=lP,C.startCase=VN,C.startsWith=KN,C.subtract=FR,C.sum=BR,C.sumBy=kR,C.template=GN,C.times=CR,C.toFinite=ai,C.toInteger=it,C.toLength=ow,C.toLower=ZN,C.toNumber=bn,C.toSafeInteger=ZT,C.toString=yt,C.toUpper=YN,C.trim=JN,C.trimEnd=XN,C.trimStart=QN,C.truncate=eR,C.unescape=tR,C.uniqueId=SR,C.upperCase=rR,C.upperFirst=sd,C.each=V2,C.eachRight=K2,C.first=H2,cd(C,function(){var s={};return kn(C,function(a,u){bt.call(C.prototype,u)||(s[u]=a)}),s}(),{chain:!1}),C.VERSION=n,pn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){C[s].placeholder=C}),pn(["drop","take"],function(s,a){dt.prototype[s]=function(u){u=u===r?1:dr(it(u),0);var g=this.__filtered__&&!a?new dt(this):this.clone();return g.__filtered__?g.__takeCount__=Or(u,g.__takeCount__):g.__views__.push({size:Or(u,ie),type:s+(g.__dir__<0?"Right":"")}),g},dt.prototype[s+"Right"]=function(u){return this.reverse()[s](u).reverse()}}),pn(["filter","map","takeWhile"],function(s,a){var u=a+1,g=u==O||u==ce;dt.prototype[s]=function(y){var A=this.clone();return A.__iteratees__.push({iteratee:ze(y,3),type:u}),A.__filtered__=A.__filtered__||g,A}}),pn(["head","last"],function(s,a){var u="take"+(a?"Right":"");dt.prototype[s]=function(){return this[u](1).value()[0]}}),pn(["initial","tail"],function(s,a){var u="drop"+(a?"":"Right");dt.prototype[s]=function(){return this.__filtered__?new dt(this):this[u](1)}}),dt.prototype.compact=function(){return this.filter(Zr)},dt.prototype.find=function(s){return this.filter(s).head()},dt.prototype.findLast=function(s){return this.reverse().find(s)},dt.prototype.invokeMap=ct(function(s,a){return typeof s=="function"?new dt(this):this.map(function(u){return $a(u,s,a)})}),dt.prototype.reject=function(s){return this.filter(Xl(ze(s)))},dt.prototype.slice=function(s,a){s=it(s);var u=this;return u.__filtered__&&(s>0||a<0)?new dt(u):(s<0?u=u.takeRight(-s):s&&(u=u.drop(s)),a!==r&&(a=it(a),u=a<0?u.dropRight(-a):u.take(a-s)),u)},dt.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},dt.prototype.toArray=function(){return this.take(ie)},kn(dt.prototype,function(s,a){var u=/^(?:filter|find|map|reject)|While$/.test(a),g=/^(?:head|last)$/.test(a),y=C[g?"take"+(a=="last"?"Right":""):a],A=g||/^find/.test(a);y&&(C.prototype[a]=function(){var M=this.__wrapped__,k=g?[1]:arguments,G=M instanceof dt,ue=k[0],he=G||Qe(M),pe=function(ft){var wt=y.apply(C,Di([ft],k));return g&&be?wt[0]:wt};he&&u&&typeof ue=="function"&&ue.length!=1&&(G=he=!1);var be=this.__chain__,Te=!!this.__actions__.length,We=A&&!be,ot=G&&!Te;if(!A&&he){M=ot?M:new dt(this);var qe=s.apply(M,k);return qe.__actions__.push({func:Gl,args:[pe],thisArg:r}),new mn(qe,be)}return We&&ot?s.apply(this,k):(qe=this.thru(pe),We?g?qe.value()[0]:qe.value():qe)})}),pn(["pop","push","shift","sort","splice","unshift"],function(s){var a=bl[s],u=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",g=/^(?:pop|shift)$/.test(s);C.prototype[s]=function(){var y=arguments;if(g&&!this.__chain__){var A=this.value();return a.apply(Qe(A)?A:[],y)}return this[u](function(M){return a.apply(Qe(M)?M:[],y)})}}),kn(dt.prototype,function(s,a){var u=C[a];if(u){var g=u.name+"";bt.call(fo,g)||(fo[g]=[]),fo[g].push({name:a,func:u})}}),fo[kl(r,Z).name]=[{name:"wrapper",func:r}],dt.prototype.clone=tD,dt.prototype.reverse=rD,dt.prototype.value=nD,C.prototype.at=TP,C.prototype.chain=NP,C.prototype.commit=RP,C.prototype.next=LP,C.prototype.plant=UP,C.prototype.reverse=jP,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=FP,C.prototype.first=C.prototype.head,xa&&(C.prototype[xa]=MP),C},lo=RA();Qt?((Qt.exports=lo)._=lo,St._=lo):mt._=lo}).call(qo)})(bh,bh.exports);var S7=Object.defineProperty,O7=Object.defineProperties,A7=Object.getOwnPropertyDescriptors,Ig=Object.getOwnPropertySymbols,D7=Object.prototype.hasOwnProperty,$7=Object.prototype.propertyIsEnumerable,Sg=(t,e,r)=>e in t?S7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,lc=(t,e)=>{for(var r in e||(e={}))D7.call(e,r)&&Sg(t,r,e[r]);if(Ig)for(var r of Ig(e))$7.call(e,r)&&Sg(t,r,e[r]);return t},P7=(t,e)=>O7(t,A7(e));function cn(t,e,r){let n;const i=_h(t);return e.rpcMap&&(n=e.rpcMap[i]),n||(n=`${I7}?chainId=eip155:${i}&projectId=${r}`),n}function _h(t){return t.includes("eip155")?Number(t.split(":")[1]):Number(t)}function Og(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function T7(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const o=e.namespaces[i].accounts;n.push(...o)}),n}function N7(t={},e={}){const r=Ag(t),n=Ag(e);return bh.exports.merge(r,n)}function Ag(t){var e,r,n,i;const o={};if(!Ds(t))return o;for(const[c,l]of Object.entries(t)){const h=Lu(c)?[c]:l.chains,f=l.methods||[],v=l.events||[],x=l.rpcMap||{},_=Ja(c);o[_]=P7(lc(lc({},o[_]),l),{chains:Nu(h,(e=o[_])==null?void 0:e.chains),methods:Nu(f,(r=o[_])==null?void 0:r.methods),events:Nu(v,(n=o[_])==null?void 0:n.events),rpcMap:lc(lc({},x),(i=o[_])==null?void 0:i.rpcMap)})}return o}function R7(t){return t.includes(":")?t.split(":")[2]:t}function L7(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],o=n.events||[],c=n.accounts||[],l=Lu(r)?[r]:n.chains?n.chains:Og(n.accounts);e[r]={chains:l,methods:i,events:o,accounts:c}}return e}const Dg={},Jt=t=>Dg[t],Eh=(t,e)=>{Dg[t]=e};class M7{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Jt("events"),this.client=Jt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||cn(`${this.name}:${e}`,this.namespace);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cn(e,this.namespace);return typeof n>"u"?void 0:new fi(new Vi(n,Jt("disableProviderPing")))}}class U7{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Jt("events"),this.client=Jt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){const n=_h(e);if(!this.httpProviders[n]){const i=r||cn(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${n}`);this.setHttpProvider(n,i)}this.chainId=n,this.events.emit(pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||cn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new fi(new Vi(n,Jt("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=_h(r);e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const o=parseInt(i,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class j7{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Jt("events"),this.client=Jt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(!this.httpProviders[e]){const n=r||cn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.chainId=e,this.events.emit(pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new fi(new Vi(n,Jt("disableProviderPing")))}}class F7{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Jt("events"),this.client=Jt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||cn(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,n)}this.events.emit(pi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;e[r]=this.createHttpProvider(r,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||cn(e,this.namespace,this.client.core.projectId);return typeof n>"u"?void 0:new fi(new Vi(n,Jt("disableProviderPing")))}}class B7{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Jt("events"),this.client=Jt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const n=r||this.getCardanoRPCUrl(e